{"version":3,"sources":["../packages/risks/src/domain/data/RisksStore.js","../packages/date-utils/src/toISOString.js","../packages/risks/src/domain/models/Risk.js","../packages/risks/src/domain/services/RisksService.js","auth/domain/services/logout.js","menu/ui/AppMenuContext.js","menu/ui/AppMenu.js","SimpleAppBar.js","Page.js","PageWithAppBar.js","../packages/companies/src/domain/models/Company.js","../packages/risks/src/domain/models/RisksCollection.js","companies/ui/constants.js","../packages/date-utils/src/formatDate.js","companies/ui/table/CompaniesTableItem.js","../packages/risks/src/domain/services/isHighRisk.js","companies/ui/table/CompaniesTable.js","AppContext.js","companies/ui/CompaniesTablePage.js","FormPage.js","form/ui/validators.js","companies/ui/form/CompanyForm.js","companies/ui/EditCompanyPage.js","companies/ui/CreateCompanyPage.js","../packages/companies/src/domain/data/CompaniesStore.js","../packages/companies/src/domain/services/CompaniesService.js","auth/domain/errors/UserNotFoundError.js","auth/domain/errors/IncorrectPasswordError.js","auth/domain/services/authenticate.js","auth/ui/form/LoginForm.js","auth/ui/LoginPage.js","auth/domain/services/isAuthenticated.js","auth/ui/SecureRoute.js","App.js","serviceWorker.js","index.js"],"names":["index_browser_es","plugin","lib_index_browser_es","data_RisksStore","_ref","dbUrl","db","concat","getList","allDocs","include_docs","getByCompanyId","_getByCompanyId","Object","asyncToGenerator","regenerator_default","a","mark","_callee","companyId","getFirstResult","wrap","_context","prev","next","pipe","view","lensProp","head","abrupt","find","selector","then","stop","_x","apply","this","arguments","saveItem","_saveItem","_callee2","item","_context2","post","_x2","updateItem","_updateItem","_callee3","_context3","put","_x3","toISOString","date","Risk_create","value","createdDate","Date","lastUpdatedDate","Risk_update","_ref2","risk","objectSpread","getCompanyId","getValue","services_RisksService","listener","risksStore","calculate","_calculate","sent","min","max","Math","ceil","floor","random","subscribe","l","unsubscribe","logout","localStorage","removeItem","AppMenuContext","createContext","openMenu","AppMenu","classes","children","history","_useState","useState","_useState2","slicedToArray","isOpened","setIsOpened","react_default","createElement","ui_AppMenuContext","Provider","Drawer_default","open","onClose","List_default","className","list","ListItem_default","button","onClick","replace","pathname","defaultProps","withRouter","withStyles","width","SimpleAppBar","props","title","useContext","Fragment","AppBar_default","position","Toolbar_default","IconButton_default","menuButton","color","aria-label","Menu_default","Typography_default","variant","ui_AppMenu","theme","flexGrow","marginLeft","marginRight","buttonIconLeft","spacing","unit","root","display","flexFlow","height","classnames","PageWithAppBar","appBar","isLoading","src_Page","gridContainer","CircularProgress_default","progress","src_SimpleAppBar","maxHeight","overflow","alignSelf","margin","Company_getId","getName","getFoundationDate","RisksCollection_getByCompanyId","risks","PropTypes","shape","charterCapital","number","isRequired","_id","string","name","lastUpdated","instanceOf","foundationDate","formatDate","format_default","styles","tableCellRisk","backgroundColor","isHighRisk","company","onRecalculate","getId","TableRow_default","TableCell_default","component","scope","align","Tooltip_default","react_router_dom","to","Edit_default","fontSize","Refresh_default","CompaniesTable","companies","onAddButtonClick","Paper_default","Table_default","table","TableHead_default","TableBody_default","map","table_CompaniesTableItem","key","Fab_default","fab","Add_default","overflowX","minWidth","bottom","right","AppContext","services","getRows","mapDocs","selectDocumentsList","CompaniesTablePage","state","setState","_useContext$services","companiesService","risksService","fetchCompanies","response","getCompanies","fetchRisks","_ref3","useEffect","src_PageWithAppBar","table_CompaniesTable","push","categoryId","justifyContent","paddingTop","formContainer","flex","maxWidth","restProps","objectWithoutProperties","assign","Grid_default","container","direction","Typography","required","Boolean","undefined","isDataValid","isValid","CompanyForm","onReset","onSubmit","formattedCompany","useMemo","react_final_form_es","initialValues","values","Number","handleSubmit","submitting","validate","input","_ref3$meta","meta","error","touched","TextField_default","autoFocus","fullWidth","helperText","label","_ref4","_ref4$meta","placeholder","_ref5","_ref5$meta","type","justify","Button_default","disabled","EditCompanyPage","match","params","id","companyName","fetchCompany","result","getCompanyById","finish","editCompany","src_FormPage","e","preventDefault","CreateCompanyPage","createCompany","stopPropagation","data_CompaniesStore","getById","_getById","get","services_CompaniesService","companiesStore","data","Company_create","updatedCompany","Company_update","UserNotFoundError","login","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","Error","IncorrectPasswordError","authenticate","Promise","resolve","reject","password","setItem","LoginForm","submitError","alignContent","xs","form","t0","message","defineProperty","FORM_ERROR","paragraph","form_LoginForm","isAuthenticated","getItem","SecureRoute","react_router","CompaniesService","CompaniesStore","RisksService","RisksStore","App","src_AppContext","path","LoginPage","ui_SecureRoute","exact","window","location","hostname","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"4TAQAA,EAAA,EAAOC,OAAQC,EAAA,GAEf,IA0FeC,EA1FD,SAAAC,GACd,IAAAC,EAAAD,EAAAC,MACAC,EAAA,IAAeN,EAAA,EAAO,GAAAO,OAAAF,EAAA,WACtB,OACAG,QAAA,WACA,OAAAF,EAAAG,QAAA,CACAC,cAAA,KAGAC,eAAA,WACA,IAAAC,EAA4BC,OAAAC,EAAA,EAAAD,CAEtBE,EAAAC,EAAmBC,KAAA,SAAAC,EAAAC,GACzB,IAAAC,EACA,OAAeL,EAAAC,EAAmBK,KAAA,SAAAC,GAClC,OACA,OAAAA,EAAAC,KAAAD,EAAAE,MACA,OAEA,OADAJ,EAAiCP,OAAAY,EAAA,EAAAZ,CAAKA,OAAAa,EAAA,EAAAb,CAAKA,OAAAc,EAAA,EAAAd,CAAQ,SAAWe,EAAA,GAC9DN,EAAAO,OAAA,SAAAvB,EAAAwB,KAAA,CACAC,SAAA,CACAZ,eAEiBa,KAAAZ,IAEjB,OACA,UACA,OAAAE,EAAAW,SAGSf,MAOT,OAJA,SAAAgB,GACA,OAAAtB,EAAAuB,MAAAC,KAAAC,YAzBA,GA8BAC,SAAA,WACA,IAAAC,EAAsB1B,OAAAC,EAAA,EAAAD,CAEhBE,EAAAC,EAAmBC,KAAA,SAAAuB,EAAAC,GACzB,OAAe1B,EAAAC,EAAmBK,KAAA,SAAAqB,GAClC,OACA,OAAAA,EAAAnB,KAAAmB,EAAAlB,MACA,OACA,OAAAkB,EAAAb,OAAA,SAAAvB,EAAAqC,KAAAF,IAEA,OACA,UACA,OAAAC,EAAAT,SAGSO,MAOT,OAJA,SAAAI,GACA,OAAAL,EAAAJ,MAAAC,KAAAC,YAnBA,GAwBAQ,WAAA,WACA,IAAAC,EAAwBjC,OAAAC,EAAA,EAAAD,CAElBE,EAAAC,EAAmBC,KAAA,SAAA8B,EAAAN,GACzB,OAAe1B,EAAAC,EAAmBK,KAAA,SAAA2B,GAClC,OACA,OAAAA,EAAAzB,KAAAyB,EAAAxB,MACA,OACA,OAAAwB,EAAAnB,OAAA,SAAAvB,EAAA2C,IAAAR,IAEA,OACA,UACA,OAAAO,EAAAf,SAGSc,MAOT,OAJA,SAAAG,GACA,OAAAJ,EAAAX,MAAAC,KAAAC,YAnBA,aCzEe,SAAAc,EAAAC,GACf,OAAAA,EAAAD,cCGO,IAAIE,EAAM,SAAAjD,GACjB,IAAAe,EAAAf,EAAAe,UAEA,OACAmC,MAFAlD,EAAAkD,MAGAnC,YACAoC,YAAiBJ,EAAW,IAAAK,MAC5BC,gBAAA,OAGWC,EAAM,SAAAC,EAAAC,GACjB,IAAAN,EAAAK,EAAAL,MACA,OAASzC,OAAAgD,EAAA,EAAAhD,CAAa,GAAG+C,EAAA,CACzBN,QACAG,gBAAqBN,EAAW,IAAAK,SAIzBM,GADYjD,OAAAa,EAAA,EAAAb,CAAKA,OAAAc,EAAA,EAAAd,CAAQ,QACNA,OAAAa,EAAA,EAAAb,CAAKA,OAAAc,EAAA,EAAAd,CAAQ,eAChCkD,EAAelD,OAAAa,EAAA,EAAAb,CAAKA,OAAAc,EAAA,EAAAd,CAAQ,UC2DpBmD,EAxEC,SAAA5D,GAChB,IACA6D,EADAC,EAAA9D,EAAA8D,WAEA,OACAC,UAAA,WACA,IAAAC,EAAuBvD,OAAAC,EAAA,EAAAD,CAEjBE,EAAAC,EAAmBC,KAAA,SAAAC,EAAAC,GACzB,IAAAyC,EAAAN,EACA,OAAevC,EAAAC,EAAmBK,KAAA,SAAAC,GAClC,OACA,OAAAA,EAAAC,KAAAD,EAAAE,MACA,OAEA,OADAF,EAAAE,KAAA,EACA0C,EAAAvD,eAAAQ,GAEA,OAIA,GAHAyC,EAAAtC,EAAA+C,KAvBAC,EAwBA,GAxBAC,EAwBA,IAvBAD,EAAAE,KAAAC,KAAAH,GACAC,EAAAC,KAAAE,MAAAH,GAsBAjB,EArBAkB,KAAAE,MAAAF,KAAAG,UAAAJ,EAAAD,EAAA,IAAAA,GAuBAV,EAAA,CACAtC,EAAAE,KAAA,EACA,MAIA,OADAF,EAAAE,KAAA,EACA0C,EAAArB,WAA6Ca,EAAM,CACnDJ,SACiBM,IAEjB,OACAtC,EAAAE,KAAA,GACA,MAEA,OAEA,OADAF,EAAAE,KAAA,GACA0C,EAAA5B,SAA2Ce,EAAM,CACjDC,QACAnC,eAGA,QACA8C,GACAA,IAGA,QACA,UACA,OAAA3C,EAAAW,OAtDA,IAAAqC,EAAAC,GAyDSrD,MAOT,OAJA,SAAAgB,GACA,OAAAkC,EAAAjC,MAAAC,KAAAC,YAnDA,GAwDA7B,QAAA,WACA,OAAA0D,EAAA1D,WAEAoE,UAAA,SAAAC,GACAZ,EAAAY,GAEAC,YAAA,WACAb,EAAA,gNCzEec,MAJf,WACEC,aAAaC,WAAW,oBCGXC,EAFQC,wBAAc,CAAEC,SAAU,OCiBjD,SAASC,EAATjF,GAAiD,IAA9BkF,EAA8BlF,EAA9BkF,QAASC,EAAqBnF,EAArBmF,SAAUC,EAAWpF,EAAXoF,QAAWC,EACfC,oBAAS,GADMC,EAAA9E,OAAA+E,EAAA,EAAA/E,CAAA4E,EAAA,GACxCI,EADwCF,EAAA,GAC9BG,EAD8BH,EAAA,GAY/C,OACEI,EAAA/E,EAAAgF,cAACC,EAAeC,SAAhB,CACE5C,MAAO,CACL8B,SAZW,WACfU,GAAY,MAcVC,EAAA/E,EAAAgF,cAACG,EAAAnF,EAAD,CACEoF,KAAMP,EACNQ,QAAS,kBAAMP,GAAY,KAE3BC,EAAA/E,EAAAgF,cAACM,EAAAtF,EAAD,CAAMuF,UAAWjB,EAAQkB,MACvBT,EAAA/E,EAAAgF,cAACS,EAAAzF,EAAD,CAAU0F,QAAM,EAACC,QAhBH,WACpB5B,IACAS,EAAQoB,QAAQ,CAAEC,SAAU,aActB,YAKFtB,GAYRF,EAAQyB,aAAe,CACrBV,MAAM,GAGOW,kBAAWC,IAlDX,CACbR,KAAM,CACJS,MAAO,UAgDeD,CAAmB3B,ICvC7C,SAAS6B,EAAaC,GAAO,IACnB7B,EAAmB6B,EAAnB7B,QAAS8B,EAAUD,EAAVC,MACThC,EAAaiC,qBAAWnC,GAAxBE,SAER,OACEW,EAAA/E,EAAAgF,cAAAD,EAAA/E,EAAAsG,SAAA,KACEvB,EAAA/E,EAAAgF,cAACuB,EAAAvG,EAAD,CAAQwG,SAAS,UACfzB,EAAA/E,EAAAgF,cAACyB,EAAAzG,EAAD,KACE+E,EAAA/E,EAAAgF,cAAC0B,EAAA1G,EAAD,CACEuF,UAAWjB,EAAQqC,WACnBC,MAAM,UACNC,aAAW,OACXlB,QAASvB,GAETW,EAAA/E,EAAAgF,cAAC8B,EAAA9G,EAAD,OAEF+E,EAAA/E,EAAAgF,cAAC+B,EAAA/G,EAAD,CAAYgH,QAAQ,KAAKJ,MAAM,UAAUrB,UAAWjB,EAAQ8B,OACzDA,KAIPrB,EAAA/E,EAAAgF,cAACiC,EAAD,OAUNf,EAAaJ,aAAe,CAC1BM,MAAO,8BAGMJ,4BAhDA,SAAAkB,GAAK,MAAK,CACvBd,MAAO,CACLe,SAAU,GAEZR,WAAY,CACVS,YAAa,GACbC,YAAa,IAEfC,eAAgB,CACdD,YAAaH,EAAMK,QAAQC,QAuChBxB,CAAmBE,sBCzCnBF,4BAbA,CACbyB,KAAM,CACJC,QAAS,OACTC,SAAU,gBACVR,SAAU,EACVS,OAAQ,SAQG5B,CAJf,SAAA5G,GAAgD,IAAhCmG,EAAgCnG,EAAhCmG,UAAWjB,EAAqBlF,EAArBkF,QAASC,EAAYnF,EAAZmF,SAClC,OAAOQ,EAAA/E,EAAAgF,cAAA,OAAKO,UAAWsC,KAAWvD,EAAQmD,KAAMlC,IAAchB,KCQhE,SAASuD,GAAT1I,GAA6E,IAAnD2I,EAAmD3I,EAAnD2I,OAAQxC,EAA2CnG,EAA3CmG,UAAWjB,EAAgClF,EAAhCkF,QAASC,EAAuBnF,EAAvBmF,SAAUyD,EAAa5I,EAAb4I,UAC9D,OACEjD,EAAA/E,EAAAgF,cAACiD,GAAD,CAAM1C,UAAWA,GACbwC,EACFhD,EAAA/E,EAAAgF,cAAA,OAAKO,UAAWjB,EAAQ4D,eACrBF,EAAYjD,EAAA/E,EAAAgF,cAACmD,EAAAnI,EAAD,CAAkBuF,UAAWjB,EAAQ8D,WAAc7D,IAcxEuD,GAAehC,aAAe,CAC5BiC,OAAQhD,EAAA/E,EAAAgF,cAACqD,GAAD,MACRL,WAAW,GAGEhC,4BAtCA,CACbkC,cAAe,CACbR,QAAS,OACTP,SAAU,EACVmB,UAAW,OACXC,SAAU,QAEZH,SAAU,CACRI,UAAW,SACXC,OAAQ,SA6BGzC,CAAmB8B,yKCpBvBY,GAAQ7I,OAAAa,EAAA,EAAAb,CAAKA,OAAAc,EAAA,EAAAd,CAAQ,QACzB8I,GAAc9I,OAAAa,EAAA,EAAAb,CAAKA,OAAAc,EAAA,EAAAd,CAAQ,SAC3B+I,GAAwB/I,OAAAa,EAAA,EAAAb,CAAKA,OAAAc,EAAA,EAAAd,CAAQ,mBC5BjCgJ,GAAc,SAAA1I,EAAA2I,GACzB,OAAAA,EAAAhI,KAAA,SAAA8B,GACA,OAAWE,EAAYF,KAAAzC,4BCDM4I,KAAUC,MAAM,CAC3CC,eAAgBF,KAAUG,OAAOC,WACjCC,IAAKL,KAAUM,OAAOF,WACtBG,KAAMP,KAAUM,OAAOF,WACvBI,YAAaR,KAAUS,WAAWhH,MAClCiH,eAAgBV,KAAUM,OAAOF,yGCNpB,SAAAO,GAAAtH,GACf,OAASuH,KAAMvH,EAAA,cCmBf,IAAMwH,GAAS,CACbC,cAAe,CACbC,gBAAiB,SAAA1K,GAAc,IAAXwD,EAAWxD,EAAXwD,KAClB,OAAKA,EClBI,SAAAA,GACf,OAASG,EAAQH,GAAA,GDqBJmH,CAAWnH,GAAQ,MAAQ,QAHzB,QA0CAoD,oBAAW4D,GAAX5D,CAlCf,SAAArD,GAAuE,IAAzC2B,EAAyC3B,EAAzC2B,QAAS0F,EAAgCrH,EAAhCqH,QAASC,EAAuBtH,EAAvBsH,cAAerH,EAAQD,EAARC,KACvDzC,EAAY+J,GAAMF,GACxB,OACEjF,EAAA/E,EAAAgF,cAACmF,GAAAnK,EAAD,KACE+E,EAAA/E,EAAAgF,cAACoF,GAAApK,EAAD,CAAWqK,UAAU,KAAKC,MAAM,OAC7B3B,GAAQqB,IAEXjF,EAAA/E,EAAAgF,cAACoF,GAAApK,EAAD,CAAWuK,MAAM,SAASjG,QAAS,CAAEmD,KAAMnD,EAAQuF,gBAChDjH,EAAI,GAAArD,OAAMwD,EAASH,GAAf,KAA0B,KAEjCmC,EAAA/E,EAAAgF,cAACoF,GAAApK,EAAD,CAAWuK,MAAM,UACdb,GAAWd,GAAkBoB,KAEhCjF,EAAA/E,EAAAgF,cAACoF,GAAApK,EAAD,CAAWuK,MAAM,SACfxF,EAAA/E,EAAAgF,cAACwF,GAAAxK,EAAD,CAASoG,MAAM,QACbrB,EAAA/E,EAAAgF,cAACyF,EAAA,EAAD,CAAMC,GAAE,YAAAnL,OAAc2K,GAAMF,KAC1BjF,EAAA/E,EAAAgF,cAAC0B,EAAA1G,EAAD,CAAY6G,aAAW,eACrB9B,EAAA/E,EAAAgF,cAAC2F,GAAA3K,EAAD,CAAU4K,SAAS,aAIzB7F,EAAA/E,EAAAgF,cAACwF,GAAAxK,EAAD,CAASoG,MAAM,eACbrB,EAAA/E,EAAAgF,cAAC0B,EAAA1G,EAAD,CACE6G,aAAW,cACXlB,QAAS,kBAAMsE,EAAc9J,KAE7B4E,EAAA/E,EAAAgF,cAAC6F,GAAA7K,EAAD,CAAa4K,SAAS,gBEzBlC,SAASE,GAAe3E,GAAO,IACrB7B,EAA+D6B,EAA/D7B,QAASyG,EAAsD5E,EAAtD4E,UAAWC,EAA2C7E,EAA3C6E,iBAAkBf,EAAyB9D,EAAzB8D,cAAenB,EAAU3C,EAAV2C,MAE7D,OACE/D,EAAA/E,EAAAgF,cAACiG,GAAAjL,EAAD,CAAOuF,UAAWjB,EAAQmD,MACxB1C,EAAA/E,EAAAgF,cAACkG,GAAAlL,EAAD,CAAOuF,UAAWjB,EAAQ6G,OACxBpG,EAAA/E,EAAAgF,cAACoG,GAAApL,EAAD,KACE+E,EAAA/E,EAAAgF,cAACmF,GAAAnK,EAAD,KACE+E,EAAA/E,EAAAgF,cAACoF,GAAApK,EAAD,qBACA+E,EAAA/E,EAAAgF,cAACoF,GAAApK,EAAD,CAAWuK,MAAM,UAAjB,QACAxF,EAAA/E,EAAAgF,cAACoF,GAAApK,EAAD,CAAWuK,MAAM,UAAjB,mBACAxF,EAAA/E,EAAAgF,cAACoF,GAAApK,EAAD,QAGJ+E,EAAA/E,EAAAgF,cAACqG,GAAArL,EAAD,KACG+K,EAAUO,IAAI,SAAAtB,GACb,IAAM7J,EAAY+J,GAAMF,GACxB,OACEjF,EAAA/E,EAAAgF,cAACuG,GAAD,CACEvB,QAASA,EACTwB,IAAKrL,EACL8J,cAAeA,EACfrH,KAAMjD,GAAeQ,EAAW2I,SAM1C/D,EAAA/E,EAAAgF,cAACyG,GAAAzL,EAAD,CAAKuF,UAAWjB,EAAQoH,IAAK9E,MAAM,UAAUjB,QAASqF,GACpDjG,EAAA/E,EAAAgF,cAAC2G,GAAA3L,EAAD,QAcR8K,GAAehF,aAAe,CAC5BiF,UAAW,GACXjC,MAAO,IAGM9C,4BA/DA,SAAAkB,GAAK,MAAK,CACvBO,KAAM,CACJxB,MAAO,OACP2F,UAAW,QAEbT,MAAO,CACLU,SAAU,KAEZH,IAAK,CACHlF,SAAU,WACVsF,OAA6B,EAArB5E,EAAMK,QAAQC,KACtBuE,MAA4B,EAArB7E,EAAMK,QAAQC,QAoDVxB,CAAmB8E,IC3EnBkB,GAJI7H,wBAAc,CAC/B8H,SAAU,KCSNC,GAAUxL,YAAKC,YAAS,SACxBwL,GAAUb,YAAI5K,YAAKC,YAAS,SAC5ByL,GAAsB3L,YAC1ByL,GACAC,IA4DaE,OAzDf,SAAAjN,GAAyC,IAAXoF,EAAWpF,EAAXoF,QAAWC,EACbC,mBAAS,CACjCqG,UAAW,GACX/C,WAAW,EACXc,MAAO,KAJ8BnE,EAAA9E,OAAA+E,EAAA,EAAA/E,CAAA4E,EAAA,GAChC6H,EADgC3H,EAAA,GACzB4H,EADyB5H,EAAA,GAAA6H,EAQnCnG,qBAAW2F,IADbC,SAAuBQ,EAPcD,EAOzBzB,UAAoC2B,EAPXF,EAOI1D,MAGrC6D,EAAc,eAAAhK,EAAA9C,OAAAC,EAAA,EAAAD,CAAAE,EAAAC,EAAAC,KAAG,SAAAC,IAAA,IAAA0M,EAAA,OAAA7M,EAAAC,EAAAK,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACrB+L,EAAS,CAAEvE,WAAW,IADD1H,EAAAE,KAAA,EAEEiM,EAAiBI,eAFnB,OAEfD,EAFetM,EAAA+C,KAGrBkJ,EAAS,CACPxB,UAAWqB,GAAoBQ,GAC/B5E,WAAW,IALQ,wBAAA1H,EAAAW,SAAAf,MAAH,yBAAAyC,EAAAxB,MAAAC,KAAAC,YAAA,GASdyL,EAAU,eAAAC,EAAAlN,OAAAC,EAAA,EAAAD,CAAAE,EAAAC,EAAAC,KAAG,SAAAuB,IAAA,IAAAoL,EAAA,OAAA7M,EAAAC,EAAAK,KAAA,SAAAqB,GAAA,cAAAA,EAAAnB,KAAAmB,EAAAlB,MAAA,cAAAkB,EAAAlB,KAAA,EACMkM,EAAalN,UADnB,OACXoN,EADWlL,EAAA2B,KAEjBkJ,EAAS,SAAAD,GAAK,OAAAzM,OAAAgD,EAAA,EAAAhD,CAAA,GAAUyM,EAAV,CAAiBxD,MAAOsD,GAAoBQ,OAFzC,wBAAAlL,EAAAT,SAAAO,MAAH,yBAAAuL,EAAA5L,MAAAC,KAAAC,YAAA,GAwBhB,OAnBA2L,oBAAU,WAMR,OALAL,IACAD,EAAa9I,UAAU,WACrBkJ,MAEFA,IACO,WACLJ,EAAa5I,gBAEd,IAWDiB,EAAA/E,EAAAgF,cAACiC,EAAD,KACElC,EAAA/E,EAAAgF,cAACiI,GAAD,CAAgBjF,UAAWsE,EAAMtE,WAC/BjD,EAAA/E,EAAAgF,cAACkI,GAAD,CACEnC,UAAWuB,EAAMvB,UACjBC,iBAbiB,WACvBxG,EAAQ2I,KAAK,CAAEtH,SAAU,eAanBoE,cAVc,SAAAmD,GACpBV,EAAavJ,UAAUiK,IAUjBtE,MAAOwD,EAAMxD,yCCvBR9C,WAvCA,SAAA5G,GAAA,MAAkB,CAC/B8I,cAAe,CACbmF,eAAgB,SAChBC,WAA2B,EAHhBlO,EAAGmI,QAGMC,MAEtB+F,cAAe,CACbC,KAAM,EACNC,SAAU,WAgCCzH,CA5Bf,SAAArD,GAAyE,IAArD4B,EAAqD5B,EAArD4B,SAAUD,EAA2C3B,EAA3C2B,QAAS0D,EAAkCrF,EAAlCqF,UAAW5B,EAAuBzD,EAAvByD,MAAUsH,EAAa7N,OAAA8N,GAAA,EAAA9N,CAAA8C,EAAA,4CACvE,OACEoC,EAAA/E,EAAAgF,cAACiI,GAADpN,OAAA+N,OAAA,GACMF,EADN,CAEEpJ,QAAS,CAAE4D,cAAe5D,EAAQ4D,eAClCF,UAAWA,IAEXjD,EAAA/E,EAAAgF,cAAC6I,GAAA7N,EAAD,CACEuF,UAAWjB,EAAQiJ,cACnBO,WAAS,EACTC,UAAU,SACVxG,QAAS,IAETxC,EAAA/E,EAAAgF,cAAC6I,GAAA7N,EAAD,CACEqK,UAAW2D,IACXvM,MAAI,EACJuF,QAAQ,SAEPZ,GAEHrB,EAAA/E,EAAAgF,cAAC6I,GAAA7N,EAAD,CAAMyB,MAAI,GACPuG,EAAY,KAAOzD,6ECtCjB0J,GAAW,SAAC3L,GAAD,OAAW4L,QAAQ5L,QAAS6L,EAAY,qBACnDC,GAAc,SAAC9L,GAAD,OAAW+L,KAAQ,IAAI7L,KAAKF,SAAU6L,EAAY,uCCY9D,SAASG,GAATlP,GAAqD,IAA9B4K,EAA8B5K,EAA9B4K,QAASuE,EAAqBnP,EAArBmP,QAASC,EAAYpP,EAAZoP,SAShDC,EAAmBC,kBAAQ,WAC/B,OAAK1E,EAIEnK,OAAAgD,EAAA,EAAAhD,CAAA,GACFmK,EADL,CAEEP,eAAgBC,GAAWd,GAAkBoB,MALtCA,GAOR,CAACA,IAEJ,OACEjF,EAAA/E,EAAAgF,cAAC2J,GAAA,EAAD,CAAMC,cAAeH,EAAkBD,SApBjB,SAAAK,GACtBL,EAAS3O,OAAAgD,EAAA,EAAAhD,CAAA,GACJgP,EADG,CAENpF,eAAgB,IAAIjH,KAAKqM,EAAOpF,gBAChCR,eAAgB6F,OAAOD,EAAO5F,qBAiB7B,SAAAtG,GAAA,IAAGoM,EAAHpM,EAAGoM,aAAcC,EAAjBrM,EAAiBqM,WAAjB,OACCjK,EAAA/E,EAAAgF,cAAC6I,GAAA7N,EAAD,CACEqK,UAAU,OACVyD,WAAS,EACTC,UAAU,SACVQ,QAASA,EACTC,SAAUO,EACVxH,QAAS,IAETxC,EAAA/E,EAAAgF,cAAC6I,GAAA7N,EAAD,CAAMyB,MAAI,GACRsD,EAAA/E,EAAAgF,cAAC2J,GAAA,EAAD,CAAOrF,KAAK,OAAO2F,SAAUhB,IAC1B,SAAAlB,GAAA,IAAGmC,EAAHnC,EAAGmC,MAAHC,EAAApC,EAAUqC,KAAQC,EAAlBF,EAAkBE,MAAOC,EAAzBH,EAAyBG,QAAzB,OACCvK,EAAA/E,EAAAgF,cAACuK,GAAAvP,EAADH,OAAA+N,OAAA,GACMsB,EADN,CAEEM,WAAS,EACTH,MAAOC,GAAWpB,QAAQmB,GAC1BI,WAAS,EACTC,WAAYJ,GAAWD,EACvBM,MAAM,aAKd5K,EAAA/E,EAAAgF,cAAC6I,GAAA7N,EAAD,CAAMyB,MAAI,GACRsD,EAAA/E,EAAAgF,cAAC2J,GAAA,EAAD,CACErF,KAAK,iBACL2F,SAAU,SAAA3M,GAAK,OAAI2L,GAAS3L,IAAU8L,GAAY9L,KAEjD,SAAAsN,GAAA,IAAGV,EAAHU,EAAGV,MAAHW,EAAAD,EAAUR,KAAQC,EAAlBQ,EAAkBR,MAAOC,EAAzBO,EAAyBP,QAAzB,OACCvK,EAAA/E,EAAAgF,cAACuK,GAAAvP,EAADH,OAAA+N,OAAA,GACMsB,EADN,CAEEG,MAAOC,GAAWpB,QAAQmB,GAC1BI,WAAS,EACTC,WAAYJ,GAAWD,EACvBM,MAAM,kBACNG,YAAY,kBAKpB/K,EAAA/E,EAAAgF,cAAC6I,GAAA7N,EAAD,CAAMyB,MAAI,GACRsD,EAAA/E,EAAAgF,cAAC2J,GAAA,EAAD,CAAOrF,KAAK,iBAAiB2F,SAAUhB,IACpC,SAAA8B,GAAA,IAAGb,EAAHa,EAAGb,MAAHc,EAAAD,EAAUX,KAAQC,EAAlBW,EAAkBX,MAAOC,EAAzBU,EAAyBV,QAAzB,OACCvK,EAAA/E,EAAAgF,cAACuK,GAAAvP,EAADH,OAAA+N,OAAA,GACMsB,EADN,CAEEG,MAAOC,GAAWpB,QAAQmB,GAC1BI,WAAS,EACTC,WAAYJ,GAAWD,EACvBM,MAAM,kBACNM,KAAK,eAKblL,EAAA/E,EAAAgF,cAAC6I,GAAA7N,EAAD,CAAMyB,MAAI,GACRsD,EAAA/E,EAAAgF,cAAC6I,GAAA7N,EAAD,CAAM8N,WAAS,EAACoC,QAAQ,WAAW3I,QAAS,IAC1CxC,EAAA/E,EAAAgF,cAAC6I,GAAA7N,EAAD,CAAMyB,MAAI,GACRsD,EAAA/E,EAAAgF,cAACmL,GAAAnQ,EAAD,CAAQiQ,KAAK,SAAb,WAEFlL,EAAA/E,EAAAgF,cAAC6I,GAAA7N,EAAD,CAAMyB,MAAI,GACRsD,EAAA/E,EAAAgF,cAACmL,GAAAnQ,EAAD,CACE4G,MAAM,UACNwJ,SAAUpB,EACViB,KAAK,SACLjJ,QAAQ,aAJV,gBCVDqJ,OA5Ef,SAAAjR,GAA6C,IAAlBkR,EAAkBlR,EAAlBkR,MAAO9L,EAAWpF,EAAXoF,QAAWC,EACjBC,mBAAS,CACjCsF,QAAS,KACThC,WAAW,IAH8BrD,EAAA9E,OAAA+E,EAAA,EAAA/E,CAAA4E,EAAA,GACpC6H,EADoC3H,EAAA,GAC7B4H,EAD6B5H,EAAA,GAKZ8H,EAAuBpG,qBAAW2F,IAAzDC,SAAYlB,UAEd5K,EAAYmQ,EAAMC,OAAOC,GACvBxG,EAAuBsC,EAAvBtC,QAAShC,EAAcsE,EAAdtE,UAEXyI,EAAczI,EAAY,GAAKgC,EAAQV,KAEvCoH,EAAY,eAAA/N,EAAA9C,OAAAC,EAAA,EAAAD,CAAAE,EAAAC,EAAAC,KAAG,SAAAC,IAAA,IAAAyQ,EAAA,OAAA5Q,EAAAC,EAAAK,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACnB+L,EAAS,SAAAD,GAAK,OAAAzM,OAAAgD,EAAA,EAAAhD,CAAA,GAAUyM,EAAV,CAAiBtE,WAAW,MADvB1H,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAGIiM,EAAiBmE,eAAezQ,GAHpC,OAGXwQ,EAHWrQ,EAAA+C,KAIjBkJ,EAAS,SAAAD,GAAK,OAAAzM,OAAAgD,EAAA,EAAAhD,CAAA,GACTyM,EADS,CAEZtC,QAAS2G,MANM,cAAArQ,EAAAC,KAAA,EASjBgM,EAAS,SAAAD,GAAK,OAAAzM,OAAAgD,EAAA,EAAAhD,CAAA,GACTyM,EADS,CAEZtE,WAAW,MAXI1H,EAAAuQ,OAAA,2BAAAvQ,EAAAW,SAAAf,EAAA,oBAAH,yBAAAyC,EAAAxB,MAAAC,KAAAC,YAAA,GAgBlB2L,oBAAU,WACR0D,KACC,IAEH,IAAM3I,EACJhD,EAAA/E,EAAAgF,cAACqD,GAAD,CACEjC,MAAO4B,EAAY,iBAAmByI,IASpCjC,EAAQ,eAAAzB,EAAAlN,OAAAC,EAAA,EAAAD,CAAAE,EAAAC,EAAAC,KAAG,SAAAuB,EAAOqN,GAAP,OAAA9O,EAAAC,EAAAK,KAAA,SAAAqB,GAAA,cAAAA,EAAAnB,KAAAmB,EAAAlB,MAAA,cAAAkB,EAAAlB,KAAA,EACTiM,EAAiBqE,YAAY9G,EAAS6E,GAD7B,OAEfrK,EAAQoB,QAAQ,CAAEC,SAAU,MAFb,wBAAAnE,EAAAT,SAAAO,MAAH,gBAAAN,GAAA,OAAA6L,EAAA5L,MAAAC,KAAAC,YAAA,GAKd,OACE0D,EAAA/E,EAAAgF,cAACiC,EAAD,KACElC,EAAA/E,EAAAgF,cAAC+L,GAAD,CACEhJ,OAAQA,EACRC,UAAWsE,EAAMtE,UACjB5B,MAAK,QAAA7G,OAAUkR,IAEf1L,EAAA/E,EAAAgF,cAACsJ,GAAD,CACEtE,QAASA,EACTuE,QAnBQ,SAACyC,GACfA,EAAEC,iBACFzM,EAAQoB,QAAQ,CAAEC,SAAU,OAkBtB2I,SAAUA,OCjBL0C,OAzCf,SAAA9R,GAAwC,IAAXoF,EAAWpF,EAAXoF,QACPuG,EAAgB1E,qBAAW2F,IAAvCC,SAAYlB,UAEdhD,EACJhD,EAAA/E,EAAAgF,cAACqD,GAAD,CACEjC,MAAM,uBAUJoI,EAAQ,eAAA7L,EAAA9C,OAAAC,EAAA,EAAAD,CAAAE,EAAAC,EAAAC,KAAG,SAAAC,EAAO2O,GAAP,OAAA9O,EAAAC,EAAAK,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACTuK,EAAUoG,cAActC,GADf,OAEfrK,EAAQoB,QAAQ,KAFD,wBAAAtF,EAAAW,SAAAf,MAAH,gBAAAgB,GAAA,OAAAyB,EAAAxB,MAAAC,KAAAC,YAAA,GAKd,OACE0D,EAAA/E,EAAAgF,cAACiC,EAAD,KACElC,EAAA/E,EAAAgF,cAAC+L,GAAD,CACEhJ,OAAQA,EACR3B,MAAK,sBAELrB,EAAA/E,EAAAgF,cAACsJ,GAAD,CACEC,QAlBQ,SAACyC,GACfA,EAAEC,iBACFD,EAAEI,kBACF5M,EAAQoB,QAAQ,MAgBV4I,SAAUA,OCiDL6C,GApFG,SAAAjS,GAClB,IAAAC,EAAAD,EAAAC,MACAC,EAAA,IAAeN,EAAA,EAAO,GAAAO,OAAAF,EAAA,eACtB,OACAG,QAAA,WACA,OAAAF,EAAAG,QAAA,CACAC,cAAA,KAGA4R,QAAA,WACA,IAAAC,EAAqB1R,OAAAC,EAAA,EAAAD,CAEfE,EAAAC,EAAmBC,KAAA,SAAAC,EAAAsQ,GACzB,OAAezQ,EAAAC,EAAmBK,KAAA,SAAAC,GAClC,OACA,OAAAA,EAAAC,KAAAD,EAAAE,MACA,OACA,OAAAF,EAAAO,OAAA,SAAAvB,EAAAkS,IAAAhB,IAEA,OACA,UACA,OAAAlQ,EAAAW,SAGSf,MAOT,OAJA,SAAAgB,GACA,OAAAqQ,EAAApQ,MAAAC,KAAAC,YAnBA,GAwBAC,SAAA,WACA,IAAAC,EAAsB1B,OAAAC,EAAA,EAAAD,CAEhBE,EAAAC,EAAmBC,KAAA,SAAAuB,EAAAC,GACzB,OAAe1B,EAAAC,EAAmBK,KAAA,SAAAqB,GAClC,OACA,OAAAA,EAAAnB,KAAAmB,EAAAlB,MACA,OACA,OAAAkB,EAAAb,OAAA,SAAAvB,EAAAqC,KAAAF,IAEA,OACA,UACA,OAAAC,EAAAT,SAGSO,MAOT,OAJA,SAAAI,GACA,OAAAL,EAAAJ,MAAAC,KAAAC,YAnBA,GAwBAQ,WAAA,WACA,IAAAC,EAAwBjC,OAAAC,EAAA,EAAAD,CAElBE,EAAAC,EAAmBC,KAAA,SAAA8B,EAAAN,GACzB,OAAe1B,EAAAC,EAAmBK,KAAA,SAAA2B,GAClC,OACA,OAAAA,EAAAzB,KAAAyB,EAAAxB,MACA,OACA,OAAAwB,EAAAnB,OAAA,SAAAvB,EAAA2C,IAAAR,IAEA,OACA,UACA,OAAAO,EAAAf,SAGSc,MAOT,OAJA,SAAAG,GACA,OAAAJ,EAAAX,MAAAC,KAAAC,YAnBA,KCvCeoQ,GApBK,SAAArS,GACpB,IAAAsS,EAAAtS,EAAAsS,eACA,OACAP,cAAA,SAAAQ,GACA,IAAA3H,EfFiB,SAAA5K,GACjB,IAAAkK,EAAAlK,EAAAkK,KACAG,EAAArK,EAAAqK,eAEA,OACAR,eAFA7J,EAAA6J,eAGAQ,iBACAhH,gBAAA,KACA6G,OACA/G,YAAiBJ,EAAW,IAAAK,OePRoP,CAAMD,GAC1B,OAAAD,EAAApQ,SAAA0I,IAEA8G,YAAA,SAAA9G,EAAA2H,GACA,IAAAE,EfMiB,SAAAlP,EAAAqH,GACjB,IAAAV,EAAA3G,EAAA2G,KACAG,EAAA9G,EAAA8G,eACAR,EAAAtG,EAAAsG,eACA,OAASpJ,OAAAgD,EAAA,EAAAhD,CAAa,GAAGmK,EAAA,CACzBf,iBACAQ,iBACAhH,gBAAqBN,EAAW,IAAAK,MAChC8G,Sed2BwI,CAAMH,EAAA3H,GACjC,OAAA0H,EAAA7P,WAAAgQ,IAEAhF,aAAA,WACA,OAAA6E,EAAAlS,WAEAoR,eAAA,SAAAJ,GACA,OAAAkB,EAAAJ,QAAAd,qECjBqBuB,eACnB,SAAAA,EAAYC,GAAQ,OAAAnS,OAAAoS,GAAA,EAAApS,CAAAuB,KAAA2Q,GAAAlS,OAAAqS,GAAA,EAAArS,CAAAuB,KAAAvB,OAAAsS,GAAA,EAAAtS,CAAAkS,GAAAK,KAAAhR,KAAA,SAAA7B,OACHyS,EADE,+DAD0BK,QCA1BC,eACnB,SAAAA,IAAe,OAAAzS,OAAAoS,GAAA,EAAApS,CAAAuB,KAAAkR,GAAAzS,OAAAqS,GAAA,EAAArS,CAAAuB,KAAAvB,OAAAsS,GAAA,EAAAtS,CAAAyS,GAAAF,KAAAhR,KAAA,8DADmCiR,QCqBrCE,OAlBf,SAAsB1D,GACpB,OAAO,IAAI2D,QAAQ,SAACC,EAASC,GAAW,IAC9BV,EAAoBnD,EAApBmD,MAAOW,EAAa9D,EAAb8D,SAED,UAAVX,EAGoB,UAAbW,GAKX3O,aAAa4O,QAAQ,kBAAmB,QAExCH,KANEC,EAAO,IAAIJ,IAHXI,EAAO,IAAIX,GAAkBC,OCEnC,SAASa,GAATzT,GAA4C,IAAvBmG,EAAuBnG,EAAvBmG,UAAWiJ,EAAYpP,EAAZoP,SAC9B,OACEzJ,EAAA/E,EAAAgF,cAAC2J,GAAA,EAAD,CAAMH,SAAUA,GACb,SAAA7L,GAAA,IAAGoM,EAAHpM,EAAGoM,aAAc+D,EAAjBnQ,EAAiBmQ,YAAa9D,EAA9BrM,EAA8BqM,WAA9B,OACCjK,EAAA/E,EAAAgF,cAAC6I,GAAA7N,EAAD,CACE+S,aAAa,SACbxN,UAAWA,EACX8E,UAAU,OACVyD,WAAS,EACTU,SAAUO,EACVxH,QAAS,IAERuL,EACC/N,EAAA/E,EAAAgF,cAAC6I,GAAA7N,EAAD,CACE4G,MAAM,QACNyD,UAAW2D,IACXvM,MAAI,EACJuR,GAAI,IAEHF,GAED,KAEJ/N,EAAA/E,EAAAgF,cAAC6I,GAAA7N,EAAD,CAAMyB,MAAI,EAACuR,GAAI,IACbjO,EAAA/E,EAAAgF,cAAC2J,GAAA,EAAD,CACErF,KAAK,QACL2F,SAAUhB,IAET,SAAAlB,GAAA,IAAGmC,EAAHnC,EAAGmC,MAAHC,EAAApC,EAAUqC,KAAQC,EAAlBF,EAAkBE,MAAOC,EAAzBH,EAAyBG,QAASwD,EAAlC3D,EAAkC2D,YAAlC,OACC/N,EAAA/E,EAAAgF,cAACuK,GAAAvP,EAADH,OAAA+N,OAAA,GACMsB,EADN,CAEEM,WAAS,EACTH,MAAOC,GAAWpB,QAAQmB,GAASyD,GACnCrD,WAAS,EACTC,WAAYJ,IAAYD,GAASyD,GACjChD,YAAY,cAMpB/K,EAAA/E,EAAAgF,cAAC6I,GAAA7N,EAAD,CAAMyB,MAAI,EAACuR,GAAI,IACbjO,EAAA/E,EAAAgF,cAAC2J,GAAA,EAAD,CACErF,KAAK,WACL2F,SAAUhB,IAET,SAAA2B,GAAA,IAAGV,EAAHU,EAAGV,MAAHW,EAAAD,EAAUR,KAAQC,EAAlBQ,EAAkBR,MAAOC,EAAzBO,EAAyBP,QAAzB,OACCvK,EAAA/E,EAAAgF,cAACuK,GAAAvP,EAADH,OAAA+N,OAAA,GACMsB,EADN,CAEEG,MAAOC,GAAWpB,QAAQmB,GAC1BI,WAAS,EACTC,WAAYJ,GAAWD,EACvBS,YAAY,WACZG,KAAK,iBAMblL,EAAA/E,EAAAgF,cAAC6I,GAAA7N,EAAD,CAAMyB,MAAI,EAACuR,GAAI,IACbjO,EAAA/E,EAAAgF,cAACmL,GAAAnQ,EAAD,CACE4G,MAAM,UACNwJ,SAAUpB,EACVS,WAAS,EACTQ,KAAK,SACLjJ,QAAQ,aALV,cAqBZ6L,GAAU/M,aAAe,CACvBP,UAAW,IAGEsN,UCtBA7M,WA3DA,SAACkB,GAAD,MAAY,CACzBO,KAAM,CACJ6F,WAAiC,EAArBpG,EAAMK,QAAQC,MAE5ByL,KAAM,CACJxK,OAAM,GAAAlJ,OAA0B,EAArB2H,EAAMK,QAAQC,KAAnB,WACNiG,SAAU,WAqDCzH,CAjDf,SAAA5G,GAAyC,IAApBkF,EAAoBlF,EAApBkF,QAASE,EAAWpF,EAAXoF,QACtBgK,EAAQ,eAAA7L,EAAA9C,OAAAC,EAAA,EAAAD,CAAAE,EAAAC,EAAAC,KAAG,SAAAC,EAAO2O,GAAP,OAAA9O,EAAAC,EAAAK,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAEP+R,GAAa1D,GAFN,OAGbrK,EAAQoB,QAAQ,CAAEC,SAAU,MAHfvF,EAAAE,KAAA,mBAAAF,EAAAC,KAAA,EAAAD,EAAA4S,GAAA5S,EAAA,WAKTA,EAAA4S,cAAanB,IALJ,CAAAzR,EAAAE,KAAA,gBAAAF,EAAAO,OAAA,SAMJ,CAAEmR,MAAO1R,EAAA4S,GAAEC,UANP,aAOF7S,EAAA4S,cAAaZ,IAPX,CAAAhS,EAAAE,KAAA,gBAAAF,EAAAO,OAAA,SAAAhB,OAAAuT,GAAA,EAAAvT,CAAA,GAQDwT,KAAa,0BARZ,cAAA/S,EAAA4S,GAAA,yBAAA5S,EAAAW,SAAAf,EAAA,iBAAH,gBAAAgB,GAAA,OAAAyB,EAAAxB,MAAAC,KAAAC,YAAA,GAed,OACE0D,EAAA/E,EAAAgF,cAACiD,GAAD,CAAM3D,QAAS,CAAEmD,KAAMnD,EAAQmD,OAC7B1C,EAAA/E,EAAAgF,cAAC+B,EAAA/G,EAAD,CACEuK,MAAM,SACN+I,WAAW,EACXtM,QAAQ,SAHV,WAQAjC,EAAA/E,EAAAgF,cAAC+B,EAAA/G,EAAD,CACEuK,MAAM,SACN3D,MAAM,iBAFR,MAOA7B,EAAA/E,EAAAgF,cAAC+B,EAAA/G,EAAD,CACEuK,MAAM,SACN3D,MAAM,UACNI,QAAQ,YAHV,8BAQAjC,EAAA/E,EAAAgF,cAACuO,GAAD,CACEhO,UAAWjB,EAAQ2O,KACnBzE,SAAUA,OC/DHgF,OAJf,WACE,MAAmD,SAA5CxP,aAAayP,QAAQ,oBCkBfC,OAdf,SAAAtU,GAAmC,IAAZmF,EAAYnF,EAAZmF,SACrB,OAAKiP,KAUEjP,EARHQ,EAAA/E,EAAAgF,cAAC2O,EAAA,EAAD,CACEjJ,GAAI,CACF7E,SAAU,aCOdxG,WACJ,sMAGIoN,GAAmBmH,GAAiB,CAAElC,eADrBmC,GAAe,CAAExU,aAGlCqN,GAAeoH,EAAa,CAAE5Q,WADjB6Q,EAAW,CAAE1U,aA2BjB2U,OAxBf,WACE,OACEjP,EAAA/E,EAAAgF,cAAA,OAAKO,UAAU,OACbR,EAAA/E,EAAAgF,cAACiP,GAAW/O,SAAZ,CACE5C,MAAO,CACL2J,SAAU,CAAElB,UAAW0B,GAAkB3D,MAAO4D,MAGlD3H,EAAA/E,EAAAgF,cAACyF,EAAA,EAAD,KACE1F,EAAA/E,EAAAgF,cAAC2O,EAAA,EAAD,KACE5O,EAAA/E,EAAAgF,cAAC2O,EAAA,EAAD,CAAOO,KAAK,SAAS7J,UAAW8J,KAEhCpP,EAAA/E,EAAAgF,cAACoP,GAAD,KACErP,EAAA/E,EAAAgF,cAAC2O,EAAA,EAAD,CAAOU,OAAK,EAACH,KAAK,IAAI7J,UAAWgC,KACjCtH,EAAA/E,EAAAgF,cAAC2O,EAAA,EAAD,CAAOU,OAAK,EAACH,KAAK,YAAY7J,UAAW6G,KACzCnM,EAAA/E,EAAAgF,cAAC2O,EAAA,EAAD,CAAOO,KAAK,eAAe7J,UAAWgG,WC5BhCnC,QACW,cAA7BoG,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASlE,MACvB,2DCZNmE,IAASC,OAAO3P,EAAA/E,EAAAgF,cAAC2P,GAAD,MAASC,SAASC,eAAe,SD2H3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMhU,KAAK,SAAAiU,GACjCA,EAAaC","file":"static/js/main.f2c86734.chunk.js","sourcesContent":["import _regeneratorRuntime from \"/Users/dzianis_roi/Projects/logistics-risks-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/dzianis_roi/Projects/logistics-risks-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport PouchDB from \"pouchdb\";\nimport PouchDBFind from \"pouchdb-find\";\nimport view from 'ramda/es/view';\nimport lensProp from \"ramda/es/lensProp\";\nimport pipe from \"ramda/es/pipe\";\nimport head from \"ramda/es/head\";\nPouchDB.plugin(PouchDBFind);\n\nvar RisksStore = function RisksStore(_ref) {\n  var dbUrl = _ref.dbUrl;\n  var db = new PouchDB(\"\".concat(dbUrl, \"/risks\"));\n  return {\n    getList: function getList() {\n      return db.allDocs({\n        include_docs: true\n      });\n    },\n    getByCompanyId: function () {\n      var _getByCompanyId = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(companyId) {\n        var getFirstResult;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                getFirstResult = pipe(view(lensProp('docs')), head);\n                return _context.abrupt(\"return\", db.find({\n                  selector: {\n                    companyId: companyId\n                  }\n                }).then(getFirstResult));\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getByCompanyId(_x) {\n        return _getByCompanyId.apply(this, arguments);\n      }\n\n      return getByCompanyId;\n    }(),\n    saveItem: function () {\n      var _saveItem = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(item) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                return _context2.abrupt(\"return\", db.post(item));\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function saveItem(_x2) {\n        return _saveItem.apply(this, arguments);\n      }\n\n      return saveItem;\n    }(),\n    updateItem: function () {\n      var _updateItem = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(item) {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                return _context3.abrupt(\"return\", db.put(item));\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function updateItem(_x3) {\n        return _updateItem.apply(this, arguments);\n      }\n\n      return updateItem;\n    }()\n  };\n};\n\nexport default RisksStore;","export default function toISOString(date) {\n  return date.toISOString();\n}","import _objectSpread from \"/Users/dzianis_roi/Projects/logistics-risks-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport view from \"ramda/es/view\";\nimport lensProp from \"ramda/es/lensProp\";\nimport toISOString from \"@logistics-calc/date-utils/src/toISOString\";\nexport var create = function create(_ref) {\n  var companyId = _ref.companyId,\n      value = _ref.value;\n  return {\n    value: value,\n    companyId: companyId,\n    createdDate: toISOString(new Date()),\n    lastUpdatedDate: null\n  };\n};\nexport var update = function update(_ref2, risk) {\n  var value = _ref2.value;\n  return _objectSpread({}, risk, {\n    value: value,\n    lastUpdatedDate: toISOString(new Date())\n  });\n};\nexport var getId = view(lensProp('_id'));\nexport var getCompanyId = view(lensProp('companyId'));\nexport var getValue = view(lensProp('value'));","import _regeneratorRuntime from \"/Users/dzianis_roi/Projects/logistics-risks-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/dzianis_roi/Projects/logistics-risks-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { create, update } from \"@logistics-calc/risks/src/domain/models/Risk\";\n\nvar getRandomInt = function getRandomInt(min, max) {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n\nvar RisksService = function RisksService(_ref) {\n  var risksStore = _ref.risksStore;\n  var listener;\n  return {\n    calculate: function () {\n      var _calculate = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(companyId) {\n        var risk, value;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return risksStore.getByCompanyId(companyId);\n\n              case 2:\n                risk = _context.sent;\n                value = getRandomInt(10, 100);\n\n                if (!risk) {\n                  _context.next = 9;\n                  break;\n                }\n\n                _context.next = 7;\n                return risksStore.updateItem(update({\n                  value: value\n                }, risk));\n\n              case 7:\n                _context.next = 11;\n                break;\n\n              case 9:\n                _context.next = 11;\n                return risksStore.saveItem(create({\n                  value: value,\n                  companyId: companyId\n                }));\n\n              case 11:\n                if (listener) {\n                  listener();\n                }\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function calculate(_x) {\n        return _calculate.apply(this, arguments);\n      }\n\n      return calculate;\n    }(),\n    getList: function getList() {\n      return risksStore.getList();\n    },\n    subscribe: function subscribe(l) {\n      listener = l;\n    },\n    unsubscribe: function unsubscribe() {\n      listener = null;\n    }\n  };\n};\n\nexport default RisksService;","function logout() {\n  localStorage.removeItem('isAuthenticated');\n}\n\nexport default logout;\n","import { createContext } from 'react';\n\nconst AppMenuContext = createContext({ openMenu: null });\n\nexport default AppMenuContext;\n","import React, { useState } from \"react\";\nimport PropTypes from 'prop-types';\nimport { withRouter } from 'react-router-dom';\nimport List from \"@material-ui/core/List/index\";\nimport ListItem from \"@material-ui/core/ListItem/index\";\nimport Drawer from \"@material-ui/core/Drawer/index\";\nimport withStyles from \"@material-ui/core/styles/withStyles\";\n\nimport logout from \"../../auth/domain/services/logout\";\n\nimport AppMenuContext from './AppMenuContext';\n\n\nconst styles = {\n  list: {\n    width: '250px',\n  },\n};\n\nfunction AppMenu({ classes, children, history }) {\n  const [isOpened, setIsOpened] = useState(false);\n\n  const openMenu = () => {\n    setIsOpened(true);\n  };\n\n  const onLogoutClick = () => {\n    logout();\n    history.replace({ pathname: '/login' });\n  };\n\n  return (\n    <AppMenuContext.Provider\n      value={{\n        openMenu,\n      }}\n    >\n      <Drawer\n        open={isOpened}\n        onClose={() => setIsOpened(false)}\n      >\n        <List className={classes.list}>\n          <ListItem button onClick={onLogoutClick}>\n            Logout\n          </ListItem>\n        </List>\n      </Drawer>\n      { children }\n    </AppMenuContext.Provider>\n  )\n}\n\n\nAppMenu.propTypes = {\n  classes: PropTypes.object.isRequired,\n  onLogout: PropTypes.func,\n  open: PropTypes.bool,\n};\n\nAppMenu.defaultProps = {\n  open: false,\n};\n\nexport default withRouter(withStyles(styles)(AppMenu));\n","import React, { useContext } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport SimpleDrawer from \"./menu/ui/AppMenu\";\nimport AppMenuContext from \"./menu/ui/AppMenuContext\";\n\nconst styles = theme => ({\n  title: {\n    flexGrow: 1\n  },\n  menuButton: {\n    marginLeft: -12,\n    marginRight: 20\n  },\n  buttonIconLeft: {\n    marginRight: theme.spacing.unit\n  }\n});\n\nfunction SimpleAppBar(props) {\n  const { classes, title } = props;\n  const { openMenu } = useContext(AppMenuContext);\n\n  return (\n    <>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <IconButton\n            className={classes.menuButton}\n            color=\"inherit\"\n            aria-label=\"Menu\"\n            onClick={openMenu}\n          >\n            <MenuIcon/>\n          </IconButton>\n          <Typography variant=\"h6\" color=\"inherit\" className={classes.title}>\n            {title}\n          </Typography>\n        </Toolbar>\n      </AppBar>\n      <SimpleDrawer />\n    </>\n  );\n}\n\nSimpleAppBar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  title: PropTypes.string\n};\n\nSimpleAppBar.defaultProps = {\n  title: \"Logistics Risks Calculator\"\n};\n\nexport default withStyles(styles)(SimpleAppBar);\n","import React from 'react';\nimport classnames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\n\nconst styles = {\n  root: {\n    display: 'flex',\n    flexFlow: 'column nowrap',\n    flexGrow: 1,\n    height: '100%',\n  },\n};\n\nfunction Page({ className, classes, children }) {\n  return <div className={classnames(classes.root, className)}>{ children }</div>\n}\n\nexport default withStyles(styles)(Page);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nimport SimpleAppBar from './SimpleAppBar';\nimport Page from './Page';\n\n\nconst styles = {\n  gridContainer: {\n    display: 'flex',\n    flexGrow: 1,\n    maxHeight: '100%',\n    overflow: 'auto',\n  },\n  progress: {\n    alignSelf: 'center',\n    margin: 'auto',\n  },\n};\n\n\nfunction PageWithAppBar({ appBar, className, classes, children, isLoading }) {\n  return (\n    <Page className={className}>\n      { appBar }\n      <div className={classes.gridContainer}>\n        {isLoading ? <CircularProgress className={classes.progress}/> : children}\n      </div>\n    </Page>\n  )\n}\n\nPageWithAppBar.propTypes = {\n  appBar: PropTypes.node,\n  children: PropTypes.node,\n  className: PropTypes.string,\n  classes: PropTypes.object.isRequired,\n  isLoading: PropTypes.bool,\n};\n\nPageWithAppBar.defaultProps = {\n  appBar: <SimpleAppBar />,\n  isLoading: false,\n};\n\nexport default withStyles(styles)(PageWithAppBar);\n","import _objectSpread from \"/Users/dzianis_roi/Projects/logistics-risks-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport lensProp from 'ramda/es/lensProp';\nimport view from 'ramda/es/view';\nimport toISOString from '@logistics-calc/date-utils/src/toISOString';\nexport var create = function create(_ref) {\n  var name = _ref.name,\n      foundationDate = _ref.foundationDate,\n      charterCapital = _ref.charterCapital;\n  return {\n    charterCapital: charterCapital,\n    foundationDate: foundationDate,\n    lastUpdatedDate: null,\n    name: name,\n    createdDate: toISOString(new Date())\n  };\n};\nexport var update = function update(_ref2, company) {\n  var name = _ref2.name,\n      foundationDate = _ref2.foundationDate,\n      charterCapital = _ref2.charterCapital;\n  return _objectSpread({}, company, {\n    charterCapital: charterCapital,\n    foundationDate: foundationDate,\n    lastUpdatedDate: toISOString(new Date()),\n    name: name\n  });\n};\nexport var getId = view(lensProp('_id'));\nexport var getName = view(lensProp('name'));\nexport var getFoundationDate = view(lensProp('foundationDate'));","import { getCompanyId } from \"./Risk\";\nexport var getByCompanyId = function getByCompanyId(companyId, risks) {\n  return risks.find(function (risk) {\n    return getCompanyId(risk) === companyId;\n  });\n};","import PropTypes from 'prop-types';\n\nexport const COMPANY_SHAPE = PropTypes.shape({\n  charterCapital: PropTypes.number.isRequired,\n  _id: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  lastUpdated: PropTypes.instanceOf(Date),\n  foundationDate: PropTypes.string.isRequired\n});\n","import format from \"date-fns/format\";\nexport default function formatDate(date) {\n  return format(date, 'MM/DD/YYYY');\n}","import React from 'react';\nimport { withStyles } from '@material-ui/styles';\nimport TableCell from '@material-ui/core/TableCell';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { Link } from 'react-router-dom';\nimport IconButton from '@material-ui/core/IconButton';\nimport TableRow from '@material-ui/core/TableRow';\nimport RefreshIcon from '@material-ui/icons/Refresh';\nimport EditIcon from '@material-ui/icons/Edit';\n\nimport formatDate from '@logistics-calc/date-utils/src/formatDate';\n\nimport isHighRisk from '@logistics-calc/risks/src/domain/services/isHighRisk';\nimport { getValue } from '@logistics-calc/risks/src/domain/models/Risk';\n\nimport {\n  getFoundationDate,\n  getId,\n  getName\n} from '@logistics-calc/companies/src/domain/models/Company';\n\nconst styles = {\n  tableCellRisk: {\n    backgroundColor: ({ risk }) => {\n      if (!risk) {\n        return null;\n      }\n\n      return isHighRisk(risk) ? 'red' : 'green';\n    }\n  }\n};\n\nfunction CompaniesTableItem({ classes, company, onRecalculate, risk }) {\n  const companyId = getId(company);\n  return (\n    <TableRow>\n      <TableCell component=\"th\" scope=\"row\">\n        {getName(company)}\n      </TableCell>\n      <TableCell align=\"center\" classes={{ root: classes.tableCellRisk }}>\n        {risk ? `${getValue(risk)}%` : '-'}\n      </TableCell>\n      <TableCell align=\"center\">\n        {formatDate(getFoundationDate(company))}\n      </TableCell>\n      <TableCell align=\"right\">\n        <Tooltip title=\"Edit\">\n          <Link to={`/company/${getId(company)}`}>\n            <IconButton aria-label=\"Recalculate\">\n              <EditIcon fontSize=\"small\" />\n            </IconButton>\n          </Link>\n        </Tooltip>\n        <Tooltip title=\"Recalculate\">\n          <IconButton\n            aria-label=\"Recalculate\"\n            onClick={() => onRecalculate(companyId)}\n          >\n            <RefreshIcon fontSize=\"small\" />\n          </IconButton>\n        </Tooltip>\n      </TableCell>\n    </TableRow>\n  );\n}\n\nexport default withStyles(styles)(CompaniesTableItem);\n","import { getValue } from '../models/Risk';\n/**\n * @param {Risk} risk\n * @returns {boolean}\n */\n\nexport default function isHighRisk(risk) {\n  return getValue(risk) > 50;\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles/index';\nimport Table from '@material-ui/core/Table/index';\nimport TableBody from '@material-ui/core/TableBody/index';\nimport TableCell from '@material-ui/core/TableCell/index';\nimport TableHead from '@material-ui/core/TableHead/index';\nimport TableRow from '@material-ui/core/TableRow/index';\nimport Fab from '@material-ui/core/Fab/index';\nimport Paper from '@material-ui/core/Paper/index';\nimport AddIcon from '@material-ui/icons/Add';\n\nimport { getId } from '@logistics-calc/companies/src/domain/models/Company';\n\nimport { getByCompanyId } from '@logistics-calc/risks/src/domain/models/RisksCollection';\n\nimport { COMPANY_SHAPE } from '../constants';\nimport CompaniesTableItem from './CompaniesTableItem';\n\nconst styles = theme => ({\n  root: {\n    width: '100%',\n    overflowX: 'auto'\n  },\n  table: {\n    minWidth: 700\n  },\n  fab: {\n    position: 'absolute',\n    bottom: theme.spacing.unit * 4,\n    right: theme.spacing.unit * 4\n  }\n});\n\nfunction CompaniesTable(props) {\n  const { classes, companies, onAddButtonClick, onRecalculate, risks } = props;\n\n  return (\n    <Paper className={classes.root}>\n      <Table className={classes.table}>\n        <TableHead>\n          <TableRow>\n            <TableCell>Company name</TableCell>\n            <TableCell align=\"center\">Risk</TableCell>\n            <TableCell align=\"center\">Foundation date</TableCell>\n            <TableCell />\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {companies.map(company => {\n            const companyId = getId(company);\n            return (\n              <CompaniesTableItem\n                company={company}\n                key={companyId}\n                onRecalculate={onRecalculate}\n                risk={getByCompanyId(companyId, risks)}\n              />\n            );\n          })}\n        </TableBody>\n      </Table>\n      <Fab className={classes.fab} color=\"primary\" onClick={onAddButtonClick}>\n        <AddIcon />\n      </Fab>\n    </Paper>\n  );\n}\n\nCompaniesTable.propTypes = {\n  classes: PropTypes.object.isRequired,\n  companies: PropTypes.arrayOf(COMPANY_SHAPE),\n  onAddButtonClick: PropTypes.func,\n  onRecalculate: PropTypes.func,\n  risks: PropTypes.array\n};\n\nCompaniesTable.defaultProps = {\n  companies: [],\n  risks: []\n};\n\nexport default withStyles(styles)(CompaniesTable);\n","import { createContext } from 'react';\n\n\nconst AppContext = createContext({\n  services: {},\n});\n\nexport default AppContext;\n","import React, { useContext, useEffect, useState } from 'react';\n\nimport lensProp from 'ramda/es/lensProp';\nimport view from 'ramda/es/view';\nimport map from 'ramda/es/map';\nimport pipe from 'ramda/es/pipe';\n\nimport PageWithAppBar from '../../PageWithAppBar';\n\nimport CompaniesTable from './table/CompaniesTable';\nimport AppMenu from '../../menu/ui/AppMenu';\nimport AppContext from '../../AppContext';\n\nconst getRows = view(lensProp('rows'));\nconst mapDocs = map(view(lensProp('doc')));\nconst selectDocumentsList = pipe(\n  getRows,\n  mapDocs\n);\n\nfunction CompaniesTablePage({ history }) {\n  const [state, setState] = useState({\n    companies: [],\n    isLoading: false,\n    risks: []\n  });\n  const {\n    services: { companies: companiesService, risks: risksService }\n  } = useContext(AppContext);\n\n  const fetchCompanies = async () => {\n    setState({ isLoading: true });\n    const response = await companiesService.getCompanies();\n    setState({\n      companies: selectDocumentsList(response),\n      isLoading: false\n    });\n  };\n\n  const fetchRisks = async () => {\n    const response = await risksService.getList();\n    setState(state => ({ ...state, risks: selectDocumentsList(response) }));\n  };\n\n  useEffect(() => {\n    fetchCompanies();\n    risksService.subscribe(() => {\n      fetchRisks();\n    });\n    fetchRisks();\n    return () => {\n      risksService.unsubscribe();\n    };\n  }, []);\n\n  const onAddButtonClick = () => {\n    history.push({ pathname: '/company/' });\n  };\n\n  const onRecalculate = categoryId => {\n    risksService.calculate(categoryId);\n  };\n\n  return (\n    <AppMenu>\n      <PageWithAppBar isLoading={state.isLoading}>\n        <CompaniesTable\n          companies={state.companies}\n          onAddButtonClick={onAddButtonClick}\n          onRecalculate={onRecalculate}\n          risks={state.risks}\n        />\n      </PageWithAppBar>\n    </AppMenu>\n  );\n}\n\nexport default CompaniesTablePage;\n","import React from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Grid from \"@material-ui/core/Grid\";\nimport withStyles from \"@material-ui/core/styles/withStyles\";\n\nimport PageWithAppBar from \"./PageWithAppBar\";\n\n\nconst styles = ({ spacing }) => ({\n  gridContainer: {\n    justifyContent: 'center',\n    paddingTop: spacing.unit * 4,\n  },\n  formContainer: {\n    flex: 1,\n    maxWidth: '360px',\n  },\n});\n\nfunction FormPage({ children, classes, isLoading, title, ...restProps }) {\n  return (\n    <PageWithAppBar\n      {...restProps}\n      classes={{ gridContainer: classes.gridContainer }}\n      isLoading={isLoading}\n    >\n      <Grid\n        className={classes.formContainer}\n        container\n        direction=\"column\"\n        spacing={40}\n      >\n        <Grid\n          component={Typography}\n          item\n          variant=\"title\"\n        >\n          {title}\n        </Grid>\n        <Grid item>\n          {isLoading ? null : children}\n        </Grid>\n      </Grid>\n    </PageWithAppBar>\n  );\n}\n\nexport default withStyles(styles)(FormPage);\n","import isValid from 'date-fns/is_valid';\n\nexport const required = (value) => Boolean(value) ? undefined : 'Value is required';\nexport const isDataValid = (value) => isValid(new Date(value)) ? undefined : 'Date should be in format MM/DD/YYYY';\n","import React, { useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport { Form, Field } from 'react-final-form';\n\nimport Grid from '@material-ui/core/Grid';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\n\nimport formatDate from '@logistics-calc/date-utils/src/formatDate';\nimport { getFoundationDate } from '@logistics-calc/companies/src/domain/models/Company';\n\nimport { required, isDataValid } from '../../../form/ui/validators';\n\nimport { COMPANY_SHAPE } from '../constants';\n\nexport default function CompanyForm({ company, onReset, onSubmit }) {\n  const onSubmitAdapter = values => {\n    onSubmit({\n      ...values,\n      foundationDate: new Date(values.foundationDate),\n      charterCapital: Number(values.charterCapital)\n    });\n  };\n\n  const formattedCompany = useMemo(() => {\n    if (!company) {\n      return company;\n    }\n\n    return {\n      ...company,\n      foundationDate: formatDate(getFoundationDate(company))\n    };\n  }, [company]);\n\n  return (\n    <Form initialValues={formattedCompany} onSubmit={onSubmitAdapter}>\n      {({ handleSubmit, submitting }) => (\n        <Grid\n          component=\"form\"\n          container\n          direction=\"column\"\n          onReset={onReset}\n          onSubmit={handleSubmit}\n          spacing={40}\n        >\n          <Grid item>\n            <Field name=\"name\" validate={required}>\n              {({ input, meta: { error, touched } }) => (\n                <TextField\n                  {...input}\n                  autoFocus\n                  error={touched && Boolean(error)}\n                  fullWidth\n                  helperText={touched && error}\n                  label=\"Name\"\n                />\n              )}\n            </Field>\n          </Grid>\n          <Grid item>\n            <Field\n              name=\"foundationDate\"\n              validate={value => required(value) || isDataValid(value)}\n            >\n              {({ input, meta: { error, touched } }) => (\n                <TextField\n                  {...input}\n                  error={touched && Boolean(error)}\n                  fullWidth\n                  helperText={touched && error}\n                  label=\"Foundation date\"\n                  placeholder=\"2/25/2012\"\n                />\n              )}\n            </Field>\n          </Grid>\n          <Grid item>\n            <Field name=\"charterCapital\" validate={required}>\n              {({ input, meta: { error, touched } }) => (\n                <TextField\n                  {...input}\n                  error={touched && Boolean(error)}\n                  fullWidth\n                  helperText={touched && error}\n                  label=\"Charter capital\"\n                  type=\"number\"\n                />\n              )}\n            </Field>\n          </Grid>\n          <Grid item>\n            <Grid container justify=\"flex-end\" spacing={16}>\n              <Grid item>\n                <Button type=\"reset\">Cancel</Button>\n              </Grid>\n              <Grid item>\n                <Button\n                  color=\"primary\"\n                  disabled={submitting}\n                  type=\"submit\"\n                  variant=\"contained\"\n                >\n                  Submit\n                </Button>\n              </Grid>\n            </Grid>\n          </Grid>\n        </Grid>\n      )}\n    </Form>\n  );\n}\n\nCompanyForm.propTypes = {\n  company: COMPANY_SHAPE,\n  onReset: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired\n};\n","import React, { useContext, useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport SimpleAppBar from \"../../SimpleAppBar\";\n\nimport AppMenu from \"../../menu/ui/AppMenu\";\nimport FormPage from \"../../FormPage\";\nimport CompanyForm from \"./form/CompanyForm\";\nimport AppContext from \"../../AppContext\";\n\n\nfunction EditCompanyPage({ match, history }) {\n  const [state, setState] = useState({\n    company: null,\n    isLoading: true\n  });\n  const { services: { companies: companiesService } } = useContext(AppContext);\n\n  const companyId = match.params.id;\n  const { company, isLoading } = state;\n\n  const companyName = isLoading ? '' : company.name;\n\n  const fetchCompany = async () => {\n    setState(state => ({ ...state, isLoading: true }));\n    try {\n      const result = await companiesService.getCompanyById(companyId);\n      setState(state => ({\n        ...state,\n        company: result\n      }));\n    } finally {\n      setState(state => ({\n        ...state,\n        isLoading: false\n      }));\n    }\n  };\n\n  useEffect(() => {\n    fetchCompany();\n  }, []);\n\n  const appBar = (\n    <SimpleAppBar\n      title={isLoading ? \"Please wait...\" : companyName}\n    />\n  );\n\n  const onReset = (e) => {\n    e.preventDefault();\n    history.replace({ pathname: '/' });\n  };\n\n  const onSubmit = async (values) => {\n    await companiesService.editCompany(company, values);\n    history.replace({ pathname: '/' });\n  };\n\n  return (\n    <AppMenu>\n      <FormPage\n        appBar={appBar}\n        isLoading={state.isLoading}\n        title={`Edit ${companyName}`}\n      >\n        <CompanyForm\n          company={company}\n          onReset={onReset}\n          onSubmit={onSubmit}\n        />\n      </FormPage>\n    </AppMenu>\n  );\n}\n\nEditCompanyPage.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string.isRequired\n    }).isRequired\n  }).isRequired,\n  history: PropTypes.shape({\n    goBack: PropTypes.func,\n  }).isRequired,\n};\n\nexport default EditCompanyPage;\n","import React, { useContext } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport SimpleAppBar from \"../../SimpleAppBar\";\n\nimport AppMenu from \"../../menu/ui/AppMenu\";\nimport FormPage from \"../../FormPage\";\nimport CompanyForm from \"./form/CompanyForm\";\nimport AppContext from \"../../AppContext\";\n\n\nfunction CreateCompanyPage({ history }) {\n  const { services: { companies } } = useContext(AppContext);\n\n  const appBar = (\n    <SimpleAppBar\n      title=\"Create new company\"\n    />\n  );\n\n  const onReset = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    history.replace('/');\n  };\n\n  const onSubmit = async (values) => {\n    await companies.createCompany(values);\n    history.replace('/');\n  };\n\n  return (\n    <AppMenu>\n      <FormPage\n        appBar={appBar}\n        title={`Create new company`}\n      >\n        <CompanyForm\n          onReset={onReset}\n          onSubmit={onSubmit}\n        />\n      </FormPage>\n    </AppMenu>\n  );\n}\n\nCreateCompanyPage.propTypes = {\n  history: PropTypes.shape({\n    goBack: PropTypes.func,\n  }).isRequired,\n};\n\nexport default CreateCompanyPage;\n","import _regeneratorRuntime from \"/Users/dzianis_roi/Projects/logistics-risks-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/dzianis_roi/Projects/logistics-risks-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport PouchDb from 'pouchdb';\n\nvar CompaniesStore = function CompaniesStore(_ref) {\n  var dbUrl = _ref.dbUrl;\n  var db = new PouchDb(\"\".concat(dbUrl, \"/companies\"));\n  return {\n    getList: function getList() {\n      return db.allDocs({\n        include_docs: true\n      });\n    },\n    getById: function () {\n      var _getById = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(id) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", db.get(id));\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getById(_x) {\n        return _getById.apply(this, arguments);\n      }\n\n      return getById;\n    }(),\n    saveItem: function () {\n      var _saveItem = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(item) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                return _context2.abrupt(\"return\", db.post(item));\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function saveItem(_x2) {\n        return _saveItem.apply(this, arguments);\n      }\n\n      return saveItem;\n    }(),\n    updateItem: function () {\n      var _updateItem = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(item) {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                return _context3.abrupt(\"return\", db.put(item));\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function updateItem(_x3) {\n        return _updateItem.apply(this, arguments);\n      }\n\n      return updateItem;\n    }()\n  };\n};\n\nexport default CompaniesStore;","import { create, update } from \"../models/Company\";\n\nvar CompaniesService = function CompaniesService(_ref) {\n  var companiesStore = _ref.companiesStore;\n  return {\n    createCompany: function createCompany(data) {\n      var company = create(data);\n      return companiesStore.saveItem(company);\n    },\n    editCompany: function editCompany(company, data) {\n      var updatedCompany = update(data, company);\n      return companiesStore.updateItem(updatedCompany);\n    },\n    getCompanies: function getCompanies() {\n      return companiesStore.getList();\n    },\n    getCompanyById: function getCompanyById(id) {\n      return companiesStore.getById(id);\n    }\n  };\n};\n\nexport default CompaniesService;","export default class UserNotFoundError extends Error {\n  constructor(login) {\n    super(`User \"${login}\" doesn't exist`);\n  }\n}\n","export default class IncorrectPasswordError extends Error {\n  constructor() {\n    super(`Invalid password`);\n  }\n}\n","import UserNotFoundError from '../errors/UserNotFoundError';\nimport IncorrectPasswordError from \"../errors/IncorrectPasswordError\";\n\nfunction authenticate(values) {\n  return new Promise((resolve, reject) => {\n    const { login, password } = values;\n\n    if (login !== \"admin\") {\n      reject(new UserNotFoundError(login));\n      return;\n    } else if (password !== \"admin\") {\n      reject(new IncorrectPasswordError());\n      return;\n    }\n\n    localStorage.setItem('isAuthenticated', 'true');\n\n    resolve();\n  });\n}\n\nexport default authenticate;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Form, Field } from \"react-final-form\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { required } from '../../../form/ui/validators';\n\n\nfunction LoginForm({ className, onSubmit }) {\n  return (\n    <Form onSubmit={onSubmit}>\n      {({ handleSubmit, submitError, submitting }) => (\n        <Grid\n          alignContent=\"center\"\n          className={className}\n          component=\"form\"\n          container\n          onSubmit={handleSubmit}\n          spacing={40}\n        >\n          {submitError ? (\n            <Grid\n              color=\"error\"\n              component={Typography}\n              item\n              xs={12}\n            >\n              {submitError}\n            </Grid>\n          ) : null}\n\n          <Grid item xs={12}>\n            <Field\n              name=\"login\"\n              validate={required}\n            >\n              {({ input, meta: { error, touched, submitError } }) => (\n                <TextField\n                  {...input}\n                  autoFocus\n                  error={touched && Boolean(error || submitError)}\n                  fullWidth\n                  helperText={touched && (error || submitError)}\n                  placeholder=\"Login\"\n                />\n              )}\n            </Field>\n          </Grid>\n\n          <Grid item xs={12}>\n            <Field\n              name=\"password\"\n              validate={required}\n            >\n              {({ input, meta: { error, touched } }) => (\n                <TextField\n                  {...input}\n                  error={touched && Boolean(error)}\n                  fullWidth\n                  helperText={touched && error}\n                  placeholder=\"Password\"\n                  type=\"password\"\n                />\n              )}\n            </Field>\n          </Grid>\n\n          <Grid item xs={12}>\n            <Button\n              color=\"primary\"\n              disabled={submitting}\n              fullWidth\n              type=\"submit\"\n              variant=\"contained\"\n            >\n              Submit\n            </Button>\n          </Grid>\n        </Grid>\n      )}\n    </Form>\n  );\n}\n\nLoginForm.propTypes = {\n  className: PropTypes.string,\n  onSubmit: PropTypes.func.isRequired\n};\n\nLoginForm.defaultProps = {\n  className: \"\"\n};\n\nexport default LoginForm;\n","import React from \"react\";\nimport withStyles from \"@material-ui/core/styles/withStyles\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { FORM_ERROR } from \"final-form\";\n\nimport Page from '../../Page';\n\nimport authenticate from '../domain/services/authenticate';\n\nimport LoginForm from './form/LoginForm';\nimport UserNotFoundError from \"../domain/errors/UserNotFoundError\";\nimport IncorrectPasswordError from \"../domain/errors/IncorrectPasswordError\";\n\n\nconst styles = (theme) => ({\n  root: {\n    paddingTop: theme.spacing.unit * 8,\n  },\n  form: {\n    margin: `${theme.spacing.unit * 8}px auto`,\n    maxWidth: '360px',\n  }\n});\n\nfunction LoginPage({ classes, history }) {\n  const onSubmit = async (values) => {\n    try {\n      await authenticate(values);\n      history.replace({ pathname: '/' });\n    } catch(e) {\n      if (e instanceof UserNotFoundError) {\n        return { login: e.message };\n      } else if (e instanceof IncorrectPasswordError) {\n        return { [FORM_ERROR]: 'Incorrect credentials' };\n      }\n\n      throw e;\n    }\n  };\n\n  return (\n    <Page classes={{ root: classes.root }}>\n      <Typography\n        align=\"center\"\n        paragraph={false}\n        variant=\"title\"\n      >\n        Welcome\n      </Typography>\n\n      <Typography\n        align=\"center\"\n        color=\"textSecondary\"\n      >\n        to\n      </Typography>\n\n      <Typography\n        align=\"center\"\n        color=\"primary\"\n        variant=\"headline\"\n      >\n        Logistics Risks Calculator\n      </Typography>\n\n      <LoginForm\n        className={classes.form}\n        onSubmit={onSubmit}\n      />\n    </Page>\n  );\n}\n\nexport default withStyles(styles)(LoginPage);\n","function isAuthenticated() {\n  return localStorage.getItem('isAuthenticated') === 'true';\n}\n\nexport default isAuthenticated;\n","import React from 'react';\nimport { Redirect } from 'react-router-dom';\n\nimport isAuthenticated from \"../domain/services/isAuthenticated\";\n\nfunction SecureRoute({ children }) {\n  if (!isAuthenticated()) {\n    return (\n      <Redirect\n        to={{\n          pathname: '/login',\n        }}\n      />\n    )\n  }\n\n  return children;\n}\n\nexport default SecureRoute;\n","import React from 'react';\nimport { HashRouter as Router, Route, Switch } from 'react-router-dom';\n\nimport RisksStore from '@logistics-calc/risks/src/domain/data/RisksStore';\nimport RisksService from '@logistics-calc/risks/src/domain/services/RisksService';\n\nimport CompaniesTablePage from './companies/ui/CompaniesTablePage';\nimport EditCompanyPage from './companies/ui/EditCompanyPage';\nimport CreateCompanyPage from './companies/ui/CreateCompanyPage';\nimport CompaniesStore from '@logistics-calc/companies/src/domain/data/CompaniesStore';\nimport CompaniesService from '@logistics-calc/companies/src/domain/services/CompaniesService';\nimport LoginPage from './auth/ui/LoginPage';\nimport SecureRoute from './auth/ui/SecureRoute';\nimport AppContext from './AppContext';\n\nimport './App.css';\n\nconst dbUrl =\n  'https://609ce380-698c-48ed-a70f-6eefc8446f54-bluemix:ee5cf67260942c15b000fceeede84f7762628d5fbdf85a83d26bf4225656e333@609ce380-698c-48ed-a70f-6eefc8446f54-bluemix.cloudantnosqldb.appdomain.cloud';\n\nconst companiesStore = CompaniesStore({ dbUrl });\nconst companiesService = CompaniesService({ companiesStore });\nconst risksStore = RisksStore({ dbUrl });\nconst risksService = RisksService({ risksStore });\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <AppContext.Provider\n        value={{\n          services: { companies: companiesService, risks: risksService }\n        }}\n      >\n        <Router>\n          <Switch>\n            <Route path=\"/login\" component={LoginPage} />\n\n            <SecureRoute>\n              <Route exact path=\"/\" component={CompaniesTablePage} />\n              <Route exact path=\"/company/\" component={CreateCompanyPage} />\n              <Route path=\"/company/:id\" component={EditCompanyPage} />\n            </SecureRoute>\n          </Switch>\n        </Router>\n      </AppContext.Provider>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}