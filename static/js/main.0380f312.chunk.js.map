{"version":3,"sources":["../packages/risks/src/domain/data/RisksStore.js","../packages/date-utils/src/toISOString.js","../packages/risks/src/domain/models/Risk.js","../packages/risks/src/domain/services/RisksService.js","auth/domain/services/logout.js","menu/ui/AppMenuContext.js","menu/ui/AppMenu.js","SimpleAppBar.js","Page.js","PageWithAppBar.js","../packages/companies/src/domain/models/Company.js","../packages/risks/src/domain/models/RisksCollection.js","priveleges/Permit.js","companies/ui/constants.js","../packages/date-utils/src/formatDate.js","companies/ui/table/CompaniesTableItem.js","../packages/risks/src/domain/services/isHighRisk.js","companies/ui/table/CompaniesTable.js","AppContext.js","companies/ui/CompaniesTablePage.js","FormPage.js","../packages/companies/src/domain/models/Payment.js","form/ui/validators.js","companies/ui/payment-history/PaymentHistory.js","companies/ui/payment-form/PaymentForm.js","companies/ui/form/CompanyForm.js","companies/ui/EditCompanyPage.js","companies/ui/CreateCompanyPage.js","../packages/companies/src/domain/data/CompaniesStore.js","../packages/companies/src/domain/services/CompaniesService.js","auth/domain/errors/UserNotFoundError.js","auth/domain/errors/IncorrectPasswordError.js","auth/domain/services/authenticate.js","auth/ui/form/LoginForm.js","auth/ui/LoginPage.js","auth/domain/services/isAuthenticated.js","auth/ui/SecureRoute.js","App.js","serviceWorker.js","index.js"],"names":["index_browser_es","plugin","lib_index_browser_es","data_RisksStore","_ref","dbUrl","db","concat","getList","allDocs","include_docs","getByCompanyId","_getByCompanyId","Object","asyncToGenerator","regenerator_default","a","mark","_callee","companyId","getFirstResult","wrap","_context","prev","next","pipe","view","lensProp","head","abrupt","find","selector","then","stop","_x","apply","this","arguments","saveItem","_saveItem","_callee2","item","_context2","post","_x2","updateItem","_updateItem","_callee3","_context3","put","_x3","toISOString","date","Risk_create","value","createdDate","Date","lastUpdatedDate","Risk_update","_ref2","risk","objectSpread","getCompanyId","getValue","modelUrl","services_RisksService","listener","risksStore","calculate","_calculate","model","xs","ys","tf_esm","sent","t0","add","dense","units","inputShape","compile","loss","optimizer","fit","epochs","save","min","max","Math","ceil","floor","random","subscribe","l","unsubscribe","logout","localStorage","removeItem","AppMenuContext","createContext","openMenu","AppMenu","classes","children","history","_useState","useState","_useState2","slicedToArray","isOpened","setIsOpened","react_default","createElement","ui_AppMenuContext","Provider","Drawer_default","open","onClose","List_default","className","list","ListItem_default","button","onClick","replace","pathname","defaultProps","withRouter","withStyles","width","SimpleAppBar","props","title","useContext","Fragment","AppBar_default","position","Toolbar_default","IconButton_default","menuButton","color","aria-label","Menu_default","Typography_default","variant","ui_AppMenu","theme","flexGrow","marginLeft","marginRight","buttonIconLeft","spacing","unit","root","display","flexFlow","height","classnames","PageWithAppBar","appBar","isLoading","src_Page","gridContainer","CircularProgress_default","progress","src_SimpleAppBar","maxHeight","overflow","alignSelf","margin","Company_getId","getName","getFoundationDate","getPaymentHistory","defaultTo","RisksCollection_getByCompanyId","risks","Permit","getItem","PropTypes","shape","charterCapital","number","isRequired","_id","string","name","lastUpdated","instanceOf","foundationDate","formatDate","format_default","styles","tableCellRisk","backgroundColor","isHighRisk","company","onRecalculate","getId","TableRow_default","TableCell_default","component","scope","align","Tooltip_default","react_router_dom","to","Edit_default","fontSize","Refresh_default","CompaniesTable","companies","onAddButtonClick","Paper_default","Table_default","table","TableHead_default","TableBody_default","map","table_CompaniesTableItem","key","Fab_default","fab","Add_default","overflowX","minWidth","bottom","right","AppContext","services","getRows","mapDocs","selectDocumentsList","CompaniesTablePage","state","setState","_useContext$services","companiesService","risksService","fetchCompanies","response","getCompanies","fetchRisks","_ref3","useEffect","src_PageWithAppBar","table_CompaniesTable","push","categoryId","justifyContent","paddingTop","formContainer","flex","maxWidth","restProps","objectWithoutProperties","assign","Grid_default","container","direction","Typography","Payment_create","construct","amount","description","cuid_default","Payment_getId","getDate","getAmount","getDescription","required","Boolean","undefined","isDataValid","isValid","isNumber","Number","isInteger","parseInt","PaymentHistory","paymentHistory","Table_Table","TableHead_TableHead","TableRow_TableRow","TableCell_TableCell","TableBody_TableBody","row","PaymentForm","onSubmit","react_final_form_es","handleSubmit","submitting","alignItems","validate","either","input","_ref3$meta","meta","error","touched","TextField_default","fullWidth","helperText","label","placeholder","_ref4","_ref4$meta","_ref5","_ref5$meta","disabled","CompanyForm","onReset","formattedCompany","useMemo","initialValues","values","autoFocus","type","_ref6","_ref6$input","onChange","Typography_Typography_default","payment","createPayment","append","justify","Button_default","EditCompanyPage","match","params","id","companyName","fetchCompany","result","getCompanyById","finish","editCompany","src_FormPage","e","preventDefault","CreateCompanyPage","createCompany","stopPropagation","data_CompaniesStore","getById","_getById","get","services_CompaniesService","companiesStore","data","Company_create","updatedCompany","Company_update","UserNotFoundError","login","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","Error","IncorrectPasswordError","authenticate","Promise","resolve","reject","password","setItem","LoginForm","submitError","alignContent","form","message","defineProperty","FORM_ERROR","paragraph","form_LoginForm","isAuthenticated","SecureRoute","react_router","CompaniesService","CompaniesStore","RisksService","RisksStore","App","src_AppContext","path","LoginPage","ui_SecureRoute","exact","window","location","hostname","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"6dAQAA,EAAA,EAAOC,OAAQC,EAAA,GAEf,IA0FeC,EA1FD,SAAAC,GACd,IAAAC,EAAAD,EAAAC,MACAC,EAAA,IAAeN,EAAA,EAAO,GAAAO,OAAAF,EAAA,WACtB,OACAG,QAAA,WACA,OAAAF,EAAAG,QAAA,CACAC,cAAA,KAGAC,eAAA,WACA,IAAAC,EAA4BC,OAAAC,EAAA,EAAAD,CAEtBE,EAAAC,EAAmBC,KAAA,SAAAC,EAAAC,GACzB,IAAAC,EACA,OAAeL,EAAAC,EAAmBK,KAAA,SAAAC,GAClC,OACA,OAAAA,EAAAC,KAAAD,EAAAE,MACA,OAEA,OADAJ,EAAiCP,OAAAY,EAAA,EAAAZ,CAAKA,OAAAa,EAAA,EAAAb,CAAKA,OAAAc,EAAA,EAAAd,CAAQ,SAAWe,EAAA,GAC9DN,EAAAO,OAAA,SAAAvB,EAAAwB,KAAA,CACAC,SAAA,CACAZ,eAEiBa,KAAAZ,IAEjB,OACA,UACA,OAAAE,EAAAW,SAGSf,MAOT,OAJA,SAAAgB,GACA,OAAAtB,EAAAuB,MAAAC,KAAAC,YAzBA,GA8BAC,SAAA,WACA,IAAAC,EAAsB1B,OAAAC,EAAA,EAAAD,CAEhBE,EAAAC,EAAmBC,KAAA,SAAAuB,EAAAC,GACzB,OAAe1B,EAAAC,EAAmBK,KAAA,SAAAqB,GAClC,OACA,OAAAA,EAAAnB,KAAAmB,EAAAlB,MACA,OACA,OAAAkB,EAAAb,OAAA,SAAAvB,EAAAqC,KAAAF,IAEA,OACA,UACA,OAAAC,EAAAT,SAGSO,MAOT,OAJA,SAAAI,GACA,OAAAL,EAAAJ,MAAAC,KAAAC,YAnBA,GAwBAQ,WAAA,WACA,IAAAC,EAAwBjC,OAAAC,EAAA,EAAAD,CAElBE,EAAAC,EAAmBC,KAAA,SAAA8B,EAAAN,GACzB,OAAe1B,EAAAC,EAAmBK,KAAA,SAAA2B,GAClC,OACA,OAAAA,EAAAzB,KAAAyB,EAAAxB,MACA,OACA,OAAAwB,EAAAnB,OAAA,SAAAvB,EAAA2C,IAAAR,IAEA,OACA,UACA,OAAAO,EAAAf,SAGSc,MAOT,OAJA,SAAAG,GACA,OAAAJ,EAAAX,MAAAC,KAAAC,YAnBA,qBCzEe,SAAAc,EAAAC,GACf,OAAAA,EAAAD,cCGO,IAAIE,EAAM,SAAAjD,GACjB,IAAAe,EAAAf,EAAAe,UAEA,OACAmC,MAFAlD,EAAAkD,MAGAnC,YACAoC,YAAiBJ,EAAW,IAAAK,MAC5BC,gBAAA,OAGWC,EAAM,SAAAC,EAAAC,GACjB,IAAAN,EAAAK,EAAAL,MACA,OAASzC,OAAAgD,EAAA,EAAAhD,CAAa,GAAG+C,EAAA,CACzBN,QACAG,gBAAqBN,EAAW,IAAAK,SAIzBM,GADYjD,OAAAa,EAAA,EAAAb,CAAKA,OAAAc,EAAA,EAAAd,CAAQ,QACNA,OAAAa,EAAA,EAAAb,CAAKA,OAAAc,EAAA,EAAAd,CAAQ,eAChCkD,EAAelD,OAAAa,EAAA,EAAAb,CAAKA,OAAAc,EAAA,EAAAd,CAAQ,UCnBnCmD,EAAA,uCAiHeC,EAzGC,SAAA7D,GAChB,IACA8D,EADAC,EAAA/D,EAAA+D,WAEA,OACAC,UAAA,WACA,IAAAC,EAAuBxD,OAAAC,EAAA,EAAAD,CAEjBE,EAAAC,EAAmBC,KAAA,SAAAC,EAAAC,GACzB,IAAAmD,EAAAC,EAAAC,EAAAZ,EAAAN,EACA,OAAevC,EAAAC,EAAmBK,KAAA,SAAAC,GAClC,OACA,OAAAA,EAAAC,KAAAD,EAAAE,MACA,OAGA,OAFAF,EAAAC,KAAA,EACAD,EAAAE,KAAA,EACuBiD,EAAA,EAAkBT,GAEzC,OACAM,EAAAhD,EAAAoD,KACApD,EAAAE,KAAA,GACA,MAEA,OAeA,OAdAF,EAAAC,KAAA,EACAD,EAAAqD,GAAArD,EAAA,UACAgD,EAAwBG,EAAA,KACxBG,IAA0BH,EAAA,EAASI,MAAA,CACnCC,MAAA,EACAC,WAAA,OAEAT,EAAAU,QAAA,CACAC,KAAA,mBACAC,UAAA,QAEAX,EAAqBE,EAAA,EAAW,yBAChCD,EAAqBC,EAAA,EAAW,yBAChCnD,EAAAE,KAAA,GACA8C,EAAAa,IAAAZ,EAAAC,EAAA,CACAY,OAAA,MAGA,QAEA,OADA9D,EAAAE,KAAA,GACA8C,EAAAe,KAAArB,GAEA,QAEA,OADA1C,EAAAE,KAAA,GACA2C,EAAAxD,eAAAQ,GAEA,QAIA,GAHAyC,EAAAtC,EAAAoD,KAxDAY,EAyDA,GAzDAC,EAyDA,IAxDAD,EAAAE,KAAAC,KAAAH,GACAC,EAAAC,KAAAE,MAAAH,GAuDAjC,EAtDAkC,KAAAE,MAAAF,KAAAG,UAAAJ,EAAAD,EAAA,IAAAA,GAwDA1B,EAAA,CACAtC,EAAAE,KAAA,GACA,MAIA,OADAF,EAAAE,KAAA,GACA2C,EAAAtB,WAA6Ca,EAAM,CACnDJ,SACiBM,IAEjB,QACAtC,EAAAE,KAAA,GACA,MAEA,QAEA,OADAF,EAAAE,KAAA,GACA2C,EAAA7B,SAA2Ce,EAAM,CACjDC,QACAnC,eAGA,QACA+C,GACAA,IAGA,QACA,UACA,OAAA5C,EAAAW,OAvFA,IAAAqD,EAAAC,GA0FSrE,EAAA,iBAOT,OAJA,SAAAgB,GACA,OAAAmC,EAAAlC,MAAAC,KAAAC,YApFA,GAyFA7B,QAAA,WACA,OAAA2D,EAAA3D,WAEAoF,UAAA,SAAAC,GACA3B,EAAA2B,GAEAC,YAAA,WACA5B,EAAA,iNC5Ge6B,MAJf,WACEC,aAAaC,WAAW,oBCGXC,EAFQC,wBAAc,CAAEC,SAAU,OCiBjD,SAASC,EAATjG,GAAiD,IAA9BkG,EAA8BlG,EAA9BkG,QAASC,EAAqBnG,EAArBmG,SAAUC,EAAWpG,EAAXoG,QAAWC,EACfC,oBAAS,GADMC,EAAA9F,OAAA+F,EAAA,EAAA/F,CAAA4F,EAAA,GACxCI,EADwCF,EAAA,GAC9BG,EAD8BH,EAAA,GAY/C,OACEI,EAAA/F,EAAAgG,cAACC,EAAeC,SAAhB,CACE5D,MAAO,CACL8C,SAZW,WACfU,GAAY,MAcVC,EAAA/F,EAAAgG,cAACG,EAAAnG,EAAD,CACEoG,KAAMP,EACNQ,QAAS,kBAAMP,GAAY,KAE3BC,EAAA/F,EAAAgG,cAACM,EAAAtG,EAAD,CAAMuG,UAAWjB,EAAQkB,MACvBT,EAAA/F,EAAAgG,cAACS,EAAAzG,EAAD,CAAU0G,QAAM,EAACC,QAhBH,WACpB5B,IACAS,EAAQoB,QAAQ,CAAEC,SAAU,aActB,YAKFtB,GAYRF,EAAQyB,aAAe,CACrBV,MAAM,GAGOW,mBAAWC,IAlDX,CACbR,KAAM,CACJS,MAAO,UAgDeD,CAAmB3B,ICvC7C,SAAS6B,GAAaC,GAAO,IACnB7B,EAAmB6B,EAAnB7B,QAAS8B,EAAUD,EAAVC,MACThC,EAAaiC,qBAAWnC,GAAxBE,SAER,OACEW,EAAA/F,EAAAgG,cAAAD,EAAA/F,EAAAsH,SAAA,KACEvB,EAAA/F,EAAAgG,cAACuB,EAAAvH,EAAD,CAAQwH,SAAS,UACfzB,EAAA/F,EAAAgG,cAACyB,EAAAzH,EAAD,KACE+F,EAAA/F,EAAAgG,cAAC0B,EAAA1H,EAAD,CACEuG,UAAWjB,EAAQqC,WACnBC,MAAM,UACNC,aAAW,OACXlB,QAASvB,GAETW,EAAA/F,EAAAgG,cAAC8B,EAAA9H,EAAD,OAEF+F,EAAA/F,EAAAgG,cAAC+B,EAAA/H,EAAD,CAAYgI,QAAQ,KAAKJ,MAAM,UAAUrB,UAAWjB,EAAQ8B,OACzDA,KAIPrB,EAAA/F,EAAAgG,cAACiC,GAAD,OAUNf,GAAaJ,aAAe,CAC1BM,MAAO,8BAGMJ,4BAhDA,SAAAkB,GAAK,MAAK,CACvBd,MAAO,CACLe,SAAU,GAEZR,WAAY,CACVS,YAAa,GACbC,YAAa,IAEfC,eAAgB,CACdD,YAAaH,EAAMK,QAAQC,QAuChBxB,CAAmBE,uBCzCnBF,4BAbA,CACbyB,KAAM,CACJC,QAAS,OACTC,SAAU,gBACVR,SAAU,EACVS,OAAQ,SAQG5B,CAJf,SAAA5H,GAAgD,IAAhCmH,EAAgCnH,EAAhCmH,UAAWjB,EAAqBlG,EAArBkG,QAASC,EAAYnG,EAAZmG,SAClC,OAAOQ,EAAA/F,EAAAgG,cAAA,OAAKO,UAAWsC,KAAWvD,EAAQmD,KAAMlC,IAAchB,KCQhE,SAASuD,GAAT1J,GAA6E,IAAnD2J,EAAmD3J,EAAnD2J,OAAQxC,EAA2CnH,EAA3CmH,UAAWjB,EAAgClG,EAAhCkG,QAASC,EAAuBnG,EAAvBmG,SAAUyD,EAAa5J,EAAb4J,UAC9D,OACEjD,EAAA/F,EAAAgG,cAACiD,GAAD,CAAM1C,UAAWA,GACbwC,EACFhD,EAAA/F,EAAAgG,cAAA,OAAKO,UAAWjB,EAAQ4D,eACrBF,EAAYjD,EAAA/F,EAAAgG,cAACmD,EAAAnJ,EAAD,CAAkBuG,UAAWjB,EAAQ8D,WAAc7D,IAcxEuD,GAAehC,aAAe,CAC5BiC,OAAQhD,EAAA/F,EAAAgG,cAACqD,GAAD,MACRL,WAAW,GAGEhC,4BAtCA,CACbkC,cAAe,CACbR,QAAS,OACTP,SAAU,EACVmB,UAAW,OACXC,SAAU,QAEZH,SAAU,CACRI,UAAW,SACXC,OAAQ,SA6BGzC,CAAmB8B,qLChBvBY,GAAQ7J,OAAAa,EAAA,EAAAb,CAAKA,OAAAc,EAAA,EAAAd,CAAQ,QACzB8J,GAAc9J,OAAAa,EAAA,EAAAb,CAAKA,OAAAc,EAAA,EAAAd,CAAQ,SAC3B+J,GAAwB/J,OAAAa,EAAA,EAAAb,CAAKA,OAAAc,EAAA,EAAAd,CAAQ,mBACrCgK,GAAwBhK,OAAAY,EAAA,EAAAZ,CAAKA,OAAAa,EAAA,EAAAb,CAAKA,OAAAc,EAAA,EAAAd,CAAQ,mBAAqBA,OAAAiK,GAAA,EAAAjK,CAAS,KCjCpEkK,GAAc,SAAA5J,EAAA6J,GACzB,OAAAA,EAAAlJ,KAAA,SAAA8B,GACA,OAAWE,EAAYF,KAAAzC,KCHR,SAAS8J,GAAT7K,GAA8B,IAAZmG,EAAYnG,EAAZmG,SAC/B,MAA2C,SAApCP,aAAakF,QAAQ,WAAwB3E,EAAW,gCCCpC4E,KAAUC,MAAM,CAC3CC,eAAgBF,KAAUG,OAAOC,WACjCC,IAAKL,KAAUM,OAAOF,WACtBG,KAAMP,KAAUM,OAAOF,WACvBI,YAAaR,KAAUS,WAAWpI,MAClCqI,eAAgBV,KAAUM,OAAOF,yGCNpB,SAAAO,GAAA1I,GACf,OAAS2I,KAAM3I,EAAA,cCqBf,IAAM4I,GAAS,CACbC,cAAe,CACbC,gBAAiB,SAAA9L,GAAc,IAAXwD,EAAWxD,EAAXwD,KAClB,OAAKA,ECpBI,SAAAA,GACf,OAASG,EAAQH,GAAA,GDuBJuI,CAAWvI,GAAQ,MAAQ,QAHzB,QA4CAoE,oBAAWgE,GAAXhE,CApCf,SAAArE,GAAuE,IAAzC2C,EAAyC3C,EAAzC2C,QAAS8F,EAAgCzI,EAAhCyI,QAASC,EAAuB1I,EAAvB0I,cAAezI,EAAQD,EAARC,KACvDzC,EAAYmL,GAAMF,GACxB,OACErF,EAAA/F,EAAAgG,cAACuF,GAAAvL,EAAD,KACE+F,EAAA/F,EAAAgG,cAACwF,GAAAxL,EAAD,CAAWyL,UAAU,KAAKC,MAAM,OAC7B/B,GAAQyB,IAEXrF,EAAA/F,EAAAgG,cAACwF,GAAAxL,EAAD,CAAW2L,MAAM,SAASrG,QAAS,CAAEmD,KAAMnD,EAAQ2F,gBAChDrI,EAAI,GAAArD,OAAMwD,EAASH,GAAf,KAA0B,KAEjCmD,EAAA/F,EAAAgG,cAACwF,GAAAxL,EAAD,CAAW2L,MAAM,UACdb,GAAWlB,GAAkBwB,KAEhCrF,EAAA/F,EAAAgG,cAACwF,GAAAxL,EAAD,CAAW2L,MAAM,SACf5F,EAAA/F,EAAAgG,cAAC4F,GAAA5L,EAAD,CAASoH,MAAM,QACbrB,EAAA/F,EAAAgG,cAAC6F,EAAA,EAAD,CAAMC,GAAE,YAAAvM,OAAc+L,GAAMF,KAC1BrF,EAAA/F,EAAAgG,cAAC0B,EAAA1H,EAAD,CAAY6H,aAAW,eACrB9B,EAAA/F,EAAAgG,cAAC+F,GAAA/L,EAAD,CAAUgM,SAAS,aAIzBjG,EAAA/F,EAAAgG,cAACiE,GAAD,KACElE,EAAA/F,EAAAgG,cAAC4F,GAAA5L,EAAD,CAASoH,MAAM,eACbrB,EAAA/F,EAAAgG,cAAC0B,EAAA1H,EAAD,CACE6H,aAAW,cACXlB,QAAS,kBAAM0E,EAAclL,KAE7B4F,EAAA/F,EAAAgG,cAACiG,GAAAjM,EAAD,CAAagM,SAAS,iBE1BpC,SAASE,GAAe/E,GAAO,IACrB7B,EAA+D6B,EAA/D7B,QAAS6G,EAAsDhF,EAAtDgF,UAAWC,EAA2CjF,EAA3CiF,iBAAkBf,EAAyBlE,EAAzBkE,cAAerB,EAAU7C,EAAV6C,MAE7D,OACEjE,EAAA/F,EAAAgG,cAACqG,GAAArM,EAAD,CAAOuG,UAAWjB,EAAQmD,MACxB1C,EAAA/F,EAAAgG,cAACsG,GAAAtM,EAAD,CAAOuG,UAAWjB,EAAQiH,OACxBxG,EAAA/F,EAAAgG,cAACwG,GAAAxM,EAAD,KACE+F,EAAA/F,EAAAgG,cAACuF,GAAAvL,EAAD,KACE+F,EAAA/F,EAAAgG,cAACwF,GAAAxL,EAAD,qBACA+F,EAAA/F,EAAAgG,cAACwF,GAAAxL,EAAD,CAAW2L,MAAM,UAAjB,QACA5F,EAAA/F,EAAAgG,cAACwF,GAAAxL,EAAD,CAAW2L,MAAM,UAAjB,mBACA5F,EAAA/F,EAAAgG,cAACwF,GAAAxL,EAAD,QAGJ+F,EAAA/F,EAAAgG,cAACyG,GAAAzM,EAAD,KACGmM,EAAUO,IAAI,SAAAtB,GACb,IAAMjL,EAAYmL,GAAMF,GACxB,OACErF,EAAA/F,EAAAgG,cAAC2G,GAAD,CACEvB,QAASA,EACTwB,IAAKzM,EACLkL,cAAeA,EACfzI,KAAMjD,GAAeQ,EAAW6J,SAM1CjE,EAAA/F,EAAAgG,cAACiE,GAAD,KACElE,EAAA/F,EAAAgG,cAAC6G,GAAA7M,EAAD,CAAKuG,UAAWjB,EAAQwH,IAAKlF,MAAM,UAAUjB,QAASyF,GACpDrG,EAAA/F,EAAAgG,cAAC+G,GAAA/M,EAAD,SAeVkM,GAAepF,aAAe,CAC5BqF,UAAW,GACXnC,MAAO,IAGMhD,4BAjEA,SAAAkB,GAAK,MAAK,CACvBO,KAAM,CACJxB,MAAO,OACP+F,UAAW,QAEbT,MAAO,CACLU,SAAU,KAEZH,IAAK,CACHtF,SAAU,WACV0F,OAA6B,EAArBhF,EAAMK,QAAQC,KACtB2E,MAA4B,EAArBjF,EAAMK,QAAQC,QAsDVxB,CAAmBkF,IC/EnBkB,GAJIjI,wBAAc,CAC/BkI,SAAU,KCSNC,GAAU5M,YAAKC,YAAS,SACxB4M,GAAUb,YAAIhM,YAAKC,YAAS,SAC5B6M,GAAsB/M,YAC1B6M,GACAC,IA4DaE,OAzDf,SAAArO,GAAyC,IAAXoG,EAAWpG,EAAXoG,QAAWC,EACbC,mBAAS,CACjCyG,UAAW,GACXnD,WAAW,EACXgB,MAAO,KAJ8BrE,EAAA9F,OAAA+F,EAAA,EAAA/F,CAAA4F,EAAA,GAChCiI,EADgC/H,EAAA,GACzBgI,EADyBhI,EAAA,GAAAiI,EAQnCvG,qBAAW+F,IADbC,SAAuBQ,EAPcD,EAOzBzB,UAAoC2B,EAPXF,EAOI5D,MAGrC+D,EAAc,eAAApL,EAAA9C,OAAAC,EAAA,EAAAD,CAAAE,EAAAC,EAAAC,KAAG,SAAAC,IAAA,IAAA8N,EAAA,OAAAjO,EAAAC,EAAAK,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACrBmN,EAAS,CAAE3E,WAAW,IADD1I,EAAAE,KAAA,EAEEqN,EAAiBI,eAFnB,OAEfD,EAFe1N,EAAAoD,KAGrBiK,EAAS,CACPxB,UAAWqB,GAAoBQ,GAC/BhF,WAAW,IALQ,wBAAA1I,EAAAW,SAAAf,MAAH,yBAAAyC,EAAAxB,MAAAC,KAAAC,YAAA,GASd6M,EAAU,eAAAC,EAAAtO,OAAAC,EAAA,EAAAD,CAAAE,EAAAC,EAAAC,KAAG,SAAAuB,IAAA,IAAAwM,EAAA,OAAAjO,EAAAC,EAAAK,KAAA,SAAAqB,GAAA,cAAAA,EAAAnB,KAAAmB,EAAAlB,MAAA,cAAAkB,EAAAlB,KAAA,EACMsN,EAAatO,UADnB,OACXwO,EADWtM,EAAAgC,KAEjBiK,EAAS,SAAAD,GAAK,OAAA7N,OAAAgD,EAAA,EAAAhD,CAAA,GAAU6N,EAAV,CAAiB1D,MAAOwD,GAAoBQ,OAFzC,wBAAAtM,EAAAT,SAAAO,MAAH,yBAAA2M,EAAAhN,MAAAC,KAAAC,YAAA,GAwBhB,OAnBA+M,oBAAU,WAMR,OALAL,IACAD,EAAalJ,UAAU,WACrBsJ,MAEFA,IACO,WACLJ,EAAahJ,gBAEd,IAWDiB,EAAA/F,EAAAgG,cAACiC,GAAD,KACElC,EAAA/F,EAAAgG,cAACqI,GAAD,CAAgBrF,UAAW0E,EAAM1E,WAC/BjD,EAAA/F,EAAAgG,cAACsI,GAAD,CACEnC,UAAWuB,EAAMvB,UACjBC,iBAbiB,WACvB5G,EAAQ+I,KAAK,CAAE1H,SAAU,eAanBwE,cAVc,SAAAmD,GACpBV,EAAa1K,UAAUoL,IAUjBxE,MAAO0D,EAAM1D,yCC7BRhD,WAlCA,SAAA5H,GAAA,MAAkB,CAC/B8J,cAAe,CACbuF,eAAgB,SAChBC,WAA2B,EAHhBtP,EAAGmJ,QAGMC,MAEtBmG,cAAe,CACbC,KAAM,EACNC,SAAU,WA2BC7H,CAvBf,SAAArE,GAAyE,IAArD4C,EAAqD5C,EAArD4C,SAAUD,EAA2C3C,EAA3C2C,QAAS0D,EAAkCrG,EAAlCqG,UAAW5B,EAAuBzE,EAAvByE,MAAU0H,EAAajP,OAAAkP,GAAA,EAAAlP,CAAA8C,EAAA,4CACvE,OACEoD,EAAA/F,EAAAgG,cAACqI,GAADxO,OAAAmP,OAAA,GACMF,EADN,CAEExJ,QAAS,CAAE4D,cAAe5D,EAAQ4D,eAClCF,UAAWA,IAEXjD,EAAA/F,EAAAgG,cAACiJ,GAAAjP,EAAD,CACEuG,UAAWjB,EAAQqJ,cACnBO,WAAS,EACTC,UAAU,SACV9O,KAAK,SACLkI,QAAS,IAETxC,EAAA/F,EAAAgG,cAACiJ,GAAAjP,EAAD,CAAMyL,UAAW2D,IAAY3N,MAAI,EAACuG,QAAQ,SACvCZ,GAEHrB,EAAA/F,EAAAgG,cAACiJ,GAAAjP,EAAD,CAAMyB,MAAI,GAAEuH,EAAY,KAAOzD,uHCjBhC,IAAI8J,GAASxP,OAAAyP,GAAA,EAAAzP,CAZpB,SAAAT,GACA,IAAAgD,EAAAhD,EAAAgD,KACAmN,EAAAnQ,EAAAmQ,OACAC,EAAApQ,EAAAoQ,YACA,OACAhF,IAASiF,OACTrN,KAAUD,EAAWC,GACrBmN,SACAC,iBAKWE,GAAQ7P,OAAAa,EAAA,EAAAb,CAAKA,OAAAc,EAAA,EAAAd,CAAQ,QACzB8P,GAAc9P,OAAAa,EAAA,EAAAb,CAAKA,OAAAc,EAAA,EAAAd,CAAQ,SAC3B+P,GAAgB/P,OAAAa,EAAA,EAAAb,CAAKA,OAAAc,EAAA,EAAAd,CAAQ,WAC7BgQ,GAAqBhQ,OAAAa,EAAA,EAAAb,CAAKA,OAAAc,EAAA,EAAAd,CAAQ,qCCpB5BiQ,GAAW,SAAAxN,GAAK,OAC3ByN,QAAQzN,QAAS0N,EAAY,qBAClBC,GAAc,SAAA3N,GAAK,OAC9B4N,KAAQ,IAAI1N,KAAKF,SAAU0N,EAAY,uCAC5BG,GAAW,SAAA7N,GAAK,OAC3B8N,OAAOC,UAAUC,SAAShO,SAAU0N,EAAY,uECWnC,SAASO,GAATnR,GAA4C,IAAlBoR,EAAkBpR,EAAlBoR,eACvC,OACEzK,EAAA/F,EAAAgG,cAACyK,GAAA,EAAD,KACE1K,EAAA/F,EAAAgG,cAAC0K,GAAA,EAAD,KACE3K,EAAA/F,EAAAgG,cAAC2K,GAAA,EAAD,KACE5K,EAAA/F,EAAAgG,cAAC4K,GAAA,EAAD,CAAWjF,MAAM,UAAjB,QACA5F,EAAA/F,EAAAgG,cAAC4K,GAAA,EAAD,CAAWjF,MAAM,UAAjB,UACA5F,EAAA/F,EAAAgG,cAAC4K,GAAA,EAAD,CAAWjF,MAAM,UAAjB,iBAGJ5F,EAAA/F,EAAAgG,cAAC6K,GAAA,EAAD,KACGnE,YACC,SAAAoE,GAAG,OACD/K,EAAA/F,EAAAgG,cAAC2K,GAAA,EAAD,CAAU/D,IAAKtB,GAAMwF,IACnB/K,EAAA/F,EAAAgG,cAAC4K,GAAA,EAAD,CAAWjF,MAAM,UAAUgE,GAAQmB,IACnC/K,EAAA/F,EAAAgG,cAAC4K,GAAA,EAAD,CAAWjF,MAAM,UAAUiE,GAAUkB,IACrC/K,EAAA/F,EAAAgG,cAAC4K,GAAA,EAAD,CAAWjF,MAAM,UAAUkE,GAAeiB,MAG9CN,KAWVD,GAAezJ,aAAe,CAC5B0J,eAAgB,kBCrCH,SAASO,GAAT3R,GAAmC,IAAZ4R,EAAY5R,EAAZ4R,SACpC,OACEjL,EAAA/F,EAAAgG,cAACiL,GAAA,EAAD,CAAMD,SAAUA,GACb,SAAArO,GAAA,IAAGuO,EAAHvO,EAAGuO,aAAcC,EAAjBxO,EAAiBwO,WAAjB,OACCpL,EAAA/F,EAAAgG,cAACiJ,GAAAjP,EAAD,CACEoR,WAAW,SACXlC,WAAS,EACTC,UAAU,MACV5G,QAAS,GACTlI,KAAK,UAEL0F,EAAA/F,EAAAgG,cAACiJ,GAAAjP,EAAD,CAAMyB,MAAI,GACRsE,EAAA/F,EAAAgG,cAACiL,GAAA,EAAD,CAAOvG,KAAK,OAAO2G,SAAUC,aAAOxB,GAAUG,KAC3C,SAAA9B,GAAA,IAAGoD,EAAHpD,EAAGoD,MAAHC,EAAArD,EAAUsD,KAAQC,EAAlBF,EAAkBE,MAAOC,EAAzBH,EAAyBG,QAAzB,OACC5L,EAAA/F,EAAAgG,cAAC4L,GAAA5R,EAADH,OAAAmP,OAAA,GACMuC,EADN,CAEEG,MAAOC,GAAW5B,QAAQ2B,GAC1BG,WAAS,EACTC,WAAYH,GAAWD,EACvBK,MAAM,OACNC,YAAY,kBAKpBjM,EAAA/F,EAAAgG,cAACiJ,GAAAjP,EAAD,CAAMyB,MAAI,GACRsE,EAAA/F,EAAAgG,cAACiL,GAAA,EAAD,CAAOvG,KAAK,SAAS2G,SAAUC,aAAOxB,GAAUK,KAC7C,SAAA8B,GAAA,IAAGV,EAAHU,EAAGV,MAAHW,EAAAD,EAAUR,KAAQC,EAAlBQ,EAAkBR,MAAOC,EAAzBO,EAAyBP,QAAzB,OACC5L,EAAA/F,EAAAgG,cAAC4L,GAAA5R,EAADH,OAAAmP,OAAA,GACMuC,EADN,CAEEG,MAAOC,GAAW5B,QAAQ2B,GAC1BG,WAAS,EACTC,WAAYH,GAAWD,EACvBK,MAAM,SACNC,YAAY,aAKpBjM,EAAA/F,EAAAgG,cAACiJ,GAAAjP,EAAD,CAAMyB,MAAI,GACRsE,EAAA/F,EAAAgG,cAACiL,GAAA,EAAD,CAAOvG,KAAK,cAAc2G,SAAUvB,IACjC,SAAAqC,GAAA,IAAGZ,EAAHY,EAAGZ,MAAHa,EAAAD,EAAUV,KAAQC,EAAlBU,EAAkBV,MAAOC,EAAzBS,EAAyBT,QAAzB,OACC5L,EAAA/F,EAAAgG,cAAC4L,GAAA5R,EAADH,OAAAmP,OAAA,GACMuC,EADN,CAEEG,MAAOC,GAAW5B,QAAQ2B,GAC1BG,WAAS,EACTC,WAAYH,GAAWD,EACvBK,MAAM,oBAKdhM,EAAA/F,EAAAgG,cAACiJ,GAAAjP,EAAD,CAAMyB,MAAI,GACRsE,EAAA/F,EAAAgG,cAAC0B,EAAA1H,EAAD,CACE4H,MAAM,UACNyK,SAAUlB,EACVxK,QAASuK,EACTlJ,QAAQ,YAERjC,EAAA/F,EAAAgG,cAAC+G,GAAA/M,EAAD,CAAKgM,SAAS,eC7Cb,SAASsG,GAATlT,GAAqD,IAA9BgM,EAA8BhM,EAA9BgM,QAASmH,EAAqBnT,EAArBmT,QAASvB,EAAY5R,EAAZ4R,SAShDwB,EAAmBC,kBAAQ,WAC/B,OAAKrH,EAIEvL,OAAAgD,EAAA,EAAAhD,CAAA,GACFuL,EADL,CAEEP,eAAgBC,GAAWlB,GAAkBwB,IAC7CoF,eAAgB3G,GAAkBuB,KAN3BA,GAQR,CAACA,IAEJ,OACErF,EAAA/F,EAAAgG,cAACiL,GAAA,EAAD,CAAMyB,cAAeF,EAAkBxB,SArBjB,SAAA2B,GACtB3B,EAASnR,OAAAgD,EAAA,EAAAhD,CAAA,GACJ8S,EADG,CAEN9H,eAAgB,IAAIrI,KAAKmQ,EAAO9H,gBAChCR,eAAgB+F,OAAOuC,EAAOtI,qBAkB7B,SAAA1H,GAAA,IAAGuO,EAAHvO,EAAGuO,aAAcC,EAAjBxO,EAAiBwO,WAAjB,OACCpL,EAAA/F,EAAAgG,cAACiJ,GAAAjP,EAAD,CACEyL,UAAU,OACVyD,WAAS,EACTC,UAAU,SACVoD,QAASA,EACTvB,SAAUE,EACV3I,QAAS,IAETxC,EAAA/F,EAAAgG,cAACiJ,GAAAjP,EAAD,CAAMyB,MAAI,GACRsE,EAAA/F,EAAAgG,cAACiL,GAAA,EAAD,CAAOvG,KAAK,OAAO2G,SAAUvB,IAC1B,SAAA3B,GAAA,IAAGoD,EAAHpD,EAAGoD,MAAHC,EAAArD,EAAUsD,KAAQC,EAAlBF,EAAkBE,MAAOC,EAAzBH,EAAyBG,QAAzB,OACC5L,EAAA/F,EAAAgG,cAAC4L,GAAA5R,EAADH,OAAAmP,OAAA,GACMuC,EADN,CAEEqB,WAAS,EACTlB,MAAOC,GAAW5B,QAAQ2B,GAC1BG,WAAS,EACTC,WAAYH,GAAWD,EACvBK,MAAM,aAKdhM,EAAA/F,EAAAgG,cAACiJ,GAAAjP,EAAD,CAAMyB,MAAI,GACRsE,EAAA/F,EAAAgG,cAACiL,GAAA,EAAD,CACEvG,KAAK,iBACL2G,SAAU,SAAA/O,GAAK,OAAIwN,GAASxN,IAAU2N,GAAY3N,KAEjD,SAAA2P,GAAA,IAAGV,EAAHU,EAAGV,MAAHW,EAAAD,EAAUR,KAAQC,EAAlBQ,EAAkBR,MAAOC,EAAzBO,EAAyBP,QAAzB,OACC5L,EAAA/F,EAAAgG,cAAC4L,GAAA5R,EAADH,OAAAmP,OAAA,GACMuC,EADN,CAEEG,MAAOC,GAAW5B,QAAQ2B,GAC1BG,WAAS,EACTC,WAAYH,GAAWD,EACvBK,MAAM,kBACNC,YAAY,kBAKpBjM,EAAA/F,EAAAgG,cAACiJ,GAAAjP,EAAD,CAAMyB,MAAI,GACRsE,EAAA/F,EAAAgG,cAACiL,GAAA,EAAD,CAAOvG,KAAK,iBAAiB2G,SAAUvB,IACpC,SAAAqC,GAAA,IAAGZ,EAAHY,EAAGZ,MAAHa,EAAAD,EAAUV,KAAQC,EAAlBU,EAAkBV,MAAOC,EAAzBS,EAAyBT,QAAzB,OACC5L,EAAA/F,EAAAgG,cAAC4L,GAAA5R,EAADH,OAAAmP,OAAA,GACMuC,EADN,CAEEG,MAAOC,GAAW5B,QAAQ2B,GAC1BG,WAAS,EACTC,WAAYH,GAAWD,EACvBK,MAAM,kBACNc,KAAK,eAMb9M,EAAA/F,EAAAgG,cAACiL,GAAA,EAAD,CAAOvG,KAAK,kBACT,SAAAoI,GAAA,IAAAC,EAAAD,EAAGvB,MAASjP,EAAZyQ,EAAYzQ,MAAO0Q,EAAnBD,EAAmBC,SAAnB,OACCjN,EAAA/F,EAAAgG,cAAAD,EAAA/F,EAAAsH,SAAA,KACEvB,EAAA/F,EAAAgG,cAACiE,GAAD,KACElE,EAAA/F,EAAAgG,cAACiJ,GAAAjP,EAAD,CAAMyB,MAAI,GACRsE,EAAA/F,EAAAgG,cAACiN,GAAAjT,EAAD,CAAYgI,QAAQ,WAApB,eAEAjC,EAAA/F,EAAAgG,cAAC+K,GAAD,CACEC,SAAU,SAAA2B,GACR,IAAMO,EAAUC,GAAc,CAC5B/Q,KAAM,IAAII,KAAKmQ,EAAOvQ,MACtBmN,OAAQa,OAAOuC,EAAOpD,QACtBC,YAAamD,EAAOnD,cAEtBwD,EAASI,aAAOF,EAAS5Q,SAMjCyD,EAAA/F,EAAAgG,cAACiJ,GAAAjP,EAAD,CAAMyB,MAAI,GACRsE,EAAA/F,EAAAgG,cAACiN,GAAAjT,EAAD,CAAYgI,QAAQ,WAApB,mBACAjC,EAAA/F,EAAAgG,cAACuK,GAAD,CAAgBC,eAAgBlO,QAMxCyD,EAAA/F,EAAAgG,cAACiJ,GAAAjP,EAAD,CAAMyB,MAAI,GACRsE,EAAA/F,EAAAgG,cAACiJ,GAAAjP,EAAD,CAAMkP,WAAS,EAACmE,QAAQ,WAAW9K,QAAS,IAC1CxC,EAAA/F,EAAAgG,cAACiJ,GAAAjP,EAAD,CAAMyB,MAAI,GACRsE,EAAA/F,EAAAgG,cAACsN,GAAAtT,EAAD,CAAQ6S,KAAK,SAAb,WAEF9M,EAAA/F,EAAAgG,cAACiE,GAAD,KACElE,EAAA/F,EAAAgG,cAACiJ,GAAAjP,EAAD,CAAMyB,MAAI,GACRsE,EAAA/F,EAAAgG,cAACsN,GAAAtT,EAAD,CACE4H,MAAM,UACNyK,SAAUlB,EACV0B,KAAK,SACL7K,QAAQ,aAJV,iBCpDHuL,OA5Ef,SAAAnU,GAA6C,IAAlBoU,EAAkBpU,EAAlBoU,MAAOhO,EAAWpG,EAAXoG,QAAWC,EACjBC,mBAAS,CACjC0F,QAAS,KACTpC,WAAW,IAH8BrD,EAAA9F,OAAA+F,EAAA,EAAA/F,CAAA4F,EAAA,GACpCiI,EADoC/H,EAAA,GAC7BgI,EAD6BhI,EAAA,GAKZkI,EAAuBxG,qBAAW+F,IAAzDC,SAAYlB,UAEdhM,EAAYqT,EAAMC,OAAOC,GACvBtI,EAAuBsC,EAAvBtC,QAASpC,EAAc0E,EAAd1E,UAEX2K,EAAc3K,EAAY,GAAKoC,EAAQV,KAEvCkJ,EAAY,eAAAjR,EAAA9C,OAAAC,EAAA,EAAAD,CAAAE,EAAAC,EAAAC,KAAG,SAAAC,IAAA,IAAA2T,EAAA,OAAA9T,EAAAC,EAAAK,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACnBmN,EAAS,SAAAD,GAAK,OAAA7N,OAAAgD,EAAA,EAAAhD,CAAA,GAAU6N,EAAV,CAAiB1E,WAAW,MADvB1I,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAGIqN,EAAiBiG,eAAe3T,GAHpC,OAGX0T,EAHWvT,EAAAoD,KAIjBiK,EAAS,SAAAD,GAAK,OAAA7N,OAAAgD,EAAA,EAAAhD,CAAA,GACT6N,EADS,CAEZtC,QAASyI,MANM,cAAAvT,EAAAC,KAAA,EASjBoN,EAAS,SAAAD,GAAK,OAAA7N,OAAAgD,EAAA,EAAAhD,CAAA,GACT6N,EADS,CAEZ1E,WAAW,MAXI1I,EAAAyT,OAAA,2BAAAzT,EAAAW,SAAAf,EAAA,oBAAH,yBAAAyC,EAAAxB,MAAAC,KAAAC,YAAA,GAgBlB+M,oBAAU,WACRwF,KACC,IAEH,IAAM7K,EACJhD,EAAA/F,EAAAgG,cAACqD,GAAD,CACEjC,MAAO4B,EAAY,iBAAmB2K,IASpC3C,EAAQ,eAAA7C,EAAAtO,OAAAC,EAAA,EAAAD,CAAAE,EAAAC,EAAAC,KAAG,SAAAuB,EAAOmR,GAAP,OAAA5S,EAAAC,EAAAK,KAAA,SAAAqB,GAAA,cAAAA,EAAAnB,KAAAmB,EAAAlB,MAAA,cAAAkB,EAAAlB,KAAA,EACTqN,EAAiBmG,YAAY5I,EAASuH,GAD7B,OAEfnN,EAAQoB,QAAQ,CAAEC,SAAU,MAFb,wBAAAnF,EAAAT,SAAAO,MAAH,gBAAAN,GAAA,OAAAiN,EAAAhN,MAAAC,KAAAC,YAAA,GAKd,OACE0E,EAAA/F,EAAAgG,cAACiC,GAAD,KACElC,EAAA/F,EAAAgG,cAACiO,GAAD,CACElL,OAAQA,EACRC,UAAW0E,EAAM1E,UACjB5B,MAAK,QAAA7H,OAAUoU,IAEf5N,EAAA/F,EAAAgG,cAACsM,GAAD,CACElH,QAASA,EACTmH,QAnBQ,SAAC2B,GACfA,EAAEC,iBACF3O,EAAQoB,QAAQ,CAAEC,SAAU,OAkBtBmK,SAAUA,OCjBLoD,OAzCf,SAAAhV,GAAwC,IAAXoG,EAAWpG,EAAXoG,QACP2G,EAAgB9E,qBAAW+F,IAAvCC,SAAYlB,UAEdpD,EACJhD,EAAA/F,EAAAgG,cAACqD,GAAD,CACEjC,MAAM,uBAUJ4J,EAAQ,eAAArO,EAAA9C,OAAAC,EAAA,EAAAD,CAAAE,EAAAC,EAAAC,KAAG,SAAAC,EAAOyS,GAAP,OAAA5S,EAAAC,EAAAK,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACT2L,EAAUkI,cAAc1B,GADf,OAEfnN,EAAQoB,QAAQ,KAFD,wBAAAtG,EAAAW,SAAAf,MAAH,gBAAAgB,GAAA,OAAAyB,EAAAxB,MAAAC,KAAAC,YAAA,GAKd,OACE0E,EAAA/F,EAAAgG,cAACiC,GAAD,KACElC,EAAA/F,EAAAgG,cAACiO,GAAD,CACElL,OAAQA,EACR3B,MAAK,sBAELrB,EAAA/F,EAAAgG,cAACsM,GAAD,CACEC,QAlBQ,SAAC2B,GACfA,EAAEC,iBACFD,EAAEI,kBACF9O,EAAQoB,QAAQ,MAgBVoK,SAAUA,OCiDLuD,GApFG,SAAAnV,GAClB,IAAAC,EAAAD,EAAAC,MACAC,EAAA,IAAeN,EAAA,EAAO,GAAAO,OAAAF,EAAA,eACtB,OACAG,QAAA,WACA,OAAAF,EAAAG,QAAA,CACAC,cAAA,KAGA8U,QAAA,WACA,IAAAC,EAAqB5U,OAAAC,EAAA,EAAAD,CAEfE,EAAAC,EAAmBC,KAAA,SAAAC,EAAAwT,GACzB,OAAe3T,EAAAC,EAAmBK,KAAA,SAAAC,GAClC,OACA,OAAAA,EAAAC,KAAAD,EAAAE,MACA,OACA,OAAAF,EAAAO,OAAA,SAAAvB,EAAAoV,IAAAhB,IAEA,OACA,UACA,OAAApT,EAAAW,SAGSf,MAOT,OAJA,SAAAgB,GACA,OAAAuT,EAAAtT,MAAAC,KAAAC,YAnBA,GAwBAC,SAAA,WACA,IAAAC,EAAsB1B,OAAAC,EAAA,EAAAD,CAEhBE,EAAAC,EAAmBC,KAAA,SAAAuB,EAAAC,GACzB,OAAe1B,EAAAC,EAAmBK,KAAA,SAAAqB,GAClC,OACA,OAAAA,EAAAnB,KAAAmB,EAAAlB,MACA,OACA,OAAAkB,EAAAb,OAAA,SAAAvB,EAAAqC,KAAAF,IAEA,OACA,UACA,OAAAC,EAAAT,SAGSO,MAOT,OAJA,SAAAI,GACA,OAAAL,EAAAJ,MAAAC,KAAAC,YAnBA,GAwBAQ,WAAA,WACA,IAAAC,EAAwBjC,OAAAC,EAAA,EAAAD,CAElBE,EAAAC,EAAmBC,KAAA,SAAA8B,EAAAN,GACzB,OAAe1B,EAAAC,EAAmBK,KAAA,SAAA2B,GAClC,OACA,OAAAA,EAAAzB,KAAAyB,EAAAxB,MACA,OACA,OAAAwB,EAAAnB,OAAA,SAAAvB,EAAA2C,IAAAR,IAEA,OACA,UACA,OAAAO,EAAAf,SAGSc,MAOT,OAJA,SAAAG,GACA,OAAAJ,EAAAX,MAAAC,KAAAC,YAnBA,KCvCesT,GApBK,SAAAvV,GACpB,IAAAwV,EAAAxV,EAAAwV,eACA,OACAP,cAAA,SAAAQ,GACA,IAAAzJ,EnBAiB,SAAAhM,GACjB,IAAAsL,EAAAtL,EAAAsL,KACAG,EAAAzL,EAAAyL,eAEA,OACAR,eAFAjL,EAAAiL,eAGAQ,iBACApI,gBAAA,KACAiI,OACAnI,YAAiBJ,EAAW,IAAAK,MAC5BgO,eAAA,ImBVoBsE,CAAMD,GAC1B,OAAAD,EAAAtT,SAAA8J,IAEA4I,YAAA,SAAA5I,EAAAyJ,GACA,IAAAE,EnBSiB,SAAApS,EAAAyI,GACjBzI,EAAA+H,KAAA,IACAG,EAAAlI,EAAAkI,eACAR,EAAA1H,EAAA0H,eACAmG,EAAA7N,EAAA6N,eACA,OAAS3Q,OAAAgD,EAAA,EAAAhD,CAAa,GAAGuL,EAAA,CACzBf,iBACAQ,iBACApI,gBAAqBN,EAAW,IAAAK,MAChCgO,mBmBlB2BwE,CAAMH,EAAAzJ,GACjC,OAAAwJ,EAAA/S,WAAAkT,IAEA9G,aAAA,WACA,OAAA2G,EAAApV,WAEAsU,eAAA,SAAAJ,GACA,OAAAkB,EAAAJ,QAAAd,sECjBqBuB,eACnB,SAAAA,EAAYC,GAAQ,OAAArV,OAAAsV,GAAA,EAAAtV,CAAAuB,KAAA6T,GAAApV,OAAAuV,GAAA,EAAAvV,CAAAuB,KAAAvB,OAAAwV,GAAA,EAAAxV,CAAAoV,GAAAK,KAAAlU,KAAA,SAAA7B,OACH2V,EADE,+DAD0BK,QCA1BC,eACnB,SAAAA,IAAe,OAAA3V,OAAAsV,GAAA,EAAAtV,CAAAuB,KAAAoU,GAAA3V,OAAAuV,GAAA,EAAAvV,CAAAuB,KAAAvB,OAAAwV,GAAA,EAAAxV,CAAA2V,GAAAF,KAAAlU,KAAA,8DADmCmU,QC2BrCE,OAxBf,SAAsB9C,GACpB,OAAO,IAAI+C,QAAQ,SAACC,EAASC,GAAW,IAC9BV,EAAoBvC,EAApBuC,MAAOW,EAAalD,EAAbkD,SAED,UAAVX,GAA+B,SAAVA,EAMZ,UAAVA,GAAkC,UAAbW,GACX,SAAVX,GAAiC,SAAbW,EAErBD,EAAO,IAAIJ,KAIbxQ,aAAa8Q,QAAQ,kBAAmB,QACxC9Q,aAAa8Q,QAAQ,UAAqB,UAAVZ,GAEhCS,KAfEC,EAAO,IAAIX,GAAkBC,OCEnC,SAASa,GAAT3W,GAA4C,IAAvBmH,EAAuBnH,EAAvBmH,UAAWyK,EAAY5R,EAAZ4R,SAC9B,OACEjL,EAAA/F,EAAAgG,cAACiL,GAAA,EAAD,CAAMD,SAAUA,GACb,SAAArO,GAAA,IAAGuO,EAAHvO,EAAGuO,aAAc8E,EAAjBrT,EAAiBqT,YAAa7E,EAA9BxO,EAA8BwO,WAA9B,OACCpL,EAAA/F,EAAAgG,cAACiJ,GAAAjP,EAAD,CACEiW,aAAa,SACb1P,UAAWA,EACXkF,UAAU,OACVyD,WAAS,EACT8B,SAAUE,EACV3I,QAAS,IAERyN,EACCjQ,EAAA/F,EAAAgG,cAACiJ,GAAAjP,EAAD,CACE4H,MAAM,QACN6D,UAAW2D,IACX3N,MAAI,EACJ8B,GAAI,IAEHyS,GAED,KAEJjQ,EAAA/F,EAAAgG,cAACiJ,GAAAjP,EAAD,CAAMyB,MAAI,EAAC8B,GAAI,IACbwC,EAAA/F,EAAAgG,cAACiL,GAAA,EAAD,CACEvG,KAAK,QACL2G,SAAUvB,IAET,SAAA3B,GAAA,IAAGoD,EAAHpD,EAAGoD,MAAHC,EAAArD,EAAUsD,KAAQC,EAAlBF,EAAkBE,MAAOC,EAAzBH,EAAyBG,QAASqE,EAAlCxE,EAAkCwE,YAAlC,OACCjQ,EAAA/F,EAAAgG,cAAC4L,GAAA5R,EAADH,OAAAmP,OAAA,GACMuC,EADN,CAEEqB,WAAS,EACTlB,MAAOC,GAAW5B,QAAQ2B,GAASsE,GACnCnE,WAAS,EACTC,WAAYH,IAAYD,GAASsE,GACjChE,YAAY,cAMpBjM,EAAA/F,EAAAgG,cAACiJ,GAAAjP,EAAD,CAAMyB,MAAI,EAAC8B,GAAI,IACbwC,EAAA/F,EAAAgG,cAACiL,GAAA,EAAD,CACEvG,KAAK,WACL2G,SAAUvB,IAET,SAAAmC,GAAA,IAAGV,EAAHU,EAAGV,MAAHW,EAAAD,EAAUR,KAAQC,EAAlBQ,EAAkBR,MAAOC,EAAzBO,EAAyBP,QAAzB,OACC5L,EAAA/F,EAAAgG,cAAC4L,GAAA5R,EAADH,OAAAmP,OAAA,GACMuC,EADN,CAEEG,MAAOC,GAAW5B,QAAQ2B,GAC1BG,WAAS,EACTC,WAAYH,GAAWD,EACvBM,YAAY,WACZa,KAAK,iBAMb9M,EAAA/F,EAAAgG,cAACiJ,GAAAjP,EAAD,CAAMyB,MAAI,EAAC8B,GAAI,IACbwC,EAAA/F,EAAAgG,cAACsN,GAAAtT,EAAD,CACE4H,MAAM,UACNyK,SAAUlB,EACVU,WAAS,EACTgB,KAAK,SACL7K,QAAQ,aALV,cAqBZ+N,GAAUjP,aAAe,CACvBP,UAAW,IAGEwP,UCtBA/O,WA3DA,SAACkB,GAAD,MAAY,CACzBO,KAAM,CACJiG,WAAiC,EAArBxG,EAAMK,QAAQC,MAE5B0N,KAAM,CACJzM,OAAM,GAAAlK,OAA0B,EAArB2I,EAAMK,QAAQC,KAAnB,WACNqG,SAAU,WAqDC7H,CAjDf,SAAA5H,GAAyC,IAApBkG,EAAoBlG,EAApBkG,QAASE,EAAWpG,EAAXoG,QACtBwL,EAAQ,eAAArO,EAAA9C,OAAAC,EAAA,EAAAD,CAAAE,EAAAC,EAAAC,KAAG,SAAAC,EAAOyS,GAAP,OAAA5S,EAAAC,EAAAK,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAEPiV,GAAa9C,GAFN,OAGbnN,EAAQoB,QAAQ,CAAEC,SAAU,MAHfvG,EAAAE,KAAA,mBAAAF,EAAAC,KAAA,EAAAD,EAAAqD,GAAArD,EAAA,WAKTA,EAAAqD,cAAasR,IALJ,CAAA3U,EAAAE,KAAA,gBAAAF,EAAAO,OAAA,SAMJ,CAAEqU,MAAO5U,EAAAqD,GAAEwS,UANP,aAOF7V,EAAAqD,cAAa6R,IAPX,CAAAlV,EAAAE,KAAA,gBAAAF,EAAAO,OAAA,SAAAhB,OAAAuW,GAAA,EAAAvW,CAAA,GAQDwW,KAAa,0BARZ,cAAA/V,EAAAqD,GAAA,yBAAArD,EAAAW,SAAAf,EAAA,iBAAH,gBAAAgB,GAAA,OAAAyB,EAAAxB,MAAAC,KAAAC,YAAA,GAed,OACE0E,EAAA/F,EAAAgG,cAACiD,GAAD,CAAM3D,QAAS,CAAEmD,KAAMnD,EAAQmD,OAC7B1C,EAAA/F,EAAAgG,cAAC+B,EAAA/H,EAAD,CACE2L,MAAM,SACN2K,WAAW,EACXtO,QAAQ,SAHV,WAQAjC,EAAA/F,EAAAgG,cAAC+B,EAAA/H,EAAD,CACE2L,MAAM,SACN/D,MAAM,iBAFR,MAOA7B,EAAA/F,EAAAgG,cAAC+B,EAAA/H,EAAD,CACE2L,MAAM,SACN/D,MAAM,UACNI,QAAQ,YAHV,8BAQAjC,EAAA/F,EAAAgG,cAACuQ,GAAD,CACEhQ,UAAWjB,EAAQ4Q,KACnBlF,SAAUA,OC/DHwF,OAJf,WACE,MAAmD,SAA5CxR,aAAakF,QAAQ,oBCkBfuM,OAdf,SAAArX,GAAmC,IAAZmG,EAAYnG,EAAZmG,SACrB,OAAKiR,KAUEjR,EARHQ,EAAA/F,EAAAgG,cAAC0Q,EAAA,EAAD,CACE5K,GAAI,CACFjF,SAAU,aCOdxH,WACJ,sMAGIwO,GAAmB8I,GAAiB,CAAE/B,eADrBgC,GAAe,CAAEvX,aAGlCyO,GAAe+I,EAAa,CAAE1T,WADjB2T,EAAW,CAAEzX,aA2BjB0X,OAxBf,WACE,OACEhR,EAAA/F,EAAAgG,cAAA,OAAKO,UAAU,OACbR,EAAA/F,EAAAgG,cAACgR,GAAW9Q,SAAZ,CACE5D,MAAO,CACL+K,SAAU,CAAElB,UAAW0B,GAAkB7D,MAAO8D,MAGlD/H,EAAA/F,EAAAgG,cAAC6F,EAAA,EAAD,KACE9F,EAAA/F,EAAAgG,cAAC0Q,EAAA,EAAD,KACE3Q,EAAA/F,EAAAgG,cAAC0Q,EAAA,EAAD,CAAOO,KAAK,SAASxL,UAAWyL,KAEhCnR,EAAA/F,EAAAgG,cAACmR,GAAD,KACEpR,EAAA/F,EAAAgG,cAAC0Q,EAAA,EAAD,CAAOU,OAAK,EAACH,KAAK,IAAIxL,UAAWgC,KACjC1H,EAAA/F,EAAAgG,cAAC0Q,EAAA,EAAD,CAAOU,OAAK,EAACH,KAAK,YAAYxL,UAAW2I,KACzCrO,EAAA/F,EAAAgG,cAAC0Q,EAAA,EAAD,CAAOO,KAAK,eAAexL,UAAW8H,WC5BhCxD,QACW,cAA7BsH,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAAS/D,MACvB,2DCZNgE,IAASC,OAAO1R,EAAA/F,EAAAgG,cAAC0R,GAAD,MAASC,SAASC,eAAe,SD2H3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAM/W,KAAK,SAAAgX,GACjCA,EAAaC","file":"static/js/main.0380f312.chunk.js","sourcesContent":["import _regeneratorRuntime from \"/Users/dzianis_roi/Projects/logistics-risks-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/dzianis_roi/Projects/logistics-risks-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport PouchDB from \"pouchdb\";\nimport PouchDBFind from \"pouchdb-find\";\nimport view from 'ramda/es/view';\nimport lensProp from \"ramda/es/lensProp\";\nimport pipe from \"ramda/es/pipe\";\nimport head from \"ramda/es/head\";\nPouchDB.plugin(PouchDBFind);\n\nvar RisksStore = function RisksStore(_ref) {\n  var dbUrl = _ref.dbUrl;\n  var db = new PouchDB(\"\".concat(dbUrl, \"/risks\"));\n  return {\n    getList: function getList() {\n      return db.allDocs({\n        include_docs: true\n      });\n    },\n    getByCompanyId: function () {\n      var _getByCompanyId = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(companyId) {\n        var getFirstResult;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                getFirstResult = pipe(view(lensProp('docs')), head);\n                return _context.abrupt(\"return\", db.find({\n                  selector: {\n                    companyId: companyId\n                  }\n                }).then(getFirstResult));\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getByCompanyId(_x) {\n        return _getByCompanyId.apply(this, arguments);\n      }\n\n      return getByCompanyId;\n    }(),\n    saveItem: function () {\n      var _saveItem = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(item) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                return _context2.abrupt(\"return\", db.post(item));\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function saveItem(_x2) {\n        return _saveItem.apply(this, arguments);\n      }\n\n      return saveItem;\n    }(),\n    updateItem: function () {\n      var _updateItem = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(item) {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                return _context3.abrupt(\"return\", db.put(item));\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function updateItem(_x3) {\n        return _updateItem.apply(this, arguments);\n      }\n\n      return updateItem;\n    }()\n  };\n};\n\nexport default RisksStore;","export default function toISOString(date) {\n  return date.toISOString();\n}","import _objectSpread from \"/Users/dzianis_roi/Projects/logistics-risks-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport view from \"ramda/es/view\";\nimport lensProp from \"ramda/es/lensProp\";\nimport toISOString from \"@logistics-calc/date-utils/src/toISOString\";\nexport var create = function create(_ref) {\n  var companyId = _ref.companyId,\n      value = _ref.value;\n  return {\n    value: value,\n    companyId: companyId,\n    createdDate: toISOString(new Date()),\n    lastUpdatedDate: null\n  };\n};\nexport var update = function update(_ref2, risk) {\n  var value = _ref2.value;\n  return _objectSpread({}, risk, {\n    value: value,\n    lastUpdatedDate: toISOString(new Date())\n  });\n};\nexport var getId = view(lensProp('_id'));\nexport var getCompanyId = view(lensProp('companyId'));\nexport var getValue = view(lensProp('value'));","import _regeneratorRuntime from \"/Users/dzianis_roi/Projects/logistics-risks-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/dzianis_roi/Projects/logistics-risks-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as tf from \"@tensorflow/tfjs\";\nimport { create, update } from \"@logistics-calc/risks/src/domain/models/Risk\";\nvar modelUrl = 'localstorage://logistics-risks-model';\n\nvar getRandomInt = function getRandomInt(min, max) {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n\nvar RisksService = function RisksService(_ref) {\n  var risksStore = _ref.risksStore;\n  var listener;\n  return {\n    calculate: function () {\n      var _calculate = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(companyId) {\n        var model, xs, ys, risk, value;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return tf.loadLayersModel(modelUrl);\n\n              case 3:\n                model = _context.sent;\n                _context.next = 17;\n                break;\n\n              case 6:\n                _context.prev = 6;\n                _context.t0 = _context[\"catch\"](0);\n                model = tf.sequential();\n                model.add(tf.layers.dense({\n                  units: 1,\n                  inputShape: [1]\n                }));\n                model.compile({\n                  loss: 'meanSquaredError',\n                  optimizer: 'SGD'\n                });\n                xs = tf.tensor2d([[1], [2], [3], [4]], [4, 1]);\n                ys = tf.tensor2d([[1], [3], [5], [7]], [4, 1]);\n                _context.next = 15;\n                return model.fit(xs, ys, {\n                  epochs: 500\n                });\n\n              case 15:\n                _context.next = 17;\n                return model.save(modelUrl);\n\n              case 17:\n                _context.next = 19;\n                return risksStore.getByCompanyId(companyId);\n\n              case 19:\n                risk = _context.sent;\n                value = getRandomInt(10, 100);\n\n                if (!risk) {\n                  _context.next = 26;\n                  break;\n                }\n\n                _context.next = 24;\n                return risksStore.updateItem(update({\n                  value: value\n                }, risk));\n\n              case 24:\n                _context.next = 28;\n                break;\n\n              case 26:\n                _context.next = 28;\n                return risksStore.saveItem(create({\n                  value: value,\n                  companyId: companyId\n                }));\n\n              case 28:\n                if (listener) {\n                  listener();\n                }\n\n              case 29:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 6]]);\n      }));\n\n      function calculate(_x) {\n        return _calculate.apply(this, arguments);\n      }\n\n      return calculate;\n    }(),\n    getList: function getList() {\n      return risksStore.getList();\n    },\n    subscribe: function subscribe(l) {\n      listener = l;\n    },\n    unsubscribe: function unsubscribe() {\n      listener = null;\n    }\n  };\n};\n\nexport default RisksService;","function logout() {\n  localStorage.removeItem('isAuthenticated');\n}\n\nexport default logout;\n","import { createContext } from 'react';\n\nconst AppMenuContext = createContext({ openMenu: null });\n\nexport default AppMenuContext;\n","import React, { useState } from \"react\";\nimport PropTypes from 'prop-types';\nimport { withRouter } from 'react-router-dom';\nimport List from \"@material-ui/core/List/index\";\nimport ListItem from \"@material-ui/core/ListItem/index\";\nimport Drawer from \"@material-ui/core/Drawer/index\";\nimport withStyles from \"@material-ui/core/styles/withStyles\";\n\nimport logout from \"../../auth/domain/services/logout\";\n\nimport AppMenuContext from './AppMenuContext';\n\n\nconst styles = {\n  list: {\n    width: '250px',\n  },\n};\n\nfunction AppMenu({ classes, children, history }) {\n  const [isOpened, setIsOpened] = useState(false);\n\n  const openMenu = () => {\n    setIsOpened(true);\n  };\n\n  const onLogoutClick = () => {\n    logout();\n    history.replace({ pathname: '/login' });\n  };\n\n  return (\n    <AppMenuContext.Provider\n      value={{\n        openMenu,\n      }}\n    >\n      <Drawer\n        open={isOpened}\n        onClose={() => setIsOpened(false)}\n      >\n        <List className={classes.list}>\n          <ListItem button onClick={onLogoutClick}>\n            Logout\n          </ListItem>\n        </List>\n      </Drawer>\n      { children }\n    </AppMenuContext.Provider>\n  )\n}\n\n\nAppMenu.propTypes = {\n  classes: PropTypes.object.isRequired,\n  onLogout: PropTypes.func,\n  open: PropTypes.bool,\n};\n\nAppMenu.defaultProps = {\n  open: false,\n};\n\nexport default withRouter(withStyles(styles)(AppMenu));\n","import React, { useContext } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport SimpleDrawer from \"./menu/ui/AppMenu\";\nimport AppMenuContext from \"./menu/ui/AppMenuContext\";\n\nconst styles = theme => ({\n  title: {\n    flexGrow: 1\n  },\n  menuButton: {\n    marginLeft: -12,\n    marginRight: 20\n  },\n  buttonIconLeft: {\n    marginRight: theme.spacing.unit\n  }\n});\n\nfunction SimpleAppBar(props) {\n  const { classes, title } = props;\n  const { openMenu } = useContext(AppMenuContext);\n\n  return (\n    <>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <IconButton\n            className={classes.menuButton}\n            color=\"inherit\"\n            aria-label=\"Menu\"\n            onClick={openMenu}\n          >\n            <MenuIcon/>\n          </IconButton>\n          <Typography variant=\"h6\" color=\"inherit\" className={classes.title}>\n            {title}\n          </Typography>\n        </Toolbar>\n      </AppBar>\n      <SimpleDrawer />\n    </>\n  );\n}\n\nSimpleAppBar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  title: PropTypes.string\n};\n\nSimpleAppBar.defaultProps = {\n  title: \"Logistics Risks Calculator\"\n};\n\nexport default withStyles(styles)(SimpleAppBar);\n","import React from 'react';\nimport classnames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\n\nconst styles = {\n  root: {\n    display: 'flex',\n    flexFlow: 'column nowrap',\n    flexGrow: 1,\n    height: '100%',\n  },\n};\n\nfunction Page({ className, classes, children }) {\n  return <div className={classnames(classes.root, className)}>{ children }</div>\n}\n\nexport default withStyles(styles)(Page);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nimport SimpleAppBar from './SimpleAppBar';\nimport Page from './Page';\n\n\nconst styles = {\n  gridContainer: {\n    display: 'flex',\n    flexGrow: 1,\n    maxHeight: '100%',\n    overflow: 'auto',\n  },\n  progress: {\n    alignSelf: 'center',\n    margin: 'auto',\n  },\n};\n\n\nfunction PageWithAppBar({ appBar, className, classes, children, isLoading }) {\n  return (\n    <Page className={className}>\n      { appBar }\n      <div className={classes.gridContainer}>\n        {isLoading ? <CircularProgress className={classes.progress}/> : children}\n      </div>\n    </Page>\n  )\n}\n\nPageWithAppBar.propTypes = {\n  appBar: PropTypes.node,\n  children: PropTypes.node,\n  className: PropTypes.string,\n  classes: PropTypes.object.isRequired,\n  isLoading: PropTypes.bool,\n};\n\nPageWithAppBar.defaultProps = {\n  appBar: <SimpleAppBar />,\n  isLoading: false,\n};\n\nexport default withStyles(styles)(PageWithAppBar);\n","import _objectSpread from \"/Users/dzianis_roi/Projects/logistics-risks-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport lensProp from 'ramda/es/lensProp';\nimport view from 'ramda/es/view';\nimport pipe from \"ramda/es/pipe\";\nimport defaultTo from \"ramda/es/defaultTo\";\nimport toISOString from '@logistics-calc/date-utils/src/toISOString';\nexport var create = function create(_ref) {\n  var name = _ref.name,\n      foundationDate = _ref.foundationDate,\n      charterCapital = _ref.charterCapital;\n  return {\n    charterCapital: charterCapital,\n    foundationDate: foundationDate,\n    lastUpdatedDate: null,\n    name: name,\n    createdDate: toISOString(new Date()),\n    paymentHistory: []\n  };\n};\nexport var update = function update(_ref2, company) {\n  var name = _ref2.name,\n      foundationDate = _ref2.foundationDate,\n      charterCapital = _ref2.charterCapital,\n      paymentHistory = _ref2.paymentHistory;\n  return _objectSpread({}, company, {\n    charterCapital: charterCapital,\n    foundationDate: foundationDate,\n    lastUpdatedDate: toISOString(new Date()),\n    paymentHistory: paymentHistory\n  });\n};\nexport var getId = view(lensProp('_id'));\nexport var getName = view(lensProp('name'));\nexport var getFoundationDate = view(lensProp('foundationDate'));\nexport var getPaymentHistory = pipe(view(lensProp(\"paymentHistory\")), defaultTo([]));","import { getCompanyId } from \"./Risk\";\nexport var getByCompanyId = function getByCompanyId(companyId, risks) {\n  return risks.find(function (risk) {\n    return getCompanyId(risk) === companyId;\n  });\n};","export default function Permit({ children }) {\n  return localStorage.getItem('isAdmin') === 'true' ? children : null;\n}\n","import PropTypes from 'prop-types';\n\nexport const COMPANY_SHAPE = PropTypes.shape({\n  charterCapital: PropTypes.number.isRequired,\n  _id: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  lastUpdated: PropTypes.instanceOf(Date),\n  foundationDate: PropTypes.string.isRequired\n});\n","import format from \"date-fns/format\";\nexport default function formatDate(date) {\n  return format(date, 'MM/DD/YYYY');\n}","import React from 'react';\nimport { withStyles } from '@material-ui/styles';\nimport TableCell from '@material-ui/core/TableCell';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { Link } from 'react-router-dom';\nimport IconButton from '@material-ui/core/IconButton';\nimport TableRow from '@material-ui/core/TableRow';\nimport RefreshIcon from '@material-ui/icons/Refresh';\nimport EditIcon from '@material-ui/icons/Edit';\n\nimport formatDate from '@logistics-calc/date-utils/src/formatDate';\n\nimport isHighRisk from '@logistics-calc/risks/src/domain/services/isHighRisk';\nimport { getValue } from '@logistics-calc/risks/src/domain/models/Risk';\n\nimport {\n  getFoundationDate,\n  getId,\n  getName\n} from '@logistics-calc/companies/src/domain/models/Company';\n\nimport Permit from '../../../priveleges/Permit';\n\nconst styles = {\n  tableCellRisk: {\n    backgroundColor: ({ risk }) => {\n      if (!risk) {\n        return null;\n      }\n\n      return isHighRisk(risk) ? 'red' : 'green';\n    }\n  }\n};\n\nfunction CompaniesTableItem({ classes, company, onRecalculate, risk }) {\n  const companyId = getId(company);\n  return (\n    <TableRow>\n      <TableCell component=\"th\" scope=\"row\">\n        {getName(company)}\n      </TableCell>\n      <TableCell align=\"center\" classes={{ root: classes.tableCellRisk }}>\n        {risk ? `${getValue(risk)}%` : '-'}\n      </TableCell>\n      <TableCell align=\"center\">\n        {formatDate(getFoundationDate(company))}\n      </TableCell>\n      <TableCell align=\"right\">\n        <Tooltip title=\"Edit\">\n          <Link to={`/company/${getId(company)}`}>\n            <IconButton aria-label=\"Recalculate\">\n              <EditIcon fontSize=\"small\" />\n            </IconButton>\n          </Link>\n        </Tooltip>\n        <Permit>\n          <Tooltip title=\"Recalculate\">\n            <IconButton\n              aria-label=\"Recalculate\"\n              onClick={() => onRecalculate(companyId)}\n            >\n              <RefreshIcon fontSize=\"small\" />\n            </IconButton>\n          </Tooltip>\n        </Permit>\n      </TableCell>\n    </TableRow>\n  );\n}\n\nexport default withStyles(styles)(CompaniesTableItem);\n","import { getValue } from '../models/Risk';\n/**\n * @param {Risk} risk\n * @returns {boolean}\n */\n\nexport default function isHighRisk(risk) {\n  return getValue(risk) > 50;\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles/index';\nimport Table from '@material-ui/core/Table/index';\nimport TableBody from '@material-ui/core/TableBody/index';\nimport TableCell from '@material-ui/core/TableCell/index';\nimport TableHead from '@material-ui/core/TableHead/index';\nimport TableRow from '@material-ui/core/TableRow/index';\nimport Fab from '@material-ui/core/Fab/index';\nimport Paper from '@material-ui/core/Paper/index';\nimport AddIcon from '@material-ui/icons/Add';\n\nimport { getId } from '@logistics-calc/companies/src/domain/models/Company';\n\nimport { getByCompanyId } from '@logistics-calc/risks/src/domain/models/RisksCollection';\n\nimport Permit from '../../../priveleges/Permit';\n\nimport { COMPANY_SHAPE } from '../constants';\nimport CompaniesTableItem from './CompaniesTableItem';\n\nconst styles = theme => ({\n  root: {\n    width: '100%',\n    overflowX: 'auto'\n  },\n  table: {\n    minWidth: 700\n  },\n  fab: {\n    position: 'absolute',\n    bottom: theme.spacing.unit * 4,\n    right: theme.spacing.unit * 4\n  }\n});\n\nfunction CompaniesTable(props) {\n  const { classes, companies, onAddButtonClick, onRecalculate, risks } = props;\n\n  return (\n    <Paper className={classes.root}>\n      <Table className={classes.table}>\n        <TableHead>\n          <TableRow>\n            <TableCell>Company name</TableCell>\n            <TableCell align=\"center\">Risk</TableCell>\n            <TableCell align=\"center\">Foundation date</TableCell>\n            <TableCell />\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {companies.map(company => {\n            const companyId = getId(company);\n            return (\n              <CompaniesTableItem\n                company={company}\n                key={companyId}\n                onRecalculate={onRecalculate}\n                risk={getByCompanyId(companyId, risks)}\n              />\n            );\n          })}\n        </TableBody>\n      </Table>\n      <Permit>\n        <Fab className={classes.fab} color=\"primary\" onClick={onAddButtonClick}>\n          <AddIcon />\n        </Fab>\n      </Permit>\n    </Paper>\n  );\n}\n\nCompaniesTable.propTypes = {\n  classes: PropTypes.object.isRequired,\n  companies: PropTypes.arrayOf(COMPANY_SHAPE),\n  onAddButtonClick: PropTypes.func,\n  onRecalculate: PropTypes.func,\n  risks: PropTypes.array\n};\n\nCompaniesTable.defaultProps = {\n  companies: [],\n  risks: []\n};\n\nexport default withStyles(styles)(CompaniesTable);\n","import { createContext } from 'react';\n\n\nconst AppContext = createContext({\n  services: {},\n});\n\nexport default AppContext;\n","import React, { useContext, useEffect, useState } from 'react';\n\nimport lensProp from 'ramda/es/lensProp';\nimport view from 'ramda/es/view';\nimport map from 'ramda/es/map';\nimport pipe from 'ramda/es/pipe';\n\nimport PageWithAppBar from '../../PageWithAppBar';\n\nimport CompaniesTable from './table/CompaniesTable';\nimport AppMenu from '../../menu/ui/AppMenu';\nimport AppContext from '../../AppContext';\n\nconst getRows = view(lensProp('rows'));\nconst mapDocs = map(view(lensProp('doc')));\nconst selectDocumentsList = pipe(\n  getRows,\n  mapDocs\n);\n\nfunction CompaniesTablePage({ history }) {\n  const [state, setState] = useState({\n    companies: [],\n    isLoading: false,\n    risks: []\n  });\n  const {\n    services: { companies: companiesService, risks: risksService }\n  } = useContext(AppContext);\n\n  const fetchCompanies = async () => {\n    setState({ isLoading: true });\n    const response = await companiesService.getCompanies();\n    setState({\n      companies: selectDocumentsList(response),\n      isLoading: false\n    });\n  };\n\n  const fetchRisks = async () => {\n    const response = await risksService.getList();\n    setState(state => ({ ...state, risks: selectDocumentsList(response) }));\n  };\n\n  useEffect(() => {\n    fetchCompanies();\n    risksService.subscribe(() => {\n      fetchRisks();\n    });\n    fetchRisks();\n    return () => {\n      risksService.unsubscribe();\n    };\n  }, []);\n\n  const onAddButtonClick = () => {\n    history.push({ pathname: '/company/' });\n  };\n\n  const onRecalculate = categoryId => {\n    risksService.calculate(categoryId);\n  };\n\n  return (\n    <AppMenu>\n      <PageWithAppBar isLoading={state.isLoading}>\n        <CompaniesTable\n          companies={state.companies}\n          onAddButtonClick={onAddButtonClick}\n          onRecalculate={onRecalculate}\n          risks={state.risks}\n        />\n      </PageWithAppBar>\n    </AppMenu>\n  );\n}\n\nexport default CompaniesTablePage;\n","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\nimport withStyles from '@material-ui/core/styles/withStyles';\n\nimport PageWithAppBar from './PageWithAppBar';\n\nconst styles = ({ spacing }) => ({\n  gridContainer: {\n    justifyContent: 'center',\n    paddingTop: spacing.unit * 4\n  },\n  formContainer: {\n    flex: 1,\n    maxWidth: '700px'\n  }\n});\n\nfunction FormPage({ children, classes, isLoading, title, ...restProps }) {\n  return (\n    <PageWithAppBar\n      {...restProps}\n      classes={{ gridContainer: classes.gridContainer }}\n      isLoading={isLoading}\n    >\n      <Grid\n        className={classes.formContainer}\n        container\n        direction=\"column\"\n        wrap=\"nowrap\"\n        spacing={40}\n      >\n        <Grid component={Typography} item variant=\"title\">\n          {title}\n        </Grid>\n        <Grid item>{isLoading ? null : children}</Grid>\n      </Grid>\n    </PageWithAppBar>\n  );\n}\n\nexport default withStyles(styles)(FormPage);\n","import cuid from \"cuid\";\nimport construct from \"ramda/es/construct\";\nimport view from \"ramda/es/view\";\nimport lensProp from \"ramda/es/lensProp\";\nimport toISOString from \"@logistics-calc/date-utils/src/toISOString\";\n\nfunction Payment(_ref) {\n  var date = _ref.date,\n      amount = _ref.amount,\n      description = _ref.description;\n  return {\n    _id: cuid(),\n    date: toISOString(date),\n    amount: amount,\n    description: description\n  };\n}\n\nexport var create = construct(Payment);\nexport var getId = view(lensProp(\"_id\"));\nexport var getDate = view(lensProp(\"date\"));\nexport var getAmount = view(lensProp(\"amount\"));\nexport var getDescription = view(lensProp(\"description\"));","import isValid from 'date-fns/is_valid';\n\nexport const required = value =>\n  Boolean(value) ? undefined : 'Value is required';\nexport const isDataValid = value =>\n  isValid(new Date(value)) ? undefined : 'Date should be in format MM/DD/YYYY';\nexport const isNumber = value =>\n  Number.isInteger(parseInt(value)) ? undefined : 'Should be a number';\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport map from 'ramda/es/map';\n\nimport Table from '@material-ui/core/es/Table/Table';\nimport TableHead from '@material-ui/core/es/TableHead/TableHead';\nimport TableCell from '@material-ui/core/es/TableCell/TableCell';\nimport TableRow from '@material-ui/core/es/TableRow/TableRow';\nimport TableBody from '@material-ui/core/es/TableBody/TableBody';\n\nimport {\n  getAmount,\n  getDate,\n  getDescription,\n  getId\n} from '@logistics-calc/companies/src/domain/models/Payment';\n\nexport default function PaymentHistory({ paymentHistory }) {\n  return (\n    <Table>\n      <TableHead>\n        <TableRow>\n          <TableCell align=\"center\">Date</TableCell>\n          <TableCell align=\"center\">Amount</TableCell>\n          <TableCell align=\"center\">Description</TableCell>\n        </TableRow>\n      </TableHead>\n      <TableBody>\n        {map(\n          row => (\n            <TableRow key={getId(row)}>\n              <TableCell align=\"center\">{getDate(row)}</TableCell>\n              <TableCell align=\"center\">{getAmount(row)}</TableCell>\n              <TableCell align=\"center\">{getDescription(row)}</TableCell>\n            </TableRow>\n          ),\n          paymentHistory\n        )}\n      </TableBody>\n    </Table>\n  );\n}\n\nPaymentHistory.propTypes = {\n  paymentHistory: PropTypes.array\n};\n\nPaymentHistory.defaultProps = {\n  paymentHistory: []\n};\n","import React from 'react';\nimport { Field, Form } from 'react-final-form';\n\nimport either from 'ramda/es/either';\n\nimport Grid from '@material-ui/core/Grid';\nimport TextField from '@material-ui/core/TextField';\nimport Add from '@material-ui/icons/Add';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport { required, isDataValid, isNumber } from '../../../form/ui/validators';\n\nexport default function PaymentForm({ onSubmit }) {\n  return (\n    <Form onSubmit={onSubmit}>\n      {({ handleSubmit, submitting }) => (\n        <Grid\n          alignItems=\"center\"\n          container\n          direction=\"row\"\n          spacing={32}\n          wrap=\"nowrap\"\n        >\n          <Grid item>\n            <Field name=\"date\" validate={either(required, isDataValid)}>\n              {({ input, meta: { error, touched } }) => (\n                <TextField\n                  {...input}\n                  error={touched && Boolean(error)}\n                  fullWidth\n                  helperText={touched && error}\n                  label=\"Date\"\n                  placeholder=\"2/25/2012\"\n                />\n              )}\n            </Field>\n          </Grid>\n          <Grid item>\n            <Field name=\"amount\" validate={either(required, isNumber)}>\n              {({ input, meta: { error, touched } }) => (\n                <TextField\n                  {...input}\n                  error={touched && Boolean(error)}\n                  fullWidth\n                  helperText={touched && error}\n                  label=\"Amount\"\n                  placeholder=\"1000\"\n                />\n              )}\n            </Field>\n          </Grid>\n          <Grid item>\n            <Field name=\"description\" validate={required}>\n              {({ input, meta: { error, touched } }) => (\n                <TextField\n                  {...input}\n                  error={touched && Boolean(error)}\n                  fullWidth\n                  helperText={touched && error}\n                  label=\"Description\"\n                />\n              )}\n            </Field>\n          </Grid>\n          <Grid item>\n            <IconButton\n              color=\"primary\"\n              disabled={submitting}\n              onClick={handleSubmit}\n              variant=\"outlined\"\n            >\n              <Add fontSize=\"small\" />\n            </IconButton>\n          </Grid>\n        </Grid>\n      )}\n    </Form>\n  );\n}\n","import React, { useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport { Form, Field } from 'react-final-form';\n\nimport append from 'ramda/es/append';\n\nimport Grid from '@material-ui/core/Grid';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography/Typography';\n\nimport formatDate from '@logistics-calc/date-utils/src/formatDate';\nimport {\n  getFoundationDate,\n  getPaymentHistory\n} from '@logistics-calc/companies/src/domain/models/Company';\nimport { create as createPayment } from '@logistics-calc/companies/src/domain/models/Payment';\n\nimport { required, isDataValid } from '../../../form/ui/validators';\nimport Permit from '../../../priveleges/Permit';\n\nimport PaymentHistory from '../payment-history/PaymentHistory';\nimport PaymentForm from '../payment-form/PaymentForm';\n\nimport { COMPANY_SHAPE } from '../constants';\n\nexport default function CompanyForm({ company, onReset, onSubmit }) {\n  const onSubmitAdapter = values => {\n    onSubmit({\n      ...values,\n      foundationDate: new Date(values.foundationDate),\n      charterCapital: Number(values.charterCapital)\n    });\n  };\n\n  const formattedCompany = useMemo(() => {\n    if (!company) {\n      return company;\n    }\n\n    return {\n      ...company,\n      foundationDate: formatDate(getFoundationDate(company)),\n      paymentHistory: getPaymentHistory(company)\n    };\n  }, [company]);\n\n  return (\n    <Form initialValues={formattedCompany} onSubmit={onSubmitAdapter}>\n      {({ handleSubmit, submitting }) => (\n        <Grid\n          component=\"form\"\n          container\n          direction=\"column\"\n          onReset={onReset}\n          onSubmit={handleSubmit}\n          spacing={40}\n        >\n          <Grid item>\n            <Field name=\"name\" validate={required}>\n              {({ input, meta: { error, touched } }) => (\n                <TextField\n                  {...input}\n                  autoFocus\n                  error={touched && Boolean(error)}\n                  fullWidth\n                  helperText={touched && error}\n                  label=\"Name\"\n                />\n              )}\n            </Field>\n          </Grid>\n          <Grid item>\n            <Field\n              name=\"foundationDate\"\n              validate={value => required(value) || isDataValid(value)}\n            >\n              {({ input, meta: { error, touched } }) => (\n                <TextField\n                  {...input}\n                  error={touched && Boolean(error)}\n                  fullWidth\n                  helperText={touched && error}\n                  label=\"Foundation date\"\n                  placeholder=\"2/25/2012\"\n                />\n              )}\n            </Field>\n          </Grid>\n          <Grid item>\n            <Field name=\"charterCapital\" validate={required}>\n              {({ input, meta: { error, touched } }) => (\n                <TextField\n                  {...input}\n                  error={touched && Boolean(error)}\n                  fullWidth\n                  helperText={touched && error}\n                  label=\"Charter capital\"\n                  type=\"number\"\n                />\n              )}\n            </Field>\n          </Grid>\n\n          <Field name=\"paymentHistory\">\n            {({ input: { value, onChange } }) => (\n              <>\n                <Permit>\n                  <Grid item>\n                    <Typography variant=\"caption\">New payment</Typography>\n\n                    <PaymentForm\n                      onSubmit={values => {\n                        const payment = createPayment({\n                          date: new Date(values.date),\n                          amount: Number(values.amount),\n                          description: values.description\n                        });\n                        onChange(append(payment, value));\n                      }}\n                    />\n                  </Grid>\n                </Permit>\n\n                <Grid item>\n                  <Typography variant=\"caption\">Payment history</Typography>\n                  <PaymentHistory paymentHistory={value} />\n                </Grid>\n              </>\n            )}\n          </Field>\n\n          <Grid item>\n            <Grid container justify=\"flex-end\" spacing={16}>\n              <Grid item>\n                <Button type=\"reset\">Cancel</Button>\n              </Grid>\n              <Permit>\n                <Grid item>\n                  <Button\n                    color=\"primary\"\n                    disabled={submitting}\n                    type=\"submit\"\n                    variant=\"contained\"\n                  >\n                    Submit\n                  </Button>\n                </Grid>\n              </Permit>\n            </Grid>\n          </Grid>\n        </Grid>\n      )}\n    </Form>\n  );\n}\n\nCompanyForm.propTypes = {\n  company: COMPANY_SHAPE,\n  onReset: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired\n};\n","import React, { useContext, useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport SimpleAppBar from \"../../SimpleAppBar\";\n\nimport AppMenu from \"../../menu/ui/AppMenu\";\nimport FormPage from \"../../FormPage\";\nimport CompanyForm from \"./form/CompanyForm\";\nimport AppContext from \"../../AppContext\";\n\n\nfunction EditCompanyPage({ match, history }) {\n  const [state, setState] = useState({\n    company: null,\n    isLoading: true\n  });\n  const { services: { companies: companiesService } } = useContext(AppContext);\n\n  const companyId = match.params.id;\n  const { company, isLoading } = state;\n\n  const companyName = isLoading ? '' : company.name;\n\n  const fetchCompany = async () => {\n    setState(state => ({ ...state, isLoading: true }));\n    try {\n      const result = await companiesService.getCompanyById(companyId);\n      setState(state => ({\n        ...state,\n        company: result\n      }));\n    } finally {\n      setState(state => ({\n        ...state,\n        isLoading: false\n      }));\n    }\n  };\n\n  useEffect(() => {\n    fetchCompany();\n  }, []);\n\n  const appBar = (\n    <SimpleAppBar\n      title={isLoading ? \"Please wait...\" : companyName}\n    />\n  );\n\n  const onReset = (e) => {\n    e.preventDefault();\n    history.replace({ pathname: '/' });\n  };\n\n  const onSubmit = async (values) => {\n    await companiesService.editCompany(company, values);\n    history.replace({ pathname: '/' });\n  };\n\n  return (\n    <AppMenu>\n      <FormPage\n        appBar={appBar}\n        isLoading={state.isLoading}\n        title={`Edit ${companyName}`}\n      >\n        <CompanyForm\n          company={company}\n          onReset={onReset}\n          onSubmit={onSubmit}\n        />\n      </FormPage>\n    </AppMenu>\n  );\n}\n\nEditCompanyPage.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string.isRequired\n    }).isRequired\n  }).isRequired,\n  history: PropTypes.shape({\n    goBack: PropTypes.func,\n  }).isRequired,\n};\n\nexport default EditCompanyPage;\n","import React, { useContext } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport SimpleAppBar from \"../../SimpleAppBar\";\n\nimport AppMenu from \"../../menu/ui/AppMenu\";\nimport FormPage from \"../../FormPage\";\nimport CompanyForm from \"./form/CompanyForm\";\nimport AppContext from \"../../AppContext\";\n\n\nfunction CreateCompanyPage({ history }) {\n  const { services: { companies } } = useContext(AppContext);\n\n  const appBar = (\n    <SimpleAppBar\n      title=\"Create new company\"\n    />\n  );\n\n  const onReset = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    history.replace('/');\n  };\n\n  const onSubmit = async (values) => {\n    await companies.createCompany(values);\n    history.replace('/');\n  };\n\n  return (\n    <AppMenu>\n      <FormPage\n        appBar={appBar}\n        title={`Create new company`}\n      >\n        <CompanyForm\n          onReset={onReset}\n          onSubmit={onSubmit}\n        />\n      </FormPage>\n    </AppMenu>\n  );\n}\n\nCreateCompanyPage.propTypes = {\n  history: PropTypes.shape({\n    goBack: PropTypes.func,\n  }).isRequired,\n};\n\nexport default CreateCompanyPage;\n","import _regeneratorRuntime from \"/Users/dzianis_roi/Projects/logistics-risks-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/dzianis_roi/Projects/logistics-risks-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport PouchDb from 'pouchdb';\n\nvar CompaniesStore = function CompaniesStore(_ref) {\n  var dbUrl = _ref.dbUrl;\n  var db = new PouchDb(\"\".concat(dbUrl, \"/companies\"));\n  return {\n    getList: function getList() {\n      return db.allDocs({\n        include_docs: true\n      });\n    },\n    getById: function () {\n      var _getById = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(id) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", db.get(id));\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getById(_x) {\n        return _getById.apply(this, arguments);\n      }\n\n      return getById;\n    }(),\n    saveItem: function () {\n      var _saveItem = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(item) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                return _context2.abrupt(\"return\", db.post(item));\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function saveItem(_x2) {\n        return _saveItem.apply(this, arguments);\n      }\n\n      return saveItem;\n    }(),\n    updateItem: function () {\n      var _updateItem = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(item) {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                return _context3.abrupt(\"return\", db.put(item));\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function updateItem(_x3) {\n        return _updateItem.apply(this, arguments);\n      }\n\n      return updateItem;\n    }()\n  };\n};\n\nexport default CompaniesStore;","import { create, update } from \"../models/Company\";\n\nvar CompaniesService = function CompaniesService(_ref) {\n  var companiesStore = _ref.companiesStore;\n  return {\n    createCompany: function createCompany(data) {\n      var company = create(data);\n      return companiesStore.saveItem(company);\n    },\n    editCompany: function editCompany(company, data) {\n      var updatedCompany = update(data, company);\n      return companiesStore.updateItem(updatedCompany);\n    },\n    getCompanies: function getCompanies() {\n      return companiesStore.getList();\n    },\n    getCompanyById: function getCompanyById(id) {\n      return companiesStore.getById(id);\n    }\n  };\n};\n\nexport default CompaniesService;","export default class UserNotFoundError extends Error {\n  constructor(login) {\n    super(`User \"${login}\" doesn't exist`);\n  }\n}\n","export default class IncorrectPasswordError extends Error {\n  constructor() {\n    super(`Invalid password`);\n  }\n}\n","import UserNotFoundError from '../errors/UserNotFoundError';\nimport IncorrectPasswordError from '../errors/IncorrectPasswordError';\n\nfunction authenticate(values) {\n  return new Promise((resolve, reject) => {\n    const { login, password } = values;\n\n    if (login !== 'admin' && login !== 'user') {\n      reject(new UserNotFoundError(login));\n      return;\n    }\n\n    if (\n      (login === 'admin' && password !== 'admin') ||\n      (login === 'user' && password !== 'user')\n    ) {\n      reject(new IncorrectPasswordError());\n      return;\n    }\n\n    localStorage.setItem('isAuthenticated', 'true');\n    localStorage.setItem('isAdmin', login === 'admin');\n\n    resolve();\n  });\n}\n\nexport default authenticate;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Form, Field } from \"react-final-form\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { required } from '../../../form/ui/validators';\n\n\nfunction LoginForm({ className, onSubmit }) {\n  return (\n    <Form onSubmit={onSubmit}>\n      {({ handleSubmit, submitError, submitting }) => (\n        <Grid\n          alignContent=\"center\"\n          className={className}\n          component=\"form\"\n          container\n          onSubmit={handleSubmit}\n          spacing={40}\n        >\n          {submitError ? (\n            <Grid\n              color=\"error\"\n              component={Typography}\n              item\n              xs={12}\n            >\n              {submitError}\n            </Grid>\n          ) : null}\n\n          <Grid item xs={12}>\n            <Field\n              name=\"login\"\n              validate={required}\n            >\n              {({ input, meta: { error, touched, submitError } }) => (\n                <TextField\n                  {...input}\n                  autoFocus\n                  error={touched && Boolean(error || submitError)}\n                  fullWidth\n                  helperText={touched && (error || submitError)}\n                  placeholder=\"Login\"\n                />\n              )}\n            </Field>\n          </Grid>\n\n          <Grid item xs={12}>\n            <Field\n              name=\"password\"\n              validate={required}\n            >\n              {({ input, meta: { error, touched } }) => (\n                <TextField\n                  {...input}\n                  error={touched && Boolean(error)}\n                  fullWidth\n                  helperText={touched && error}\n                  placeholder=\"Password\"\n                  type=\"password\"\n                />\n              )}\n            </Field>\n          </Grid>\n\n          <Grid item xs={12}>\n            <Button\n              color=\"primary\"\n              disabled={submitting}\n              fullWidth\n              type=\"submit\"\n              variant=\"contained\"\n            >\n              Submit\n            </Button>\n          </Grid>\n        </Grid>\n      )}\n    </Form>\n  );\n}\n\nLoginForm.propTypes = {\n  className: PropTypes.string,\n  onSubmit: PropTypes.func.isRequired\n};\n\nLoginForm.defaultProps = {\n  className: \"\"\n};\n\nexport default LoginForm;\n","import React from \"react\";\nimport withStyles from \"@material-ui/core/styles/withStyles\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { FORM_ERROR } from \"final-form\";\n\nimport Page from '../../Page';\n\nimport authenticate from '../domain/services/authenticate';\n\nimport LoginForm from './form/LoginForm';\nimport UserNotFoundError from \"../domain/errors/UserNotFoundError\";\nimport IncorrectPasswordError from \"../domain/errors/IncorrectPasswordError\";\n\n\nconst styles = (theme) => ({\n  root: {\n    paddingTop: theme.spacing.unit * 8,\n  },\n  form: {\n    margin: `${theme.spacing.unit * 8}px auto`,\n    maxWidth: '360px',\n  }\n});\n\nfunction LoginPage({ classes, history }) {\n  const onSubmit = async (values) => {\n    try {\n      await authenticate(values);\n      history.replace({ pathname: '/' });\n    } catch(e) {\n      if (e instanceof UserNotFoundError) {\n        return { login: e.message };\n      } else if (e instanceof IncorrectPasswordError) {\n        return { [FORM_ERROR]: 'Incorrect credentials' };\n      }\n\n      throw e;\n    }\n  };\n\n  return (\n    <Page classes={{ root: classes.root }}>\n      <Typography\n        align=\"center\"\n        paragraph={false}\n        variant=\"title\"\n      >\n        Welcome\n      </Typography>\n\n      <Typography\n        align=\"center\"\n        color=\"textSecondary\"\n      >\n        to\n      </Typography>\n\n      <Typography\n        align=\"center\"\n        color=\"primary\"\n        variant=\"headline\"\n      >\n        Logistics Risks Calculator\n      </Typography>\n\n      <LoginForm\n        className={classes.form}\n        onSubmit={onSubmit}\n      />\n    </Page>\n  );\n}\n\nexport default withStyles(styles)(LoginPage);\n","function isAuthenticated() {\n  return localStorage.getItem('isAuthenticated') === 'true';\n}\n\nexport default isAuthenticated;\n","import React from 'react';\nimport { Redirect } from 'react-router-dom';\n\nimport isAuthenticated from \"../domain/services/isAuthenticated\";\n\nfunction SecureRoute({ children }) {\n  if (!isAuthenticated()) {\n    return (\n      <Redirect\n        to={{\n          pathname: '/login',\n        }}\n      />\n    )\n  }\n\n  return children;\n}\n\nexport default SecureRoute;\n","import React from 'react';\nimport { HashRouter as Router, Route, Switch } from 'react-router-dom';\n\nimport RisksStore from '@logistics-calc/risks/src/domain/data/RisksStore';\nimport RisksService from '@logistics-calc/risks/src/domain/services/RisksService';\n\nimport CompaniesTablePage from './companies/ui/CompaniesTablePage';\nimport EditCompanyPage from './companies/ui/EditCompanyPage';\nimport CreateCompanyPage from './companies/ui/CreateCompanyPage';\nimport CompaniesStore from '@logistics-calc/companies/src/domain/data/CompaniesStore';\nimport CompaniesService from '@logistics-calc/companies/src/domain/services/CompaniesService';\nimport LoginPage from './auth/ui/LoginPage';\nimport SecureRoute from './auth/ui/SecureRoute';\nimport AppContext from './AppContext';\n\nimport './App.css';\n\nconst dbUrl =\n  'https://609ce380-698c-48ed-a70f-6eefc8446f54-bluemix:ee5cf67260942c15b000fceeede84f7762628d5fbdf85a83d26bf4225656e333@609ce380-698c-48ed-a70f-6eefc8446f54-bluemix.cloudantnosqldb.appdomain.cloud';\n\nconst companiesStore = CompaniesStore({ dbUrl });\nconst companiesService = CompaniesService({ companiesStore });\nconst risksStore = RisksStore({ dbUrl });\nconst risksService = RisksService({ risksStore });\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <AppContext.Provider\n        value={{\n          services: { companies: companiesService, risks: risksService }\n        }}\n      >\n        <Router>\n          <Switch>\n            <Route path=\"/login\" component={LoginPage} />\n\n            <SecureRoute>\n              <Route exact path=\"/\" component={CompaniesTablePage} />\n              <Route exact path=\"/company/\" component={CreateCompanyPage} />\n              <Route path=\"/company/:id\" component={EditCompanyPage} />\n            </SecureRoute>\n          </Switch>\n        </Router>\n      </AppContext.Provider>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}