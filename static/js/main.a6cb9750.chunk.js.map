{"version":3,"sources":["../packages/risks/src/domain/data/RisksStore.js","../packages/date-utils/src/toISOString.js","../packages/risks/src/domain/models/Risk.js","../packages/risks/src/domain/services/RisksService.js","auth/domain/services/logout.js","menu/ui/AppMenuContext.js","menu/ui/AppMenu.js","SimpleAppBar.js","Page.js","PageWithAppBar.js","../packages/companies/src/domain/models/Company.js","../packages/risks/src/domain/models/RisksCollection.js","priveleges/Permit.js","companies/ui/constants.js","../packages/date-utils/src/formatDate.js","companies/ui/table/CompaniesTableItem.js","../packages/risks/src/domain/services/isHighRisk.js","companies/ui/table/CompaniesTable.js","AppContext.js","companies/ui/CompaniesTablePage.js","FormPage.js","../packages/companies/src/domain/models/Payment.js","form/ui/validators.js","companies/ui/payment-history/PaymentHistory.js","companies/ui/payment-form/PaymentForm.js","companies/ui/form/CompanyForm.js","companies/ui/EditCompanyPage.js","companies/ui/CreateCompanyPage.js","../packages/companies/src/domain/data/CompaniesStore.js","../packages/companies/src/domain/services/CompaniesService.js","auth/domain/errors/UserNotFoundError.js","auth/domain/errors/IncorrectPasswordError.js","auth/domain/services/authenticate.js","auth/ui/form/LoginForm.js","auth/ui/LoginPage.js","auth/domain/services/isAuthenticated.js","auth/ui/SecureRoute.js","App.js","serviceWorker.js","index.js"],"names":["index_browser_es","plugin","lib_index_browser_es","data_RisksStore","_ref","dbUrl","db","concat","getList","allDocs","include_docs","getByCompanyId","_getByCompanyId","Object","asyncToGenerator","regenerator_default","a","mark","_callee","companyId","getFirstResult","wrap","_context","prev","next","pipe","view","lensProp","head","abrupt","find","selector","then","stop","_x","apply","this","arguments","saveItem","_saveItem","_callee2","item","_context2","post","_x2","updateItem","_updateItem","_callee3","_context3","put","_x3","toISOString","date","Risk_create","value","createdDate","Date","lastUpdatedDate","Risk_update","_ref2","risk","objectSpread","getCompanyId","getValue","modelUrl","services_RisksService","listener","risksStore","calculate","_calculate","model","xs","ys","tf_esm","sent","t0","add","dense","units","inputShape","compile","loss","optimizer","fit","epochs","save","predict","min","max","Math","ceil","floor","random","subscribe","l","unsubscribe","logout","localStorage","removeItem","AppMenuContext","createContext","openMenu","AppMenu","classes","children","history","_useState","useState","_useState2","slicedToArray","isOpened","setIsOpened","react_default","createElement","ui_AppMenuContext","Provider","Drawer_default","open","onClose","List_default","className","list","ListItem_default","button","onClick","replace","pathname","defaultProps","withRouter","withStyles","width","SimpleAppBar","props","title","useContext","Fragment","AppBar_default","position","Toolbar_default","IconButton_default","menuButton","color","aria-label","Menu_default","Typography_default","variant","ui_AppMenu","theme","flexGrow","marginLeft","marginRight","buttonIconLeft","spacing","unit","root","display","flexFlow","height","classnames","PageWithAppBar","appBar","isLoading","src_Page","gridContainer","CircularProgress_default","progress","src_SimpleAppBar","maxHeight","overflow","alignSelf","margin","Company_getId","getName","getFoundationDate","getPaymentHistory","defaultTo","RisksCollection_getByCompanyId","risks","Permit","getItem","PropTypes","shape","charterCapital","number","isRequired","_id","string","name","lastUpdated","instanceOf","foundationDate","formatDate","format_default","useStyles","makeStyles","body","backgroundColor","isHighRisk","CompaniesTableItem","company","onRecalculate","getId","TableRow_default","TableCell_default","component","scope","align","Tooltip_default","react_router_dom","to","Edit_default","fontSize","Refresh_default","CompaniesTable","companies","onAddButtonClick","Paper_default","Table_default","table","TableHead_default","TableBody_default","map","table_CompaniesTableItem","key","Fab_default","fab","Add_default","overflowX","minWidth","bottom","right","AppContext","services","getRows","mapDocs","selectDocumentsList","CompaniesTablePage","state","setState","_useContext$services","companiesService","risksService","fetchCompanies","response","getCompanies","fetchRisks","_ref3","useEffect","src_PageWithAppBar","table_CompaniesTable","push","categoryId","justifyContent","paddingTop","formContainer","flex","maxWidth","restProps","objectWithoutProperties","assign","Grid_default","container","direction","Typography","Payment_create","construct","amount","description","cuid_default","Payment_getId","getDate","getAmount","getDescription","required","Boolean","undefined","isDataValid","isValid","isNumber","Number","isInteger","parseInt","PaymentHistory","paymentHistory","Table_Table","TableHead_TableHead","TableRow_TableRow","TableCell_TableCell","TableBody_TableBody","row","PaymentForm","onSubmit","react_final_form_es","handleSubmit","submitting","alignItems","validate","either","input","_ref3$meta","meta","error","touched","TextField_default","fullWidth","helperText","label","placeholder","_ref4","_ref4$meta","_ref5","_ref5$meta","disabled","CompanyForm","onReset","formattedCompany","useMemo","initialValues","values","autoFocus","type","_ref6","_ref6$input","onChange","Typography_Typography_default","payment","createPayment","append","justify","Button_default","EditCompanyPage","match","params","id","companyName","fetchCompany","result","getCompanyById","finish","editCompany","src_FormPage","e","preventDefault","CreateCompanyPage","createCompany","stopPropagation","data_CompaniesStore","getById","_getById","get","services_CompaniesService","companiesStore","data","Company_create","updatedCompany","Company_update","UserNotFoundError","login","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","Error","IncorrectPasswordError","authenticate","Promise","resolve","reject","password","setItem","LoginForm","submitError","alignContent","form","message","defineProperty","FORM_ERROR","paragraph","form_LoginForm","isAuthenticated","SecureRoute","react_router","CompaniesService","CompaniesStore","RisksService","RisksStore","App","src_AppContext","path","LoginPage","ui_SecureRoute","exact","window","location","hostname","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"6dAQAA,EAAA,EAAOC,OAAQC,EAAA,GAEf,IA0FeC,EA1FD,SAAAC,GACd,IAAAC,EAAAD,EAAAC,MACAC,EAAA,IAAeN,EAAA,EAAO,GAAAO,OAAAF,EAAA,WACtB,OACAG,QAAA,WACA,OAAAF,EAAAG,QAAA,CACAC,cAAA,KAGAC,eAAA,WACA,IAAAC,EAA4BC,OAAAC,EAAA,EAAAD,CAEtBE,EAAAC,EAAmBC,KAAA,SAAAC,EAAAC,GACzB,IAAAC,EACA,OAAeL,EAAAC,EAAmBK,KAAA,SAAAC,GAClC,OACA,OAAAA,EAAAC,KAAAD,EAAAE,MACA,OAEA,OADAJ,EAAiCP,OAAAY,EAAA,EAAAZ,CAAKA,OAAAa,EAAA,EAAAb,CAAKA,OAAAc,EAAA,EAAAd,CAAQ,SAAWe,EAAA,GAC9DN,EAAAO,OAAA,SAAAvB,EAAAwB,KAAA,CACAC,SAAA,CACAZ,eAEiBa,KAAAZ,IAEjB,OACA,UACA,OAAAE,EAAAW,SAGSf,MAOT,OAJA,SAAAgB,GACA,OAAAtB,EAAAuB,MAAAC,KAAAC,YAzBA,GA8BAC,SAAA,WACA,IAAAC,EAAsB1B,OAAAC,EAAA,EAAAD,CAEhBE,EAAAC,EAAmBC,KAAA,SAAAuB,EAAAC,GACzB,OAAe1B,EAAAC,EAAmBK,KAAA,SAAAqB,GAClC,OACA,OAAAA,EAAAnB,KAAAmB,EAAAlB,MACA,OACA,OAAAkB,EAAAb,OAAA,SAAAvB,EAAAqC,KAAAF,IAEA,OACA,UACA,OAAAC,EAAAT,SAGSO,MAOT,OAJA,SAAAI,GACA,OAAAL,EAAAJ,MAAAC,KAAAC,YAnBA,GAwBAQ,WAAA,WACA,IAAAC,EAAwBjC,OAAAC,EAAA,EAAAD,CAElBE,EAAAC,EAAmBC,KAAA,SAAA8B,EAAAN,GACzB,OAAe1B,EAAAC,EAAmBK,KAAA,SAAA2B,GAClC,OACA,OAAAA,EAAAzB,KAAAyB,EAAAxB,MACA,OACA,OAAAwB,EAAAnB,OAAA,SAAAvB,EAAA2C,IAAAR,IAEA,OACA,UACA,OAAAO,EAAAf,SAGSc,MAOT,OAJA,SAAAG,GACA,OAAAJ,EAAAX,MAAAC,KAAAC,YAnBA,qBCzEe,SAAAc,EAAAC,GACf,OAAAA,EAAAD,cCGO,IAAIE,EAAM,SAAAjD,GACjB,IAAAe,EAAAf,EAAAe,UAEA,OACAmC,MAFAlD,EAAAkD,MAGAnC,YACAoC,YAAiBJ,EAAW,IAAAK,MAC5BC,gBAAA,OAGWC,EAAM,SAAAC,EAAAC,GACjB,IAAAN,EAAAK,EAAAL,MACA,OAASzC,OAAAgD,EAAA,EAAAhD,CAAa,GAAG+C,EAAA,CACzBN,QACAG,gBAAqBN,EAAW,IAAAK,SAIzBM,GADYjD,OAAAa,EAAA,EAAAb,CAAKA,OAAAc,EAAA,EAAAd,CAAQ,QACNA,OAAAa,EAAA,EAAAb,CAAKA,OAAAc,EAAA,EAAAd,CAAQ,eAChCkD,EAAelD,OAAAa,EAAA,EAAAb,CAAKA,OAAAc,EAAA,EAAAd,CAAQ,UCnBnCmD,EAAA,uCAkHeC,EA1GC,SAAA7D,GAChB,IACA8D,EADAC,EAAA/D,EAAA+D,WAEA,OACAC,UAAA,WACA,IAAAC,EAAuBxD,OAAAC,EAAA,EAAAD,CAEjBE,EAAAC,EAAmBC,KAAA,SAAAC,EAAAC,GACzB,IAAAmD,EAAAC,EAAAC,EAAAZ,EAAAN,EACA,OAAevC,EAAAC,EAAmBK,KAAA,SAAAC,GAClC,OACA,OAAAA,EAAAC,KAAAD,EAAAE,MACA,OAGA,OAFAF,EAAAC,KAAA,EACAD,EAAAE,KAAA,EACuBiD,EAAA,EAAkBT,GAEzC,OACAM,EAAAhD,EAAAoD,KACApD,EAAAE,KAAA,GACA,MAEA,OAeA,OAdAF,EAAAC,KAAA,EACAD,EAAAqD,GAAArD,EAAA,UACAgD,EAAwBG,EAAA,KACxBG,IAA0BH,EAAA,EAASI,MAAA,CACnCC,MAAA,EACAC,WAAA,OAEAT,EAAAU,QAAA,CACAC,KAAA,mBACAC,UAAA,QAEAX,EAAqBE,EAAA,EAAW,yBAChCD,EAAqBC,EAAA,EAAW,yBAChCnD,EAAAE,KAAA,GACA8C,EAAAa,IAAAZ,EAAAC,EAAA,CACAY,OAAA,MAGA,QAEA,OADA9D,EAAAE,KAAA,GACA8C,EAAAe,KAAArB,GAEA,QAGA,OAFAM,EAAAgB,QAA8Bb,EAAA,EAAW,cACzCnD,EAAAE,KAAA,GACA2C,EAAAxD,eAAAQ,GAEA,QAIA,GAHAyC,EAAAtC,EAAAoD,KAzDAa,EA0DA,GA1DAC,EA0DA,IAzDAD,EAAAE,KAAAC,KAAAH,GACAC,EAAAC,KAAAE,MAAAH,GAwDAlC,EAvDAmC,KAAAE,MAAAF,KAAAG,UAAAJ,EAAAD,EAAA,IAAAA,GAyDA3B,EAAA,CACAtC,EAAAE,KAAA,GACA,MAIA,OADAF,EAAAE,KAAA,GACA2C,EAAAtB,WAA6Ca,EAAM,CACnDJ,SACiBM,IAEjB,QACAtC,EAAAE,KAAA,GACA,MAEA,QAEA,OADAF,EAAAE,KAAA,GACA2C,EAAA7B,SAA2Ce,EAAM,CACjDC,QACAnC,eAGA,QACA+C,GACAA,IAGA,QACA,UACA,OAAA5C,EAAAW,OAxFA,IAAAsD,EAAAC,GA2FStE,EAAA,iBAOT,OAJA,SAAAgB,GACA,OAAAmC,EAAAlC,MAAAC,KAAAC,YArFA,GA0FA7B,QAAA,WACA,OAAA2D,EAAA3D,WAEAqF,UAAA,SAAAC,GACA5B,EAAA4B,GAEAC,YAAA,WACA7B,EAAA,iNC7Ge8B,MAJf,WACEC,aAAaC,WAAW,oBCGXC,EAFQC,wBAAc,CAAEC,SAAU,OCiBjD,SAASC,EAATlG,GAAiD,IAA9BmG,EAA8BnG,EAA9BmG,QAASC,EAAqBpG,EAArBoG,SAAUC,EAAWrG,EAAXqG,QAAWC,EACfC,oBAAS,GADMC,EAAA/F,OAAAgG,EAAA,EAAAhG,CAAA6F,EAAA,GACxCI,EADwCF,EAAA,GAC9BG,EAD8BH,EAAA,GAY/C,OACEI,EAAAhG,EAAAiG,cAACC,EAAeC,SAAhB,CACE7D,MAAO,CACL+C,SAZW,WACfU,GAAY,MAcVC,EAAAhG,EAAAiG,cAACG,EAAApG,EAAD,CACEqG,KAAMP,EACNQ,QAAS,kBAAMP,GAAY,KAE3BC,EAAAhG,EAAAiG,cAACM,EAAAvG,EAAD,CAAMwG,UAAWjB,EAAQkB,MACvBT,EAAAhG,EAAAiG,cAACS,EAAA1G,EAAD,CAAU2G,QAAM,EAACC,QAhBH,WACpB5B,IACAS,EAAQoB,QAAQ,CAAEC,SAAU,aActB,YAKFtB,GAYRF,EAAQyB,aAAe,CACrBV,MAAM,GAGOW,mBAAWC,IAlDX,CACbR,KAAM,CACJS,MAAO,UAgDeD,CAAmB3B,ICvC7C,SAAS6B,GAAaC,GAAO,IACnB7B,EAAmB6B,EAAnB7B,QAAS8B,EAAUD,EAAVC,MACThC,EAAaiC,qBAAWnC,GAAxBE,SAER,OACEW,EAAAhG,EAAAiG,cAAAD,EAAAhG,EAAAuH,SAAA,KACEvB,EAAAhG,EAAAiG,cAACuB,EAAAxH,EAAD,CAAQyH,SAAS,UACfzB,EAAAhG,EAAAiG,cAACyB,EAAA1H,EAAD,KACEgG,EAAAhG,EAAAiG,cAAC0B,EAAA3H,EAAD,CACEwG,UAAWjB,EAAQqC,WACnBC,MAAM,UACNC,aAAW,OACXlB,QAASvB,GAETW,EAAAhG,EAAAiG,cAAC8B,EAAA/H,EAAD,OAEFgG,EAAAhG,EAAAiG,cAAC+B,EAAAhI,EAAD,CAAYiI,QAAQ,KAAKJ,MAAM,UAAUrB,UAAWjB,EAAQ8B,OACzDA,KAIPrB,EAAAhG,EAAAiG,cAACiC,GAAD,OAUNf,GAAaJ,aAAe,CAC1BM,MAAO,8BAGMJ,4BAhDA,SAAAkB,GAAK,MAAK,CACvBd,MAAO,CACLe,SAAU,GAEZR,WAAY,CACVS,YAAa,GACbC,YAAa,IAEfC,eAAgB,CACdD,YAAaH,EAAMK,QAAQC,QAuChBxB,CAAmBE,uBCzCnBF,4BAbA,CACbyB,KAAM,CACJC,QAAS,OACTC,SAAU,gBACVR,SAAU,EACVS,OAAQ,SAQG5B,CAJf,SAAA7H,GAAgD,IAAhCoH,EAAgCpH,EAAhCoH,UAAWjB,EAAqBnG,EAArBmG,QAASC,EAAYpG,EAAZoG,SAClC,OAAOQ,EAAAhG,EAAAiG,cAAA,OAAKO,UAAWsC,KAAWvD,EAAQmD,KAAMlC,IAAchB,KCQhE,SAASuD,GAAT3J,GAA6E,IAAnD4J,EAAmD5J,EAAnD4J,OAAQxC,EAA2CpH,EAA3CoH,UAAWjB,EAAgCnG,EAAhCmG,QAASC,EAAuBpG,EAAvBoG,SAAUyD,EAAa7J,EAAb6J,UAC9D,OACEjD,EAAAhG,EAAAiG,cAACiD,GAAD,CAAM1C,UAAWA,GACbwC,EACFhD,EAAAhG,EAAAiG,cAAA,OAAKO,UAAWjB,EAAQ4D,eACrBF,EAAYjD,EAAAhG,EAAAiG,cAACmD,EAAApJ,EAAD,CAAkBwG,UAAWjB,EAAQ8D,WAAc7D,IAcxEuD,GAAehC,aAAe,CAC5BiC,OAAQhD,EAAAhG,EAAAiG,cAACqD,GAAD,MACRL,WAAW,GAGEhC,4BAtCA,CACbkC,cAAe,CACbR,QAAS,OACTP,SAAU,EACVmB,UAAW,OACXC,SAAU,QAEZH,SAAU,CACRI,UAAW,SACXC,OAAQ,SA6BGzC,CAAmB8B,qLCfvBY,GAAQ9J,OAAAa,EAAA,EAAAb,CAAKA,OAAAc,EAAA,EAAAd,CAAQ,QACzB+J,GAAc/J,OAAAa,EAAA,EAAAb,CAAKA,OAAAc,EAAA,EAAAd,CAAQ,SAC3BgK,GAAwBhK,OAAAa,EAAA,EAAAb,CAAKA,OAAAc,EAAA,EAAAd,CAAQ,mBACrCiK,GAAwBjK,OAAAY,EAAA,EAAAZ,CAAKA,OAAAa,EAAA,EAAAb,CAAKA,OAAAc,EAAA,EAAAd,CAAQ,mBAAqBA,OAAAkK,GAAA,EAAAlK,CAAS,KClCpEmK,GAAc,SAAA7J,EAAA8J,GACzB,OAAAA,EAAAnJ,KAAA,SAAA8B,GACA,OAAWE,EAAYF,KAAAzC,KCHR,SAAS+J,GAAT9K,GAA8B,IAAZoG,EAAYpG,EAAZoG,SAC/B,MAA2C,SAApCP,aAAakF,QAAQ,WAAwB3E,EAAW,gCCCpC4E,KAAUC,MAAM,CAC3CC,eAAgBF,KAAUG,OAAOC,WACjCC,IAAKL,KAAUM,OAAOF,WACtBG,KAAMP,KAAUM,OAAOF,WACvBI,YAAaR,KAAUS,WAAWrI,MAClCsI,eAAgBV,KAAUM,OAAOF,yGCNpB,SAAAO,GAAA3I,GACf,OAAS4I,KAAM5I,EAAA,cCqBf,IAAM6I,GAAYC,aAAW,CAC3BC,KAAM,CACJC,gBAAiB,SAAAhM,GAAc,IAAXwD,EAAWxD,EAAXwD,KAClB,OAAKA,ECpBI,SAAAA,GACf,OAASG,EAAQH,GAAA,GDuBJyI,CAAWzI,GAAQ,MAAQ,QAHzB,SA8CA0I,OAtCf,SAA4BlE,GAAO,IACzBmE,EAAiCnE,EAAjCmE,QAASC,EAAwBpE,EAAxBoE,cAAe5I,EAASwE,EAATxE,KAC1BzC,EAAYsL,GAAMF,GAClBhG,EAAU0F,GAAU7D,GAC1B,OACEpB,EAAAhG,EAAAiG,cAACyF,GAAA1L,EAAD,KACEgG,EAAAhG,EAAAiG,cAAC0F,GAAA3L,EAAD,CAAW4L,UAAU,KAAKC,MAAM,OAC7BjC,GAAQ2B,IAEXvF,EAAAhG,EAAAiG,cAAC0F,GAAA3L,EAAD,CAAW8L,MAAM,SAASvG,QAASA,GAChC3C,EAAI,GAAArD,OAAMwD,EAASH,GAAf,KAA0B,KAEjCoD,EAAAhG,EAAAiG,cAAC0F,GAAA3L,EAAD,CAAW8L,MAAM,UACdf,GAAWlB,GAAkB0B,KAEhCvF,EAAAhG,EAAAiG,cAAC0F,GAAA3L,EAAD,CAAW8L,MAAM,SACf9F,EAAAhG,EAAAiG,cAAC8F,GAAA/L,EAAD,CAASqH,MAAM,QACbrB,EAAAhG,EAAAiG,cAAC+F,EAAA,EAAD,CAAMC,GAAE,YAAA1M,OAAckM,GAAMF,KAC1BvF,EAAAhG,EAAAiG,cAAC0B,EAAA3H,EAAD,CAAY8H,aAAW,eACrB9B,EAAAhG,EAAAiG,cAACiG,GAAAlM,EAAD,CAAUmM,SAAS,aAIzBnG,EAAAhG,EAAAiG,cAACiE,GAAD,KACElE,EAAAhG,EAAAiG,cAAC8F,GAAA/L,EAAD,CAASqH,MAAM,eACbrB,EAAAhG,EAAAiG,cAAC0B,EAAA3H,EAAD,CACE8H,aAAW,cACXlB,QAAS,kBAAM4E,EAAcrL,KAE7B6F,EAAAhG,EAAAiG,cAACmG,GAAApM,EAAD,CAAamM,SAAS,gBE5BpC,SAASE,GAAejF,GAAO,IACrB7B,EAA+D6B,EAA/D7B,QAAS+G,EAAsDlF,EAAtDkF,UAAWC,EAA2CnF,EAA3CmF,iBAAkBf,EAAyBpE,EAAzBoE,cAAevB,EAAU7C,EAAV6C,MAE7D,OACEjE,EAAAhG,EAAAiG,cAACuG,GAAAxM,EAAD,CAAOwG,UAAWjB,EAAQmD,MACxB1C,EAAAhG,EAAAiG,cAACwG,GAAAzM,EAAD,CAAOwG,UAAWjB,EAAQmH,OACxB1G,EAAAhG,EAAAiG,cAAC0G,GAAA3M,EAAD,KACEgG,EAAAhG,EAAAiG,cAACyF,GAAA1L,EAAD,KACEgG,EAAAhG,EAAAiG,cAAC0F,GAAA3L,EAAD,qBACAgG,EAAAhG,EAAAiG,cAAC0F,GAAA3L,EAAD,CAAW8L,MAAM,UAAjB,QACA9F,EAAAhG,EAAAiG,cAAC0F,GAAA3L,EAAD,CAAW8L,MAAM,UAAjB,mBACA9F,EAAAhG,EAAAiG,cAAC0F,GAAA3L,EAAD,QAGJgG,EAAAhG,EAAAiG,cAAC2G,GAAA5M,EAAD,KACGsM,EAAUO,IAAI,SAAAtB,GACb,IAAMpL,EAAYsL,GAAMF,GACxB,OACEvF,EAAAhG,EAAAiG,cAAC6G,GAAD,CACEvB,QAASA,EACTwB,IAAK5M,EACLqL,cAAeA,EACf5I,KAAMjD,GAAeQ,EAAW8J,SAM1CjE,EAAAhG,EAAAiG,cAACiE,GAAD,KACElE,EAAAhG,EAAAiG,cAAC+G,GAAAhN,EAAD,CAAKwG,UAAWjB,EAAQ0H,IAAKpF,MAAM,UAAUjB,QAAS2F,GACpDvG,EAAAhG,EAAAiG,cAACiH,GAAAlN,EAAD,SAeVqM,GAAetF,aAAe,CAC5BuF,UAAW,GACXrC,MAAO,IAGMhD,4BAjEA,SAAAkB,GAAK,MAAK,CACvBO,KAAM,CACJxB,MAAO,OACPiG,UAAW,QAEbT,MAAO,CACLU,SAAU,KAEZH,IAAK,CACHxF,SAAU,WACV4F,OAA6B,EAArBlF,EAAMK,QAAQC,KACtB6E,MAA4B,EAArBnF,EAAMK,QAAQC,QAsDVxB,CAAmBoF,IC/EnBkB,GAJInI,wBAAc,CAC/BoI,SAAU,KCSNC,GAAU/M,YAAKC,YAAS,SACxB+M,GAAUb,YAAInM,YAAKC,YAAS,SAC5BgN,GAAsBlN,YAC1BgN,GACAC,IA4DaE,OAzDf,SAAAxO,GAAyC,IAAXqG,EAAWrG,EAAXqG,QAAWC,EACbC,mBAAS,CACjC2G,UAAW,GACXrD,WAAW,EACXgB,MAAO,KAJ8BrE,EAAA/F,OAAAgG,EAAA,EAAAhG,CAAA6F,EAAA,GAChCmI,EADgCjI,EAAA,GACzBkI,EADyBlI,EAAA,GAAAmI,EAQnCzG,qBAAWiG,IADbC,SAAuBQ,EAPcD,EAOzBzB,UAAoC2B,EAPXF,EAOI9D,MAGrCiE,EAAc,eAAAvL,EAAA9C,OAAAC,EAAA,EAAAD,CAAAE,EAAAC,EAAAC,KAAG,SAAAC,IAAA,IAAAiO,EAAA,OAAApO,EAAAC,EAAAK,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACrBsN,EAAS,CAAE7E,WAAW,IADD3I,EAAAE,KAAA,EAEEwN,EAAiBI,eAFnB,OAEfD,EAFe7N,EAAAoD,KAGrBoK,EAAS,CACPxB,UAAWqB,GAAoBQ,GAC/BlF,WAAW,IALQ,wBAAA3I,EAAAW,SAAAf,MAAH,yBAAAyC,EAAAxB,MAAAC,KAAAC,YAAA,GASdgN,EAAU,eAAAC,EAAAzO,OAAAC,EAAA,EAAAD,CAAAE,EAAAC,EAAAC,KAAG,SAAAuB,IAAA,IAAA2M,EAAA,OAAApO,EAAAC,EAAAK,KAAA,SAAAqB,GAAA,cAAAA,EAAAnB,KAAAmB,EAAAlB,MAAA,cAAAkB,EAAAlB,KAAA,EACMyN,EAAazO,UADnB,OACX2O,EADWzM,EAAAgC,KAEjBoK,EAAS,SAAAD,GAAK,OAAAhO,OAAAgD,EAAA,EAAAhD,CAAA,GAAUgO,EAAV,CAAiB5D,MAAO0D,GAAoBQ,OAFzC,wBAAAzM,EAAAT,SAAAO,MAAH,yBAAA8M,EAAAnN,MAAAC,KAAAC,YAAA,GAwBhB,OAnBAkN,oBAAU,WAMR,OALAL,IACAD,EAAapJ,UAAU,WACrBwJ,MAEFA,IACO,WACLJ,EAAalJ,gBAEd,IAWDiB,EAAAhG,EAAAiG,cAACiC,GAAD,KACElC,EAAAhG,EAAAiG,cAACuI,GAAD,CAAgBvF,UAAW4E,EAAM5E,WAC/BjD,EAAAhG,EAAAiG,cAACwI,GAAD,CACEnC,UAAWuB,EAAMvB,UACjBC,iBAbiB,WACvB9G,EAAQiJ,KAAK,CAAE5H,SAAU,eAanB0E,cAVc,SAAAmD,GACpBV,EAAa7K,UAAUuL,IAUjB1E,MAAO4D,EAAM5D,yCC7BRhD,WAlCA,SAAA7H,GAAA,MAAkB,CAC/B+J,cAAe,CACbyF,eAAgB,SAChBC,WAA2B,EAHhBzP,EAAGoJ,QAGMC,MAEtBqG,cAAe,CACbC,KAAM,EACNC,SAAU,WA2BC/H,CAvBf,SAAAtE,GAAyE,IAArD6C,EAAqD7C,EAArD6C,SAAUD,EAA2C5C,EAA3C4C,QAAS0D,EAAkCtG,EAAlCsG,UAAW5B,EAAuB1E,EAAvB0E,MAAU4H,EAAapP,OAAAqP,GAAA,EAAArP,CAAA8C,EAAA,4CACvE,OACEqD,EAAAhG,EAAAiG,cAACuI,GAAD3O,OAAAsP,OAAA,GACMF,EADN,CAEE1J,QAAS,CAAE4D,cAAe5D,EAAQ4D,eAClCF,UAAWA,IAEXjD,EAAAhG,EAAAiG,cAACmJ,GAAApP,EAAD,CACEwG,UAAWjB,EAAQuJ,cACnBO,WAAS,EACTC,UAAU,SACVjP,KAAK,SACLmI,QAAS,IAETxC,EAAAhG,EAAAiG,cAACmJ,GAAApP,EAAD,CAAM4L,UAAW2D,IAAY9N,MAAI,EAACwG,QAAQ,SACvCZ,GAEHrB,EAAAhG,EAAAiG,cAACmJ,GAAApP,EAAD,CAAMyB,MAAI,GAAEwH,EAAY,KAAOzD,uHCjBhC,IAAIgK,GAAS3P,OAAA4P,GAAA,EAAA5P,CAZpB,SAAAT,GACA,IAAAgD,EAAAhD,EAAAgD,KACAsN,EAAAtQ,EAAAsQ,OACAC,EAAAvQ,EAAAuQ,YACA,OACAlF,IAASmF,OACTxN,KAAUD,EAAWC,GACrBsN,SACAC,iBAKWE,GAAQhQ,OAAAa,EAAA,EAAAb,CAAKA,OAAAc,EAAA,EAAAd,CAAQ,QACzBiQ,GAAcjQ,OAAAa,EAAA,EAAAb,CAAKA,OAAAc,EAAA,EAAAd,CAAQ,SAC3BkQ,GAAgBlQ,OAAAa,EAAA,EAAAb,CAAKA,OAAAc,EAAA,EAAAd,CAAQ,WAC7BmQ,GAAqBnQ,OAAAa,EAAA,EAAAb,CAAKA,OAAAc,EAAA,EAAAd,CAAQ,qCCpB5BoQ,GAAW,SAAA3N,GAAK,OAC3B4N,QAAQ5N,QAAS6N,EAAY,qBAClBC,GAAc,SAAA9N,GAAK,OAC9B+N,KAAQ,IAAI7N,KAAKF,SAAU6N,EAAY,uCAC5BG,GAAW,SAAAhO,GAAK,OAC3BiO,OAAOC,UAAUC,SAASnO,SAAU6N,EAAY,uECWnC,SAASO,GAATtR,GAA4C,IAAlBuR,EAAkBvR,EAAlBuR,eACvC,OACE3K,EAAAhG,EAAAiG,cAAC2K,GAAA,EAAD,KACE5K,EAAAhG,EAAAiG,cAAC4K,GAAA,EAAD,KACE7K,EAAAhG,EAAAiG,cAAC6K,GAAA,EAAD,KACE9K,EAAAhG,EAAAiG,cAAC8K,GAAA,EAAD,CAAWjF,MAAM,UAAjB,QACA9F,EAAAhG,EAAAiG,cAAC8K,GAAA,EAAD,CAAWjF,MAAM,UAAjB,UACA9F,EAAAhG,EAAAiG,cAAC8K,GAAA,EAAD,CAAWjF,MAAM,UAAjB,iBAGJ9F,EAAAhG,EAAAiG,cAAC+K,GAAA,EAAD,KACGnE,YACC,SAAAoE,GAAG,OACDjL,EAAAhG,EAAAiG,cAAC6K,GAAA,EAAD,CAAU/D,IAAKtB,GAAMwF,IACnBjL,EAAAhG,EAAAiG,cAAC8K,GAAA,EAAD,CAAWjF,MAAM,UAAUgE,GAAQmB,IACnCjL,EAAAhG,EAAAiG,cAAC8K,GAAA,EAAD,CAAWjF,MAAM,UAAUiE,GAAUkB,IACrCjL,EAAAhG,EAAAiG,cAAC8K,GAAA,EAAD,CAAWjF,MAAM,UAAUkE,GAAeiB,MAG9CN,KAWVD,GAAe3J,aAAe,CAC5B4J,eAAgB,kBCrCH,SAASO,GAAT9R,GAAmC,IAAZ+R,EAAY/R,EAAZ+R,SACpC,OACEnL,EAAAhG,EAAAiG,cAACmL,GAAA,EAAD,CAAMD,SAAUA,GACb,SAAAxO,GAAA,IAAG0O,EAAH1O,EAAG0O,aAAcC,EAAjB3O,EAAiB2O,WAAjB,OACCtL,EAAAhG,EAAAiG,cAACmJ,GAAApP,EAAD,CACEuR,WAAW,SACXlC,WAAS,EACTC,UAAU,MACV9G,QAAS,GACTnI,KAAK,UAEL2F,EAAAhG,EAAAiG,cAACmJ,GAAApP,EAAD,CAAMyB,MAAI,GACRuE,EAAAhG,EAAAiG,cAACmL,GAAA,EAAD,CAAOzG,KAAK,OAAO6G,SAAUC,aAAOxB,GAAUG,KAC3C,SAAA9B,GAAA,IAAGoD,EAAHpD,EAAGoD,MAAHC,EAAArD,EAAUsD,KAAQC,EAAlBF,EAAkBE,MAAOC,EAAzBH,EAAyBG,QAAzB,OACC9L,EAAAhG,EAAAiG,cAAC8L,GAAA/R,EAADH,OAAAsP,OAAA,GACMuC,EADN,CAEEG,MAAOC,GAAW5B,QAAQ2B,GAC1BG,WAAS,EACTC,WAAYH,GAAWD,EACvBK,MAAM,OACNC,YAAY,kBAKpBnM,EAAAhG,EAAAiG,cAACmJ,GAAApP,EAAD,CAAMyB,MAAI,GACRuE,EAAAhG,EAAAiG,cAACmL,GAAA,EAAD,CAAOzG,KAAK,SAAS6G,SAAUC,aAAOxB,GAAUK,KAC7C,SAAA8B,GAAA,IAAGV,EAAHU,EAAGV,MAAHW,EAAAD,EAAUR,KAAQC,EAAlBQ,EAAkBR,MAAOC,EAAzBO,EAAyBP,QAAzB,OACC9L,EAAAhG,EAAAiG,cAAC8L,GAAA/R,EAADH,OAAAsP,OAAA,GACMuC,EADN,CAEEG,MAAOC,GAAW5B,QAAQ2B,GAC1BG,WAAS,EACTC,WAAYH,GAAWD,EACvBK,MAAM,SACNC,YAAY,aAKpBnM,EAAAhG,EAAAiG,cAACmJ,GAAApP,EAAD,CAAMyB,MAAI,GACRuE,EAAAhG,EAAAiG,cAACmL,GAAA,EAAD,CAAOzG,KAAK,cAAc6G,SAAUvB,IACjC,SAAAqC,GAAA,IAAGZ,EAAHY,EAAGZ,MAAHa,EAAAD,EAAUV,KAAQC,EAAlBU,EAAkBV,MAAOC,EAAzBS,EAAyBT,QAAzB,OACC9L,EAAAhG,EAAAiG,cAAC8L,GAAA/R,EAADH,OAAAsP,OAAA,GACMuC,EADN,CAEEG,MAAOC,GAAW5B,QAAQ2B,GAC1BG,WAAS,EACTC,WAAYH,GAAWD,EACvBK,MAAM,oBAKdlM,EAAAhG,EAAAiG,cAACmJ,GAAApP,EAAD,CAAMyB,MAAI,GACRuE,EAAAhG,EAAAiG,cAAC0B,EAAA3H,EAAD,CACE6H,MAAM,UACN2K,SAAUlB,EACV1K,QAASyK,EACTpJ,QAAQ,YAERjC,EAAAhG,EAAAiG,cAACiH,GAAAlN,EAAD,CAAKmM,SAAS,eC7Cb,SAASsG,GAATrT,GAAqD,IAA9BmM,EAA8BnM,EAA9BmM,QAASmH,EAAqBtT,EAArBsT,QAASvB,EAAY/R,EAAZ+R,SAShDwB,EAAmBC,kBAAQ,WAC/B,OAAKrH,EAIE1L,OAAAgD,EAAA,EAAAhD,CAAA,GACF0L,EADL,CAEET,eAAgBC,GAAWlB,GAAkB0B,IAC7CoF,eAAgB7G,GAAkByB,KAN3BA,GAQR,CAACA,IAEJ,OACEvF,EAAAhG,EAAAiG,cAACmL,GAAA,EAAD,CAAMyB,cAAeF,EAAkBxB,SArBjB,SAAA2B,GACtB3B,EAAStR,OAAAgD,EAAA,EAAAhD,CAAA,GACJiT,EADG,CAENhI,eAAgB,IAAItI,KAAKsQ,EAAOhI,gBAChCR,eAAgBiG,OAAOuC,EAAOxI,qBAkB7B,SAAA3H,GAAA,IAAG0O,EAAH1O,EAAG0O,aAAcC,EAAjB3O,EAAiB2O,WAAjB,OACCtL,EAAAhG,EAAAiG,cAACmJ,GAAApP,EAAD,CACE4L,UAAU,OACVyD,WAAS,EACTC,UAAU,SACVoD,QAASA,EACTvB,SAAUE,EACV7I,QAAS,IAETxC,EAAAhG,EAAAiG,cAACmJ,GAAApP,EAAD,CAAMyB,MAAI,GACRuE,EAAAhG,EAAAiG,cAACmL,GAAA,EAAD,CAAOzG,KAAK,OAAO6G,SAAUvB,IAC1B,SAAA3B,GAAA,IAAGoD,EAAHpD,EAAGoD,MAAHC,EAAArD,EAAUsD,KAAQC,EAAlBF,EAAkBE,MAAOC,EAAzBH,EAAyBG,QAAzB,OACC9L,EAAAhG,EAAAiG,cAAC8L,GAAA/R,EAADH,OAAAsP,OAAA,GACMuC,EADN,CAEEqB,WAAS,EACTlB,MAAOC,GAAW5B,QAAQ2B,GAC1BG,WAAS,EACTC,WAAYH,GAAWD,EACvBK,MAAM,aAKdlM,EAAAhG,EAAAiG,cAACmJ,GAAApP,EAAD,CAAMyB,MAAI,GACRuE,EAAAhG,EAAAiG,cAACmL,GAAA,EAAD,CACEzG,KAAK,iBACL6G,SAAU,SAAAlP,GAAK,OAAI2N,GAAS3N,IAAU8N,GAAY9N,KAEjD,SAAA8P,GAAA,IAAGV,EAAHU,EAAGV,MAAHW,EAAAD,EAAUR,KAAQC,EAAlBQ,EAAkBR,MAAOC,EAAzBO,EAAyBP,QAAzB,OACC9L,EAAAhG,EAAAiG,cAAC8L,GAAA/R,EAADH,OAAAsP,OAAA,GACMuC,EADN,CAEEG,MAAOC,GAAW5B,QAAQ2B,GAC1BG,WAAS,EACTC,WAAYH,GAAWD,EACvBK,MAAM,kBACNC,YAAY,kBAKpBnM,EAAAhG,EAAAiG,cAACmJ,GAAApP,EAAD,CAAMyB,MAAI,GACRuE,EAAAhG,EAAAiG,cAACmL,GAAA,EAAD,CAAOzG,KAAK,iBAAiB6G,SAAUvB,IACpC,SAAAqC,GAAA,IAAGZ,EAAHY,EAAGZ,MAAHa,EAAAD,EAAUV,KAAQC,EAAlBU,EAAkBV,MAAOC,EAAzBS,EAAyBT,QAAzB,OACC9L,EAAAhG,EAAAiG,cAAC8L,GAAA/R,EAADH,OAAAsP,OAAA,GACMuC,EADN,CAEEG,MAAOC,GAAW5B,QAAQ2B,GAC1BG,WAAS,EACTC,WAAYH,GAAWD,EACvBK,MAAM,kBACNc,KAAK,eAMbhN,EAAAhG,EAAAiG,cAACmL,GAAA,EAAD,CAAOzG,KAAK,kBACT,SAAAsI,GAAA,IAAAC,EAAAD,EAAGvB,MAASpP,EAAZ4Q,EAAY5Q,MAAO6Q,EAAnBD,EAAmBC,SAAnB,OACCnN,EAAAhG,EAAAiG,cAAAD,EAAAhG,EAAAuH,SAAA,KACEvB,EAAAhG,EAAAiG,cAACiE,GAAD,KACElE,EAAAhG,EAAAiG,cAACmJ,GAAApP,EAAD,CAAMyB,MAAI,GACRuE,EAAAhG,EAAAiG,cAACmN,GAAApT,EAAD,CAAYiI,QAAQ,WAApB,eAEAjC,EAAAhG,EAAAiG,cAACiL,GAAD,CACEC,SAAU,SAAA2B,GACR,IAAMO,EAAUC,GAAc,CAC5BlR,KAAM,IAAII,KAAKsQ,EAAO1Q,MACtBsN,OAAQa,OAAOuC,EAAOpD,QACtBC,YAAamD,EAAOnD,cAEtBwD,EAASI,aAAOF,EAAS/Q,SAMjC0D,EAAAhG,EAAAiG,cAACmJ,GAAApP,EAAD,CAAMyB,MAAI,GACRuE,EAAAhG,EAAAiG,cAACmN,GAAApT,EAAD,CAAYiI,QAAQ,WAApB,mBACAjC,EAAAhG,EAAAiG,cAACyK,GAAD,CAAgBC,eAAgBrO,QAMxC0D,EAAAhG,EAAAiG,cAACmJ,GAAApP,EAAD,CAAMyB,MAAI,GACRuE,EAAAhG,EAAAiG,cAACmJ,GAAApP,EAAD,CAAMqP,WAAS,EAACmE,QAAQ,WAAWhL,QAAS,IAC1CxC,EAAAhG,EAAAiG,cAACmJ,GAAApP,EAAD,CAAMyB,MAAI,GACRuE,EAAAhG,EAAAiG,cAACwN,GAAAzT,EAAD,CAAQgT,KAAK,SAAb,WAEFhN,EAAAhG,EAAAiG,cAACiE,GAAD,KACElE,EAAAhG,EAAAiG,cAACmJ,GAAApP,EAAD,CAAMyB,MAAI,GACRuE,EAAAhG,EAAAiG,cAACwN,GAAAzT,EAAD,CACE6H,MAAM,UACN2K,SAAUlB,EACV0B,KAAK,SACL/K,QAAQ,aAJV,iBCpDHyL,OA5Ef,SAAAtU,GAA6C,IAAlBuU,EAAkBvU,EAAlBuU,MAAOlO,EAAWrG,EAAXqG,QAAWC,EACjBC,mBAAS,CACjC4F,QAAS,KACTtC,WAAW,IAH8BrD,EAAA/F,OAAAgG,EAAA,EAAAhG,CAAA6F,EAAA,GACpCmI,EADoCjI,EAAA,GAC7BkI,EAD6BlI,EAAA,GAKZoI,EAAuB1G,qBAAWiG,IAAzDC,SAAYlB,UAEdnM,EAAYwT,EAAMC,OAAOC,GACvBtI,EAAuBsC,EAAvBtC,QAAStC,EAAc4E,EAAd5E,UAEX6K,EAAc7K,EAAY,GAAKsC,EAAQZ,KAEvCoJ,EAAY,eAAApR,EAAA9C,OAAAC,EAAA,EAAAD,CAAAE,EAAAC,EAAAC,KAAG,SAAAC,IAAA,IAAA8T,EAAA,OAAAjU,EAAAC,EAAAK,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACnBsN,EAAS,SAAAD,GAAK,OAAAhO,OAAAgD,EAAA,EAAAhD,CAAA,GAAUgO,EAAV,CAAiB5E,WAAW,MADvB3I,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAGIwN,EAAiBiG,eAAe9T,GAHpC,OAGX6T,EAHW1T,EAAAoD,KAIjBoK,EAAS,SAAAD,GAAK,OAAAhO,OAAAgD,EAAA,EAAAhD,CAAA,GACTgO,EADS,CAEZtC,QAASyI,MANM,cAAA1T,EAAAC,KAAA,EASjBuN,EAAS,SAAAD,GAAK,OAAAhO,OAAAgD,EAAA,EAAAhD,CAAA,GACTgO,EADS,CAEZ5E,WAAW,MAXI3I,EAAA4T,OAAA,2BAAA5T,EAAAW,SAAAf,EAAA,oBAAH,yBAAAyC,EAAAxB,MAAAC,KAAAC,YAAA,GAgBlBkN,oBAAU,WACRwF,KACC,IAEH,IAAM/K,EACJhD,EAAAhG,EAAAiG,cAACqD,GAAD,CACEjC,MAAO4B,EAAY,iBAAmB6K,IASpC3C,EAAQ,eAAA7C,EAAAzO,OAAAC,EAAA,EAAAD,CAAAE,EAAAC,EAAAC,KAAG,SAAAuB,EAAOsR,GAAP,OAAA/S,EAAAC,EAAAK,KAAA,SAAAqB,GAAA,cAAAA,EAAAnB,KAAAmB,EAAAlB,MAAA,cAAAkB,EAAAlB,KAAA,EACTwN,EAAiBmG,YAAY5I,EAASuH,GAD7B,OAEfrN,EAAQoB,QAAQ,CAAEC,SAAU,MAFb,wBAAApF,EAAAT,SAAAO,MAAH,gBAAAN,GAAA,OAAAoN,EAAAnN,MAAAC,KAAAC,YAAA,GAKd,OACE2E,EAAAhG,EAAAiG,cAACiC,GAAD,KACElC,EAAAhG,EAAAiG,cAACmO,GAAD,CACEpL,OAAQA,EACRC,UAAW4E,EAAM5E,UACjB5B,MAAK,QAAA9H,OAAUuU,IAEf9N,EAAAhG,EAAAiG,cAACwM,GAAD,CACElH,QAASA,EACTmH,QAnBQ,SAAC2B,GACfA,EAAEC,iBACF7O,EAAQoB,QAAQ,CAAEC,SAAU,OAkBtBqK,SAAUA,OCjBLoD,OAzCf,SAAAnV,GAAwC,IAAXqG,EAAWrG,EAAXqG,QACP6G,EAAgBhF,qBAAWiG,IAAvCC,SAAYlB,UAEdtD,EACJhD,EAAAhG,EAAAiG,cAACqD,GAAD,CACEjC,MAAM,uBAUJ8J,EAAQ,eAAAxO,EAAA9C,OAAAC,EAAA,EAAAD,CAAAE,EAAAC,EAAAC,KAAG,SAAAC,EAAO4S,GAAP,OAAA/S,EAAAC,EAAAK,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACT8L,EAAUkI,cAAc1B,GADf,OAEfrN,EAAQoB,QAAQ,KAFD,wBAAAvG,EAAAW,SAAAf,MAAH,gBAAAgB,GAAA,OAAAyB,EAAAxB,MAAAC,KAAAC,YAAA,GAKd,OACE2E,EAAAhG,EAAAiG,cAACiC,GAAD,KACElC,EAAAhG,EAAAiG,cAACmO,GAAD,CACEpL,OAAQA,EACR3B,MAAK,sBAELrB,EAAAhG,EAAAiG,cAACwM,GAAD,CACEC,QAlBQ,SAAC2B,GACfA,EAAEC,iBACFD,EAAEI,kBACFhP,EAAQoB,QAAQ,MAgBVsK,SAAUA,OCiDLuD,GApFG,SAAAtV,GAClB,IAAAC,EAAAD,EAAAC,MACAC,EAAA,IAAeN,EAAA,EAAO,GAAAO,OAAAF,EAAA,eACtB,OACAG,QAAA,WACA,OAAAF,EAAAG,QAAA,CACAC,cAAA,KAGAiV,QAAA,WACA,IAAAC,EAAqB/U,OAAAC,EAAA,EAAAD,CAEfE,EAAAC,EAAmBC,KAAA,SAAAC,EAAA2T,GACzB,OAAe9T,EAAAC,EAAmBK,KAAA,SAAAC,GAClC,OACA,OAAAA,EAAAC,KAAAD,EAAAE,MACA,OACA,OAAAF,EAAAO,OAAA,SAAAvB,EAAAuV,IAAAhB,IAEA,OACA,UACA,OAAAvT,EAAAW,SAGSf,MAOT,OAJA,SAAAgB,GACA,OAAA0T,EAAAzT,MAAAC,KAAAC,YAnBA,GAwBAC,SAAA,WACA,IAAAC,EAAsB1B,OAAAC,EAAA,EAAAD,CAEhBE,EAAAC,EAAmBC,KAAA,SAAAuB,EAAAC,GACzB,OAAe1B,EAAAC,EAAmBK,KAAA,SAAAqB,GAClC,OACA,OAAAA,EAAAnB,KAAAmB,EAAAlB,MACA,OACA,OAAAkB,EAAAb,OAAA,SAAAvB,EAAAqC,KAAAF,IAEA,OACA,UACA,OAAAC,EAAAT,SAGSO,MAOT,OAJA,SAAAI,GACA,OAAAL,EAAAJ,MAAAC,KAAAC,YAnBA,GAwBAQ,WAAA,WACA,IAAAC,EAAwBjC,OAAAC,EAAA,EAAAD,CAElBE,EAAAC,EAAmBC,KAAA,SAAA8B,EAAAN,GACzB,OAAe1B,EAAAC,EAAmBK,KAAA,SAAA2B,GAClC,OACA,OAAAA,EAAAzB,KAAAyB,EAAAxB,MACA,OACA,OAAAwB,EAAAnB,OAAA,SAAAvB,EAAA2C,IAAAR,IAEA,OACA,UACA,OAAAO,EAAAf,SAGSc,MAOT,OAJA,SAAAG,GACA,OAAAJ,EAAAX,MAAAC,KAAAC,YAnBA,KCvCeyT,GApBK,SAAA1V,GACpB,IAAA2V,EAAA3V,EAAA2V,eACA,OACAP,cAAA,SAAAQ,GACA,IAAAzJ,EnBAiB,SAAAnM,GACjB,IAAAuL,EAAAvL,EAAAuL,KACAG,EAAA1L,EAAA0L,eAEA,OACAR,eAFAlL,EAAAkL,eAGAQ,iBACArI,gBAAA,KACAkI,OACApI,YAAiBJ,EAAW,IAAAK,MAC5BmO,eAAA,ImBVoBsE,CAAMD,GAC1B,OAAAD,EAAAzT,SAAAiK,IAEA4I,YAAA,SAAA5I,EAAAyJ,GACA,IAAAE,EnBSiB,SAAAvS,EAAA4I,GACjB,IAAAZ,EAAAhI,EAAAgI,KACAG,EAAAnI,EAAAmI,eACAR,EAAA3H,EAAA2H,eACAqG,EAAAhO,EAAAgO,eACA,OAAS9Q,OAAAgD,EAAA,EAAAhD,CAAa,GAAG0L,EAAA,CACzBjB,iBACAQ,iBACArI,gBAAqBN,EAAW,IAAAK,MAChCmI,OACAgG,mBmBnB2BwE,CAAMH,EAAAzJ,GACjC,OAAAwJ,EAAAlT,WAAAqT,IAEA9G,aAAA,WACA,OAAA2G,EAAAvV,WAEAyU,eAAA,SAAAJ,GACA,OAAAkB,EAAAJ,QAAAd,sECjBqBuB,eACnB,SAAAA,EAAYC,GAAQ,OAAAxV,OAAAyV,GAAA,EAAAzV,CAAAuB,KAAAgU,GAAAvV,OAAA0V,GAAA,EAAA1V,CAAAuB,KAAAvB,OAAA2V,GAAA,EAAA3V,CAAAuV,GAAAK,KAAArU,KAAA,SAAA7B,OACH8V,EADE,+DAD0BK,QCA1BC,eACnB,SAAAA,IAAe,OAAA9V,OAAAyV,GAAA,EAAAzV,CAAAuB,KAAAuU,GAAA9V,OAAA0V,GAAA,EAAA1V,CAAAuB,KAAAvB,OAAA2V,GAAA,EAAA3V,CAAA8V,GAAAF,KAAArU,KAAA,8DADmCsU,QC2BrCE,OAxBf,SAAsB9C,GACpB,OAAO,IAAI+C,QAAQ,SAACC,EAASC,GAAW,IAC9BV,EAAoBvC,EAApBuC,MAAOW,EAAalD,EAAbkD,SAED,UAAVX,GAA+B,SAAVA,EAMZ,UAAVA,GAAkC,UAAbW,GACX,SAAVX,GAAiC,SAAbW,EAErBD,EAAO,IAAIJ,KAIb1Q,aAAagR,QAAQ,kBAAmB,QACxChR,aAAagR,QAAQ,UAAqB,UAAVZ,GAEhCS,KAfEC,EAAO,IAAIX,GAAkBC,OCEnC,SAASa,GAAT9W,GAA4C,IAAvBoH,EAAuBpH,EAAvBoH,UAAW2K,EAAY/R,EAAZ+R,SAC9B,OACEnL,EAAAhG,EAAAiG,cAACmL,GAAA,EAAD,CAAMD,SAAUA,GACb,SAAAxO,GAAA,IAAG0O,EAAH1O,EAAG0O,aAAc8E,EAAjBxT,EAAiBwT,YAAa7E,EAA9B3O,EAA8B2O,WAA9B,OACCtL,EAAAhG,EAAAiG,cAACmJ,GAAApP,EAAD,CACEoW,aAAa,SACb5P,UAAWA,EACXoF,UAAU,OACVyD,WAAS,EACT8B,SAAUE,EACV7I,QAAS,IAER2N,EACCnQ,EAAAhG,EAAAiG,cAACmJ,GAAApP,EAAD,CACE6H,MAAM,QACN+D,UAAW2D,IACX9N,MAAI,EACJ8B,GAAI,IAEH4S,GAED,KAEJnQ,EAAAhG,EAAAiG,cAACmJ,GAAApP,EAAD,CAAMyB,MAAI,EAAC8B,GAAI,IACbyC,EAAAhG,EAAAiG,cAACmL,GAAA,EAAD,CACEzG,KAAK,QACL6G,SAAUvB,IAET,SAAA3B,GAAA,IAAGoD,EAAHpD,EAAGoD,MAAHC,EAAArD,EAAUsD,KAAQC,EAAlBF,EAAkBE,MAAOC,EAAzBH,EAAyBG,QAASqE,EAAlCxE,EAAkCwE,YAAlC,OACCnQ,EAAAhG,EAAAiG,cAAC8L,GAAA/R,EAADH,OAAAsP,OAAA,GACMuC,EADN,CAEEqB,WAAS,EACTlB,MAAOC,GAAW5B,QAAQ2B,GAASsE,GACnCnE,WAAS,EACTC,WAAYH,IAAYD,GAASsE,GACjChE,YAAY,cAMpBnM,EAAAhG,EAAAiG,cAACmJ,GAAApP,EAAD,CAAMyB,MAAI,EAAC8B,GAAI,IACbyC,EAAAhG,EAAAiG,cAACmL,GAAA,EAAD,CACEzG,KAAK,WACL6G,SAAUvB,IAET,SAAAmC,GAAA,IAAGV,EAAHU,EAAGV,MAAHW,EAAAD,EAAUR,KAAQC,EAAlBQ,EAAkBR,MAAOC,EAAzBO,EAAyBP,QAAzB,OACC9L,EAAAhG,EAAAiG,cAAC8L,GAAA/R,EAADH,OAAAsP,OAAA,GACMuC,EADN,CAEEG,MAAOC,GAAW5B,QAAQ2B,GAC1BG,WAAS,EACTC,WAAYH,GAAWD,EACvBM,YAAY,WACZa,KAAK,iBAMbhN,EAAAhG,EAAAiG,cAACmJ,GAAApP,EAAD,CAAMyB,MAAI,EAAC8B,GAAI,IACbyC,EAAAhG,EAAAiG,cAACwN,GAAAzT,EAAD,CACE6H,MAAM,UACN2K,SAAUlB,EACVU,WAAS,EACTgB,KAAK,SACL/K,QAAQ,aALV,cAqBZiO,GAAUnP,aAAe,CACvBP,UAAW,IAGE0P,UCtBAjP,WA3DA,SAACkB,GAAD,MAAY,CACzBO,KAAM,CACJmG,WAAiC,EAArB1G,EAAMK,QAAQC,MAE5B4N,KAAM,CACJ3M,OAAM,GAAAnK,OAA0B,EAArB4I,EAAMK,QAAQC,KAAnB,WACNuG,SAAU,WAqDC/H,CAjDf,SAAA7H,GAAyC,IAApBmG,EAAoBnG,EAApBmG,QAASE,EAAWrG,EAAXqG,QACtB0L,EAAQ,eAAAxO,EAAA9C,OAAAC,EAAA,EAAAD,CAAAE,EAAAC,EAAAC,KAAG,SAAAC,EAAO4S,GAAP,OAAA/S,EAAAC,EAAAK,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAEPoV,GAAa9C,GAFN,OAGbrN,EAAQoB,QAAQ,CAAEC,SAAU,MAHfxG,EAAAE,KAAA,mBAAAF,EAAAC,KAAA,EAAAD,EAAAqD,GAAArD,EAAA,WAKTA,EAAAqD,cAAayR,IALJ,CAAA9U,EAAAE,KAAA,gBAAAF,EAAAO,OAAA,SAMJ,CAAEwU,MAAO/U,EAAAqD,GAAE2S,UANP,aAOFhW,EAAAqD,cAAagS,IAPX,CAAArV,EAAAE,KAAA,gBAAAF,EAAAO,OAAA,SAAAhB,OAAA0W,GAAA,EAAA1W,CAAA,GAQD2W,KAAa,0BARZ,cAAAlW,EAAAqD,GAAA,yBAAArD,EAAAW,SAAAf,EAAA,iBAAH,gBAAAgB,GAAA,OAAAyB,EAAAxB,MAAAC,KAAAC,YAAA,GAed,OACE2E,EAAAhG,EAAAiG,cAACiD,GAAD,CAAM3D,QAAS,CAAEmD,KAAMnD,EAAQmD,OAC7B1C,EAAAhG,EAAAiG,cAAC+B,EAAAhI,EAAD,CACE8L,MAAM,SACN2K,WAAW,EACXxO,QAAQ,SAHV,WAQAjC,EAAAhG,EAAAiG,cAAC+B,EAAAhI,EAAD,CACE8L,MAAM,SACNjE,MAAM,iBAFR,MAOA7B,EAAAhG,EAAAiG,cAAC+B,EAAAhI,EAAD,CACE8L,MAAM,SACNjE,MAAM,UACNI,QAAQ,YAHV,8BAQAjC,EAAAhG,EAAAiG,cAACyQ,GAAD,CACElQ,UAAWjB,EAAQ8Q,KACnBlF,SAAUA,OC/DHwF,OAJf,WACE,MAAmD,SAA5C1R,aAAakF,QAAQ,oBCkBfyM,OAdf,SAAAxX,GAAmC,IAAZoG,EAAYpG,EAAZoG,SACrB,OAAKmR,KAUEnR,EARHQ,EAAAhG,EAAAiG,cAAC4Q,EAAA,EAAD,CACE5K,GAAI,CACFnF,SAAU,aCOdzH,WACJ,sMAGI2O,GAAmB8I,GAAiB,CAAE/B,eADrBgC,GAAe,CAAE1X,aAGlC4O,GAAe+I,EAAa,CAAE7T,WADjB8T,EAAW,CAAE5X,aA2BjB6X,OAxBf,WACE,OACElR,EAAAhG,EAAAiG,cAAA,OAAKO,UAAU,OACbR,EAAAhG,EAAAiG,cAACkR,GAAWhR,SAAZ,CACE7D,MAAO,CACLkL,SAAU,CAAElB,UAAW0B,GAAkB/D,MAAOgE,MAGlDjI,EAAAhG,EAAAiG,cAAC+F,EAAA,EAAD,KACEhG,EAAAhG,EAAAiG,cAAC4Q,EAAA,EAAD,KACE7Q,EAAAhG,EAAAiG,cAAC4Q,EAAA,EAAD,CAAOO,KAAK,SAASxL,UAAWyL,KAEhCrR,EAAAhG,EAAAiG,cAACqR,GAAD,KACEtR,EAAAhG,EAAAiG,cAAC4Q,EAAA,EAAD,CAAOU,OAAK,EAACH,KAAK,IAAIxL,UAAWgC,KACjC5H,EAAAhG,EAAAiG,cAAC4Q,EAAA,EAAD,CAAOU,OAAK,EAACH,KAAK,YAAYxL,UAAW2I,KACzCvO,EAAAhG,EAAAiG,cAAC4Q,EAAA,EAAD,CAAOO,KAAK,eAAexL,UAAW8H,WC5BhCxD,QACW,cAA7BsH,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAAS/D,MACvB,2DCZNgE,IAASC,OAAO5R,EAAAhG,EAAAiG,cAAC4R,GAAD,MAASC,SAASC,eAAe,SD2H3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMlX,KAAK,SAAAmX,GACjCA,EAAaC","file":"static/js/main.a6cb9750.chunk.js","sourcesContent":["import _regeneratorRuntime from \"/Users/dzianis_roi/Projects/logistics-risks-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/dzianis_roi/Projects/logistics-risks-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport PouchDB from \"pouchdb\";\nimport PouchDBFind from \"pouchdb-find\";\nimport view from 'ramda/es/view';\nimport lensProp from \"ramda/es/lensProp\";\nimport pipe from \"ramda/es/pipe\";\nimport head from \"ramda/es/head\";\nPouchDB.plugin(PouchDBFind);\n\nvar RisksStore = function RisksStore(_ref) {\n  var dbUrl = _ref.dbUrl;\n  var db = new PouchDB(\"\".concat(dbUrl, \"/risks\"));\n  return {\n    getList: function getList() {\n      return db.allDocs({\n        include_docs: true\n      });\n    },\n    getByCompanyId: function () {\n      var _getByCompanyId = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(companyId) {\n        var getFirstResult;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                getFirstResult = pipe(view(lensProp('docs')), head);\n                return _context.abrupt(\"return\", db.find({\n                  selector: {\n                    companyId: companyId\n                  }\n                }).then(getFirstResult));\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getByCompanyId(_x) {\n        return _getByCompanyId.apply(this, arguments);\n      }\n\n      return getByCompanyId;\n    }(),\n    saveItem: function () {\n      var _saveItem = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(item) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                return _context2.abrupt(\"return\", db.post(item));\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function saveItem(_x2) {\n        return _saveItem.apply(this, arguments);\n      }\n\n      return saveItem;\n    }(),\n    updateItem: function () {\n      var _updateItem = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(item) {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                return _context3.abrupt(\"return\", db.put(item));\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function updateItem(_x3) {\n        return _updateItem.apply(this, arguments);\n      }\n\n      return updateItem;\n    }()\n  };\n};\n\nexport default RisksStore;","export default function toISOString(date) {\n  return date.toISOString();\n}","import _objectSpread from \"/Users/dzianis_roi/Projects/logistics-risks-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport view from \"ramda/es/view\";\nimport lensProp from \"ramda/es/lensProp\";\nimport toISOString from \"@logistics-calc/date-utils/src/toISOString\";\nexport var create = function create(_ref) {\n  var companyId = _ref.companyId,\n      value = _ref.value;\n  return {\n    value: value,\n    companyId: companyId,\n    createdDate: toISOString(new Date()),\n    lastUpdatedDate: null\n  };\n};\nexport var update = function update(_ref2, risk) {\n  var value = _ref2.value;\n  return _objectSpread({}, risk, {\n    value: value,\n    lastUpdatedDate: toISOString(new Date())\n  });\n};\nexport var getId = view(lensProp('_id'));\nexport var getCompanyId = view(lensProp('companyId'));\nexport var getValue = view(lensProp('value'));","import _regeneratorRuntime from \"/Users/dzianis_roi/Projects/logistics-risks-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/dzianis_roi/Projects/logistics-risks-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as tf from \"@tensorflow/tfjs\";\nimport { create, update } from \"@logistics-calc/risks/src/domain/models/Risk\";\nvar modelUrl = 'localstorage://logistics-risks-model';\n\nvar getRandomInt = function getRandomInt(min, max) {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n\nvar RisksService = function RisksService(_ref) {\n  var risksStore = _ref.risksStore;\n  var listener;\n  return {\n    calculate: function () {\n      var _calculate = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(companyId) {\n        var model, xs, ys, risk, value;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return tf.loadLayersModel(modelUrl);\n\n              case 3:\n                model = _context.sent;\n                _context.next = 17;\n                break;\n\n              case 6:\n                _context.prev = 6;\n                _context.t0 = _context[\"catch\"](0);\n                model = tf.sequential();\n                model.add(tf.layers.dense({\n                  units: 1,\n                  inputShape: [1]\n                }));\n                model.compile({\n                  loss: 'meanSquaredError',\n                  optimizer: 'SGD'\n                });\n                xs = tf.tensor2d([[1], [2], [3], [4]], [4, 1]);\n                ys = tf.tensor2d([[1], [3], [5], [7]], [4, 1]);\n                _context.next = 15;\n                return model.fit(xs, ys, {\n                  epochs: 500\n                });\n\n              case 15:\n                _context.next = 17;\n                return model.save(modelUrl);\n\n              case 17:\n                model.predict(tf.tensor2d([[5]], [1, 1]));\n                _context.next = 20;\n                return risksStore.getByCompanyId(companyId);\n\n              case 20:\n                risk = _context.sent;\n                value = getRandomInt(10, 100);\n\n                if (!risk) {\n                  _context.next = 27;\n                  break;\n                }\n\n                _context.next = 25;\n                return risksStore.updateItem(update({\n                  value: value\n                }, risk));\n\n              case 25:\n                _context.next = 29;\n                break;\n\n              case 27:\n                _context.next = 29;\n                return risksStore.saveItem(create({\n                  value: value,\n                  companyId: companyId\n                }));\n\n              case 29:\n                if (listener) {\n                  listener();\n                }\n\n              case 30:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 6]]);\n      }));\n\n      function calculate(_x) {\n        return _calculate.apply(this, arguments);\n      }\n\n      return calculate;\n    }(),\n    getList: function getList() {\n      return risksStore.getList();\n    },\n    subscribe: function subscribe(l) {\n      listener = l;\n    },\n    unsubscribe: function unsubscribe() {\n      listener = null;\n    }\n  };\n};\n\nexport default RisksService;","function logout() {\n  localStorage.removeItem('isAuthenticated');\n}\n\nexport default logout;\n","import { createContext } from 'react';\n\nconst AppMenuContext = createContext({ openMenu: null });\n\nexport default AppMenuContext;\n","import React, { useState } from \"react\";\nimport PropTypes from 'prop-types';\nimport { withRouter } from 'react-router-dom';\nimport List from \"@material-ui/core/List/index\";\nimport ListItem from \"@material-ui/core/ListItem/index\";\nimport Drawer from \"@material-ui/core/Drawer/index\";\nimport withStyles from \"@material-ui/core/styles/withStyles\";\n\nimport logout from \"../../auth/domain/services/logout\";\n\nimport AppMenuContext from './AppMenuContext';\n\n\nconst styles = {\n  list: {\n    width: '250px',\n  },\n};\n\nfunction AppMenu({ classes, children, history }) {\n  const [isOpened, setIsOpened] = useState(false);\n\n  const openMenu = () => {\n    setIsOpened(true);\n  };\n\n  const onLogoutClick = () => {\n    logout();\n    history.replace({ pathname: '/login' });\n  };\n\n  return (\n    <AppMenuContext.Provider\n      value={{\n        openMenu,\n      }}\n    >\n      <Drawer\n        open={isOpened}\n        onClose={() => setIsOpened(false)}\n      >\n        <List className={classes.list}>\n          <ListItem button onClick={onLogoutClick}>\n            Logout\n          </ListItem>\n        </List>\n      </Drawer>\n      { children }\n    </AppMenuContext.Provider>\n  )\n}\n\n\nAppMenu.propTypes = {\n  classes: PropTypes.object.isRequired,\n  onLogout: PropTypes.func,\n  open: PropTypes.bool,\n};\n\nAppMenu.defaultProps = {\n  open: false,\n};\n\nexport default withRouter(withStyles(styles)(AppMenu));\n","import React, { useContext } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport SimpleDrawer from \"./menu/ui/AppMenu\";\nimport AppMenuContext from \"./menu/ui/AppMenuContext\";\n\nconst styles = theme => ({\n  title: {\n    flexGrow: 1\n  },\n  menuButton: {\n    marginLeft: -12,\n    marginRight: 20\n  },\n  buttonIconLeft: {\n    marginRight: theme.spacing.unit\n  }\n});\n\nfunction SimpleAppBar(props) {\n  const { classes, title } = props;\n  const { openMenu } = useContext(AppMenuContext);\n\n  return (\n    <>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <IconButton\n            className={classes.menuButton}\n            color=\"inherit\"\n            aria-label=\"Menu\"\n            onClick={openMenu}\n          >\n            <MenuIcon/>\n          </IconButton>\n          <Typography variant=\"h6\" color=\"inherit\" className={classes.title}>\n            {title}\n          </Typography>\n        </Toolbar>\n      </AppBar>\n      <SimpleDrawer />\n    </>\n  );\n}\n\nSimpleAppBar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  title: PropTypes.string\n};\n\nSimpleAppBar.defaultProps = {\n  title: \"Logistics Risks Calculator\"\n};\n\nexport default withStyles(styles)(SimpleAppBar);\n","import React from 'react';\nimport classnames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\n\nconst styles = {\n  root: {\n    display: 'flex',\n    flexFlow: 'column nowrap',\n    flexGrow: 1,\n    height: '100%',\n  },\n};\n\nfunction Page({ className, classes, children }) {\n  return <div className={classnames(classes.root, className)}>{ children }</div>\n}\n\nexport default withStyles(styles)(Page);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nimport SimpleAppBar from './SimpleAppBar';\nimport Page from './Page';\n\n\nconst styles = {\n  gridContainer: {\n    display: 'flex',\n    flexGrow: 1,\n    maxHeight: '100%',\n    overflow: 'auto',\n  },\n  progress: {\n    alignSelf: 'center',\n    margin: 'auto',\n  },\n};\n\n\nfunction PageWithAppBar({ appBar, className, classes, children, isLoading }) {\n  return (\n    <Page className={className}>\n      { appBar }\n      <div className={classes.gridContainer}>\n        {isLoading ? <CircularProgress className={classes.progress}/> : children}\n      </div>\n    </Page>\n  )\n}\n\nPageWithAppBar.propTypes = {\n  appBar: PropTypes.node,\n  children: PropTypes.node,\n  className: PropTypes.string,\n  classes: PropTypes.object.isRequired,\n  isLoading: PropTypes.bool,\n};\n\nPageWithAppBar.defaultProps = {\n  appBar: <SimpleAppBar />,\n  isLoading: false,\n};\n\nexport default withStyles(styles)(PageWithAppBar);\n","import _objectSpread from \"/Users/dzianis_roi/Projects/logistics-risks-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport lensProp from 'ramda/es/lensProp';\nimport view from 'ramda/es/view';\nimport pipe from \"ramda/es/pipe\";\nimport defaultTo from \"ramda/es/defaultTo\";\nimport toISOString from '@logistics-calc/date-utils/src/toISOString';\nexport var create = function create(_ref) {\n  var name = _ref.name,\n      foundationDate = _ref.foundationDate,\n      charterCapital = _ref.charterCapital;\n  return {\n    charterCapital: charterCapital,\n    foundationDate: foundationDate,\n    lastUpdatedDate: null,\n    name: name,\n    createdDate: toISOString(new Date()),\n    paymentHistory: []\n  };\n};\nexport var update = function update(_ref2, company) {\n  var name = _ref2.name,\n      foundationDate = _ref2.foundationDate,\n      charterCapital = _ref2.charterCapital,\n      paymentHistory = _ref2.paymentHistory;\n  return _objectSpread({}, company, {\n    charterCapital: charterCapital,\n    foundationDate: foundationDate,\n    lastUpdatedDate: toISOString(new Date()),\n    name: name,\n    paymentHistory: paymentHistory\n  });\n};\nexport var getId = view(lensProp('_id'));\nexport var getName = view(lensProp('name'));\nexport var getFoundationDate = view(lensProp('foundationDate'));\nexport var getPaymentHistory = pipe(view(lensProp(\"paymentHistory\")), defaultTo([]));","import { getCompanyId } from \"./Risk\";\nexport var getByCompanyId = function getByCompanyId(companyId, risks) {\n  return risks.find(function (risk) {\n    return getCompanyId(risk) === companyId;\n  });\n};","export default function Permit({ children }) {\n  return localStorage.getItem('isAdmin') === 'true' ? children : null;\n}\n","import PropTypes from 'prop-types';\n\nexport const COMPANY_SHAPE = PropTypes.shape({\n  charterCapital: PropTypes.number.isRequired,\n  _id: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  lastUpdated: PropTypes.instanceOf(Date),\n  foundationDate: PropTypes.string.isRequired\n});\n","import format from \"date-fns/format\";\nexport default function formatDate(date) {\n  return format(date, 'MM/DD/YYYY');\n}","import React from 'react';\nimport { makeStyles } from '@material-ui/styles';\nimport TableCell from '@material-ui/core/TableCell';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { Link } from 'react-router-dom';\nimport IconButton from '@material-ui/core/IconButton';\nimport TableRow from '@material-ui/core/TableRow';\nimport RefreshIcon from '@material-ui/icons/Refresh';\nimport EditIcon from '@material-ui/icons/Edit';\n\nimport formatDate from '@logistics-calc/date-utils/src/formatDate';\n\nimport isHighRisk from '@logistics-calc/risks/src/domain/services/isHighRisk';\nimport { getValue } from '@logistics-calc/risks/src/domain/models/Risk';\n\nimport {\n  getFoundationDate,\n  getId,\n  getName\n} from '@logistics-calc/companies/src/domain/models/Company';\n\nimport Permit from '../../../priveleges/Permit';\n\nconst useStyles = makeStyles({\n  body: {\n    backgroundColor: ({ risk }) => {\n      if (!risk) {\n        return null;\n      }\n\n      return isHighRisk(risk) ? 'red' : 'green';\n    }\n  }\n});\n\nfunction CompaniesTableItem(props) {\n  const { company, onRecalculate, risk } = props;\n  const companyId = getId(company);\n  const classes = useStyles(props);\n  return (\n    <TableRow>\n      <TableCell component=\"th\" scope=\"row\">\n        {getName(company)}\n      </TableCell>\n      <TableCell align=\"center\" classes={classes}>\n        {risk ? `${getValue(risk)}%` : '-'}\n      </TableCell>\n      <TableCell align=\"center\">\n        {formatDate(getFoundationDate(company))}\n      </TableCell>\n      <TableCell align=\"right\">\n        <Tooltip title=\"Edit\">\n          <Link to={`/company/${getId(company)}`}>\n            <IconButton aria-label=\"Recalculate\">\n              <EditIcon fontSize=\"small\" />\n            </IconButton>\n          </Link>\n        </Tooltip>\n        <Permit>\n          <Tooltip title=\"Recalculate\">\n            <IconButton\n              aria-label=\"Recalculate\"\n              onClick={() => onRecalculate(companyId)}\n            >\n              <RefreshIcon fontSize=\"small\" />\n            </IconButton>\n          </Tooltip>\n        </Permit>\n      </TableCell>\n    </TableRow>\n  );\n}\n\nexport default CompaniesTableItem;\n","import { getValue } from '../models/Risk';\n/**\n * @param {Risk} risk\n * @returns {boolean}\n */\n\nexport default function isHighRisk(risk) {\n  return getValue(risk) > 50;\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles/index';\nimport Table from '@material-ui/core/Table/index';\nimport TableBody from '@material-ui/core/TableBody/index';\nimport TableCell from '@material-ui/core/TableCell/index';\nimport TableHead from '@material-ui/core/TableHead/index';\nimport TableRow from '@material-ui/core/TableRow/index';\nimport Fab from '@material-ui/core/Fab/index';\nimport Paper from '@material-ui/core/Paper/index';\nimport AddIcon from '@material-ui/icons/Add';\n\nimport { getId } from '@logistics-calc/companies/src/domain/models/Company';\n\nimport { getByCompanyId } from '@logistics-calc/risks/src/domain/models/RisksCollection';\n\nimport Permit from '../../../priveleges/Permit';\n\nimport { COMPANY_SHAPE } from '../constants';\nimport CompaniesTableItem from './CompaniesTableItem';\n\nconst styles = theme => ({\n  root: {\n    width: '100%',\n    overflowX: 'auto'\n  },\n  table: {\n    minWidth: 700\n  },\n  fab: {\n    position: 'absolute',\n    bottom: theme.spacing.unit * 4,\n    right: theme.spacing.unit * 4\n  }\n});\n\nfunction CompaniesTable(props) {\n  const { classes, companies, onAddButtonClick, onRecalculate, risks } = props;\n\n  return (\n    <Paper className={classes.root}>\n      <Table className={classes.table}>\n        <TableHead>\n          <TableRow>\n            <TableCell>Company name</TableCell>\n            <TableCell align=\"center\">Risk</TableCell>\n            <TableCell align=\"center\">Foundation date</TableCell>\n            <TableCell />\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {companies.map(company => {\n            const companyId = getId(company);\n            return (\n              <CompaniesTableItem\n                company={company}\n                key={companyId}\n                onRecalculate={onRecalculate}\n                risk={getByCompanyId(companyId, risks)}\n              />\n            );\n          })}\n        </TableBody>\n      </Table>\n      <Permit>\n        <Fab className={classes.fab} color=\"primary\" onClick={onAddButtonClick}>\n          <AddIcon />\n        </Fab>\n      </Permit>\n    </Paper>\n  );\n}\n\nCompaniesTable.propTypes = {\n  classes: PropTypes.object.isRequired,\n  companies: PropTypes.arrayOf(COMPANY_SHAPE),\n  onAddButtonClick: PropTypes.func,\n  onRecalculate: PropTypes.func,\n  risks: PropTypes.array\n};\n\nCompaniesTable.defaultProps = {\n  companies: [],\n  risks: []\n};\n\nexport default withStyles(styles)(CompaniesTable);\n","import { createContext } from 'react';\n\n\nconst AppContext = createContext({\n  services: {},\n});\n\nexport default AppContext;\n","import React, { useContext, useEffect, useState } from 'react';\n\nimport lensProp from 'ramda/es/lensProp';\nimport view from 'ramda/es/view';\nimport map from 'ramda/es/map';\nimport pipe from 'ramda/es/pipe';\n\nimport PageWithAppBar from '../../PageWithAppBar';\n\nimport CompaniesTable from './table/CompaniesTable';\nimport AppMenu from '../../menu/ui/AppMenu';\nimport AppContext from '../../AppContext';\n\nconst getRows = view(lensProp('rows'));\nconst mapDocs = map(view(lensProp('doc')));\nconst selectDocumentsList = pipe(\n  getRows,\n  mapDocs\n);\n\nfunction CompaniesTablePage({ history }) {\n  const [state, setState] = useState({\n    companies: [],\n    isLoading: false,\n    risks: []\n  });\n  const {\n    services: { companies: companiesService, risks: risksService }\n  } = useContext(AppContext);\n\n  const fetchCompanies = async () => {\n    setState({ isLoading: true });\n    const response = await companiesService.getCompanies();\n    setState({\n      companies: selectDocumentsList(response),\n      isLoading: false\n    });\n  };\n\n  const fetchRisks = async () => {\n    const response = await risksService.getList();\n    setState(state => ({ ...state, risks: selectDocumentsList(response) }));\n  };\n\n  useEffect(() => {\n    fetchCompanies();\n    risksService.subscribe(() => {\n      fetchRisks();\n    });\n    fetchRisks();\n    return () => {\n      risksService.unsubscribe();\n    };\n  }, []);\n\n  const onAddButtonClick = () => {\n    history.push({ pathname: '/company/' });\n  };\n\n  const onRecalculate = categoryId => {\n    risksService.calculate(categoryId);\n  };\n\n  return (\n    <AppMenu>\n      <PageWithAppBar isLoading={state.isLoading}>\n        <CompaniesTable\n          companies={state.companies}\n          onAddButtonClick={onAddButtonClick}\n          onRecalculate={onRecalculate}\n          risks={state.risks}\n        />\n      </PageWithAppBar>\n    </AppMenu>\n  );\n}\n\nexport default CompaniesTablePage;\n","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\nimport withStyles from '@material-ui/core/styles/withStyles';\n\nimport PageWithAppBar from './PageWithAppBar';\n\nconst styles = ({ spacing }) => ({\n  gridContainer: {\n    justifyContent: 'center',\n    paddingTop: spacing.unit * 4\n  },\n  formContainer: {\n    flex: 1,\n    maxWidth: '700px'\n  }\n});\n\nfunction FormPage({ children, classes, isLoading, title, ...restProps }) {\n  return (\n    <PageWithAppBar\n      {...restProps}\n      classes={{ gridContainer: classes.gridContainer }}\n      isLoading={isLoading}\n    >\n      <Grid\n        className={classes.formContainer}\n        container\n        direction=\"column\"\n        wrap=\"nowrap\"\n        spacing={40}\n      >\n        <Grid component={Typography} item variant=\"title\">\n          {title}\n        </Grid>\n        <Grid item>{isLoading ? null : children}</Grid>\n      </Grid>\n    </PageWithAppBar>\n  );\n}\n\nexport default withStyles(styles)(FormPage);\n","import cuid from \"cuid\";\nimport construct from \"ramda/es/construct\";\nimport view from \"ramda/es/view\";\nimport lensProp from \"ramda/es/lensProp\";\nimport toISOString from \"@logistics-calc/date-utils/src/toISOString\";\n\nfunction Payment(_ref) {\n  var date = _ref.date,\n      amount = _ref.amount,\n      description = _ref.description;\n  return {\n    _id: cuid(),\n    date: toISOString(date),\n    amount: amount,\n    description: description\n  };\n}\n\nexport var create = construct(Payment);\nexport var getId = view(lensProp(\"_id\"));\nexport var getDate = view(lensProp(\"date\"));\nexport var getAmount = view(lensProp(\"amount\"));\nexport var getDescription = view(lensProp(\"description\"));","import isValid from 'date-fns/is_valid';\n\nexport const required = value =>\n  Boolean(value) ? undefined : 'Value is required';\nexport const isDataValid = value =>\n  isValid(new Date(value)) ? undefined : 'Date should be in format MM/DD/YYYY';\nexport const isNumber = value =>\n  Number.isInteger(parseInt(value)) ? undefined : 'Should be a number';\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport map from 'ramda/es/map';\n\nimport Table from '@material-ui/core/es/Table/Table';\nimport TableHead from '@material-ui/core/es/TableHead/TableHead';\nimport TableCell from '@material-ui/core/es/TableCell/TableCell';\nimport TableRow from '@material-ui/core/es/TableRow/TableRow';\nimport TableBody from '@material-ui/core/es/TableBody/TableBody';\n\nimport {\n  getAmount,\n  getDate,\n  getDescription,\n  getId\n} from '@logistics-calc/companies/src/domain/models/Payment';\n\nexport default function PaymentHistory({ paymentHistory }) {\n  return (\n    <Table>\n      <TableHead>\n        <TableRow>\n          <TableCell align=\"center\">Date</TableCell>\n          <TableCell align=\"center\">Amount</TableCell>\n          <TableCell align=\"center\">Description</TableCell>\n        </TableRow>\n      </TableHead>\n      <TableBody>\n        {map(\n          row => (\n            <TableRow key={getId(row)}>\n              <TableCell align=\"center\">{getDate(row)}</TableCell>\n              <TableCell align=\"center\">{getAmount(row)}</TableCell>\n              <TableCell align=\"center\">{getDescription(row)}</TableCell>\n            </TableRow>\n          ),\n          paymentHistory\n        )}\n      </TableBody>\n    </Table>\n  );\n}\n\nPaymentHistory.propTypes = {\n  paymentHistory: PropTypes.array\n};\n\nPaymentHistory.defaultProps = {\n  paymentHistory: []\n};\n","import React from 'react';\nimport { Field, Form } from 'react-final-form';\n\nimport either from 'ramda/es/either';\n\nimport Grid from '@material-ui/core/Grid';\nimport TextField from '@material-ui/core/TextField';\nimport Add from '@material-ui/icons/Add';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport { required, isDataValid, isNumber } from '../../../form/ui/validators';\n\nexport default function PaymentForm({ onSubmit }) {\n  return (\n    <Form onSubmit={onSubmit}>\n      {({ handleSubmit, submitting }) => (\n        <Grid\n          alignItems=\"center\"\n          container\n          direction=\"row\"\n          spacing={32}\n          wrap=\"nowrap\"\n        >\n          <Grid item>\n            <Field name=\"date\" validate={either(required, isDataValid)}>\n              {({ input, meta: { error, touched } }) => (\n                <TextField\n                  {...input}\n                  error={touched && Boolean(error)}\n                  fullWidth\n                  helperText={touched && error}\n                  label=\"Date\"\n                  placeholder=\"2/25/2012\"\n                />\n              )}\n            </Field>\n          </Grid>\n          <Grid item>\n            <Field name=\"amount\" validate={either(required, isNumber)}>\n              {({ input, meta: { error, touched } }) => (\n                <TextField\n                  {...input}\n                  error={touched && Boolean(error)}\n                  fullWidth\n                  helperText={touched && error}\n                  label=\"Amount\"\n                  placeholder=\"1000\"\n                />\n              )}\n            </Field>\n          </Grid>\n          <Grid item>\n            <Field name=\"description\" validate={required}>\n              {({ input, meta: { error, touched } }) => (\n                <TextField\n                  {...input}\n                  error={touched && Boolean(error)}\n                  fullWidth\n                  helperText={touched && error}\n                  label=\"Description\"\n                />\n              )}\n            </Field>\n          </Grid>\n          <Grid item>\n            <IconButton\n              color=\"primary\"\n              disabled={submitting}\n              onClick={handleSubmit}\n              variant=\"outlined\"\n            >\n              <Add fontSize=\"small\" />\n            </IconButton>\n          </Grid>\n        </Grid>\n      )}\n    </Form>\n  );\n}\n","import React, { useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport { Form, Field } from 'react-final-form';\n\nimport append from 'ramda/es/append';\n\nimport Grid from '@material-ui/core/Grid';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography/Typography';\n\nimport formatDate from '@logistics-calc/date-utils/src/formatDate';\nimport {\n  getFoundationDate,\n  getPaymentHistory\n} from '@logistics-calc/companies/src/domain/models/Company';\nimport { create as createPayment } from '@logistics-calc/companies/src/domain/models/Payment';\n\nimport { required, isDataValid } from '../../../form/ui/validators';\nimport Permit from '../../../priveleges/Permit';\n\nimport PaymentHistory from '../payment-history/PaymentHistory';\nimport PaymentForm from '../payment-form/PaymentForm';\n\nimport { COMPANY_SHAPE } from '../constants';\n\nexport default function CompanyForm({ company, onReset, onSubmit }) {\n  const onSubmitAdapter = values => {\n    onSubmit({\n      ...values,\n      foundationDate: new Date(values.foundationDate),\n      charterCapital: Number(values.charterCapital)\n    });\n  };\n\n  const formattedCompany = useMemo(() => {\n    if (!company) {\n      return company;\n    }\n\n    return {\n      ...company,\n      foundationDate: formatDate(getFoundationDate(company)),\n      paymentHistory: getPaymentHistory(company)\n    };\n  }, [company]);\n\n  return (\n    <Form initialValues={formattedCompany} onSubmit={onSubmitAdapter}>\n      {({ handleSubmit, submitting }) => (\n        <Grid\n          component=\"form\"\n          container\n          direction=\"column\"\n          onReset={onReset}\n          onSubmit={handleSubmit}\n          spacing={40}\n        >\n          <Grid item>\n            <Field name=\"name\" validate={required}>\n              {({ input, meta: { error, touched } }) => (\n                <TextField\n                  {...input}\n                  autoFocus\n                  error={touched && Boolean(error)}\n                  fullWidth\n                  helperText={touched && error}\n                  label=\"Name\"\n                />\n              )}\n            </Field>\n          </Grid>\n          <Grid item>\n            <Field\n              name=\"foundationDate\"\n              validate={value => required(value) || isDataValid(value)}\n            >\n              {({ input, meta: { error, touched } }) => (\n                <TextField\n                  {...input}\n                  error={touched && Boolean(error)}\n                  fullWidth\n                  helperText={touched && error}\n                  label=\"Foundation date\"\n                  placeholder=\"2/25/2012\"\n                />\n              )}\n            </Field>\n          </Grid>\n          <Grid item>\n            <Field name=\"charterCapital\" validate={required}>\n              {({ input, meta: { error, touched } }) => (\n                <TextField\n                  {...input}\n                  error={touched && Boolean(error)}\n                  fullWidth\n                  helperText={touched && error}\n                  label=\"Charter capital\"\n                  type=\"number\"\n                />\n              )}\n            </Field>\n          </Grid>\n\n          <Field name=\"paymentHistory\">\n            {({ input: { value, onChange } }) => (\n              <>\n                <Permit>\n                  <Grid item>\n                    <Typography variant=\"caption\">New payment</Typography>\n\n                    <PaymentForm\n                      onSubmit={values => {\n                        const payment = createPayment({\n                          date: new Date(values.date),\n                          amount: Number(values.amount),\n                          description: values.description\n                        });\n                        onChange(append(payment, value));\n                      }}\n                    />\n                  </Grid>\n                </Permit>\n\n                <Grid item>\n                  <Typography variant=\"caption\">Payment history</Typography>\n                  <PaymentHistory paymentHistory={value} />\n                </Grid>\n              </>\n            )}\n          </Field>\n\n          <Grid item>\n            <Grid container justify=\"flex-end\" spacing={16}>\n              <Grid item>\n                <Button type=\"reset\">Cancel</Button>\n              </Grid>\n              <Permit>\n                <Grid item>\n                  <Button\n                    color=\"primary\"\n                    disabled={submitting}\n                    type=\"submit\"\n                    variant=\"contained\"\n                  >\n                    Submit\n                  </Button>\n                </Grid>\n              </Permit>\n            </Grid>\n          </Grid>\n        </Grid>\n      )}\n    </Form>\n  );\n}\n\nCompanyForm.propTypes = {\n  company: COMPANY_SHAPE,\n  onReset: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired\n};\n","import React, { useContext, useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport SimpleAppBar from \"../../SimpleAppBar\";\n\nimport AppMenu from \"../../menu/ui/AppMenu\";\nimport FormPage from \"../../FormPage\";\nimport CompanyForm from \"./form/CompanyForm\";\nimport AppContext from \"../../AppContext\";\n\n\nfunction EditCompanyPage({ match, history }) {\n  const [state, setState] = useState({\n    company: null,\n    isLoading: true\n  });\n  const { services: { companies: companiesService } } = useContext(AppContext);\n\n  const companyId = match.params.id;\n  const { company, isLoading } = state;\n\n  const companyName = isLoading ? '' : company.name;\n\n  const fetchCompany = async () => {\n    setState(state => ({ ...state, isLoading: true }));\n    try {\n      const result = await companiesService.getCompanyById(companyId);\n      setState(state => ({\n        ...state,\n        company: result\n      }));\n    } finally {\n      setState(state => ({\n        ...state,\n        isLoading: false\n      }));\n    }\n  };\n\n  useEffect(() => {\n    fetchCompany();\n  }, []);\n\n  const appBar = (\n    <SimpleAppBar\n      title={isLoading ? \"Please wait...\" : companyName}\n    />\n  );\n\n  const onReset = (e) => {\n    e.preventDefault();\n    history.replace({ pathname: '/' });\n  };\n\n  const onSubmit = async (values) => {\n    await companiesService.editCompany(company, values);\n    history.replace({ pathname: '/' });\n  };\n\n  return (\n    <AppMenu>\n      <FormPage\n        appBar={appBar}\n        isLoading={state.isLoading}\n        title={`Edit ${companyName}`}\n      >\n        <CompanyForm\n          company={company}\n          onReset={onReset}\n          onSubmit={onSubmit}\n        />\n      </FormPage>\n    </AppMenu>\n  );\n}\n\nEditCompanyPage.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string.isRequired\n    }).isRequired\n  }).isRequired,\n  history: PropTypes.shape({\n    goBack: PropTypes.func,\n  }).isRequired,\n};\n\nexport default EditCompanyPage;\n","import React, { useContext } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport SimpleAppBar from \"../../SimpleAppBar\";\n\nimport AppMenu from \"../../menu/ui/AppMenu\";\nimport FormPage from \"../../FormPage\";\nimport CompanyForm from \"./form/CompanyForm\";\nimport AppContext from \"../../AppContext\";\n\n\nfunction CreateCompanyPage({ history }) {\n  const { services: { companies } } = useContext(AppContext);\n\n  const appBar = (\n    <SimpleAppBar\n      title=\"Create new company\"\n    />\n  );\n\n  const onReset = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    history.replace('/');\n  };\n\n  const onSubmit = async (values) => {\n    await companies.createCompany(values);\n    history.replace('/');\n  };\n\n  return (\n    <AppMenu>\n      <FormPage\n        appBar={appBar}\n        title={`Create new company`}\n      >\n        <CompanyForm\n          onReset={onReset}\n          onSubmit={onSubmit}\n        />\n      </FormPage>\n    </AppMenu>\n  );\n}\n\nCreateCompanyPage.propTypes = {\n  history: PropTypes.shape({\n    goBack: PropTypes.func,\n  }).isRequired,\n};\n\nexport default CreateCompanyPage;\n","import _regeneratorRuntime from \"/Users/dzianis_roi/Projects/logistics-risks-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/dzianis_roi/Projects/logistics-risks-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport PouchDb from 'pouchdb';\n\nvar CompaniesStore = function CompaniesStore(_ref) {\n  var dbUrl = _ref.dbUrl;\n  var db = new PouchDb(\"\".concat(dbUrl, \"/companies\"));\n  return {\n    getList: function getList() {\n      return db.allDocs({\n        include_docs: true\n      });\n    },\n    getById: function () {\n      var _getById = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(id) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", db.get(id));\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getById(_x) {\n        return _getById.apply(this, arguments);\n      }\n\n      return getById;\n    }(),\n    saveItem: function () {\n      var _saveItem = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(item) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                return _context2.abrupt(\"return\", db.post(item));\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function saveItem(_x2) {\n        return _saveItem.apply(this, arguments);\n      }\n\n      return saveItem;\n    }(),\n    updateItem: function () {\n      var _updateItem = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(item) {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                return _context3.abrupt(\"return\", db.put(item));\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function updateItem(_x3) {\n        return _updateItem.apply(this, arguments);\n      }\n\n      return updateItem;\n    }()\n  };\n};\n\nexport default CompaniesStore;","import { create, update } from \"../models/Company\";\n\nvar CompaniesService = function CompaniesService(_ref) {\n  var companiesStore = _ref.companiesStore;\n  return {\n    createCompany: function createCompany(data) {\n      var company = create(data);\n      return companiesStore.saveItem(company);\n    },\n    editCompany: function editCompany(company, data) {\n      var updatedCompany = update(data, company);\n      return companiesStore.updateItem(updatedCompany);\n    },\n    getCompanies: function getCompanies() {\n      return companiesStore.getList();\n    },\n    getCompanyById: function getCompanyById(id) {\n      return companiesStore.getById(id);\n    }\n  };\n};\n\nexport default CompaniesService;","export default class UserNotFoundError extends Error {\n  constructor(login) {\n    super(`User \"${login}\" doesn't exist`);\n  }\n}\n","export default class IncorrectPasswordError extends Error {\n  constructor() {\n    super(`Invalid password`);\n  }\n}\n","import UserNotFoundError from '../errors/UserNotFoundError';\nimport IncorrectPasswordError from '../errors/IncorrectPasswordError';\n\nfunction authenticate(values) {\n  return new Promise((resolve, reject) => {\n    const { login, password } = values;\n\n    if (login !== 'admin' && login !== 'user') {\n      reject(new UserNotFoundError(login));\n      return;\n    }\n\n    if (\n      (login === 'admin' && password !== 'admin') ||\n      (login === 'user' && password !== 'user')\n    ) {\n      reject(new IncorrectPasswordError());\n      return;\n    }\n\n    localStorage.setItem('isAuthenticated', 'true');\n    localStorage.setItem('isAdmin', login === 'admin');\n\n    resolve();\n  });\n}\n\nexport default authenticate;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Form, Field } from \"react-final-form\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { required } from '../../../form/ui/validators';\n\n\nfunction LoginForm({ className, onSubmit }) {\n  return (\n    <Form onSubmit={onSubmit}>\n      {({ handleSubmit, submitError, submitting }) => (\n        <Grid\n          alignContent=\"center\"\n          className={className}\n          component=\"form\"\n          container\n          onSubmit={handleSubmit}\n          spacing={40}\n        >\n          {submitError ? (\n            <Grid\n              color=\"error\"\n              component={Typography}\n              item\n              xs={12}\n            >\n              {submitError}\n            </Grid>\n          ) : null}\n\n          <Grid item xs={12}>\n            <Field\n              name=\"login\"\n              validate={required}\n            >\n              {({ input, meta: { error, touched, submitError } }) => (\n                <TextField\n                  {...input}\n                  autoFocus\n                  error={touched && Boolean(error || submitError)}\n                  fullWidth\n                  helperText={touched && (error || submitError)}\n                  placeholder=\"Login\"\n                />\n              )}\n            </Field>\n          </Grid>\n\n          <Grid item xs={12}>\n            <Field\n              name=\"password\"\n              validate={required}\n            >\n              {({ input, meta: { error, touched } }) => (\n                <TextField\n                  {...input}\n                  error={touched && Boolean(error)}\n                  fullWidth\n                  helperText={touched && error}\n                  placeholder=\"Password\"\n                  type=\"password\"\n                />\n              )}\n            </Field>\n          </Grid>\n\n          <Grid item xs={12}>\n            <Button\n              color=\"primary\"\n              disabled={submitting}\n              fullWidth\n              type=\"submit\"\n              variant=\"contained\"\n            >\n              Submit\n            </Button>\n          </Grid>\n        </Grid>\n      )}\n    </Form>\n  );\n}\n\nLoginForm.propTypes = {\n  className: PropTypes.string,\n  onSubmit: PropTypes.func.isRequired\n};\n\nLoginForm.defaultProps = {\n  className: \"\"\n};\n\nexport default LoginForm;\n","import React from \"react\";\nimport withStyles from \"@material-ui/core/styles/withStyles\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { FORM_ERROR } from \"final-form\";\n\nimport Page from '../../Page';\n\nimport authenticate from '../domain/services/authenticate';\n\nimport LoginForm from './form/LoginForm';\nimport UserNotFoundError from \"../domain/errors/UserNotFoundError\";\nimport IncorrectPasswordError from \"../domain/errors/IncorrectPasswordError\";\n\n\nconst styles = (theme) => ({\n  root: {\n    paddingTop: theme.spacing.unit * 8,\n  },\n  form: {\n    margin: `${theme.spacing.unit * 8}px auto`,\n    maxWidth: '360px',\n  }\n});\n\nfunction LoginPage({ classes, history }) {\n  const onSubmit = async (values) => {\n    try {\n      await authenticate(values);\n      history.replace({ pathname: '/' });\n    } catch(e) {\n      if (e instanceof UserNotFoundError) {\n        return { login: e.message };\n      } else if (e instanceof IncorrectPasswordError) {\n        return { [FORM_ERROR]: 'Incorrect credentials' };\n      }\n\n      throw e;\n    }\n  };\n\n  return (\n    <Page classes={{ root: classes.root }}>\n      <Typography\n        align=\"center\"\n        paragraph={false}\n        variant=\"title\"\n      >\n        Welcome\n      </Typography>\n\n      <Typography\n        align=\"center\"\n        color=\"textSecondary\"\n      >\n        to\n      </Typography>\n\n      <Typography\n        align=\"center\"\n        color=\"primary\"\n        variant=\"headline\"\n      >\n        Logistics Risks Calculator\n      </Typography>\n\n      <LoginForm\n        className={classes.form}\n        onSubmit={onSubmit}\n      />\n    </Page>\n  );\n}\n\nexport default withStyles(styles)(LoginPage);\n","function isAuthenticated() {\n  return localStorage.getItem('isAuthenticated') === 'true';\n}\n\nexport default isAuthenticated;\n","import React from 'react';\nimport { Redirect } from 'react-router-dom';\n\nimport isAuthenticated from \"../domain/services/isAuthenticated\";\n\nfunction SecureRoute({ children }) {\n  if (!isAuthenticated()) {\n    return (\n      <Redirect\n        to={{\n          pathname: '/login',\n        }}\n      />\n    )\n  }\n\n  return children;\n}\n\nexport default SecureRoute;\n","import React from 'react';\nimport { HashRouter as Router, Route, Switch } from 'react-router-dom';\n\nimport RisksStore from '@logistics-calc/risks/src/domain/data/RisksStore';\nimport RisksService from '@logistics-calc/risks/src/domain/services/RisksService';\n\nimport CompaniesTablePage from './companies/ui/CompaniesTablePage';\nimport EditCompanyPage from './companies/ui/EditCompanyPage';\nimport CreateCompanyPage from './companies/ui/CreateCompanyPage';\nimport CompaniesStore from '@logistics-calc/companies/src/domain/data/CompaniesStore';\nimport CompaniesService from '@logistics-calc/companies/src/domain/services/CompaniesService';\nimport LoginPage from './auth/ui/LoginPage';\nimport SecureRoute from './auth/ui/SecureRoute';\nimport AppContext from './AppContext';\n\nimport './App.css';\n\nconst dbUrl =\n  'https://609ce380-698c-48ed-a70f-6eefc8446f54-bluemix:ee5cf67260942c15b000fceeede84f7762628d5fbdf85a83d26bf4225656e333@609ce380-698c-48ed-a70f-6eefc8446f54-bluemix.cloudantnosqldb.appdomain.cloud';\n\nconst companiesStore = CompaniesStore({ dbUrl });\nconst companiesService = CompaniesService({ companiesStore });\nconst risksStore = RisksStore({ dbUrl });\nconst risksService = RisksService({ risksStore });\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <AppContext.Provider\n        value={{\n          services: { companies: companiesService, risks: risksService }\n        }}\n      >\n        <Router>\n          <Switch>\n            <Route path=\"/login\" component={LoginPage} />\n\n            <SecureRoute>\n              <Route exact path=\"/\" component={CompaniesTablePage} />\n              <Route exact path=\"/company/\" component={CreateCompanyPage} />\n              <Route path=\"/company/:id\" component={EditCompanyPage} />\n            </SecureRoute>\n          </Switch>\n        </Router>\n      </AppContext.Provider>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}