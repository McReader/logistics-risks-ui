(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{156:function(e,t,n){e.exports=n(332)},161:function(e,t,n){},331:function(e,t,n){},332:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(25),i=n.n(c),o=(n(161),n(48)),u=n(40),s=n(26),l=n(10),m=n.n(l),p=n(18),f=n(51),d=n(34),v=n(143),h=n.n(v),b=n(140),g=n.n(b),E=n(141),y=n.n(E),w=n(31),x=n.n(w),O=n(56),j=n.n(O),k=n(142),C=n.n(k),L=n(92),S=n.n(L),D=n(138),I=n.n(D),N=n(136),B=n.n(N),R=n(6),P=n.n(R);var M=function(){localStorage.removeItem("isAuthenticated")},W=Object(a.createContext)({openMenu:null});function Y(e){var t=e.classes,n=e.children,c=e.history,i=Object(a.useState)(!1),o=Object(f.a)(i,2),u=o[0],s=o[1];return r.a.createElement(W.Provider,{value:{openMenu:function(){s(!0)}}},r.a.createElement(B.a,{open:u,onClose:function(){return s(!1)}},r.a.createElement(S.a,{className:t.list},r.a.createElement(I.a,{button:!0,onClick:function(){M(),c.replace({pathname:"/login"})}},"Logout"))),n)}Y.defaultProps={open:!1};var T=Object(u.f)(P()({list:{width:"250px"}})(Y));function A(e){var t=e.classes,n=e.title,c=Object(a.useContext)(W).openMenu;return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{position:"static"},r.a.createElement(y.a,null,r.a.createElement(j.a,{className:t.menuButton,color:"inherit","aria-label":"Menu",onClick:c},r.a.createElement(C.a,null)),r.a.createElement(x.a,{variant:"h6",color:"inherit",className:t.title},n))),r.a.createElement(T,null))}A.defaultProps={title:"Logistics Risks Calculator"};var F=Object(d.withStyles)(function(e){return{title:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},buttonIconLeft:{marginRight:e.spacing.unit}}})(A),J=n(8),U=n.n(J);var q=Object(d.withStyles)({root:{display:"flex",flexFlow:"column nowrap",flexGrow:1,height:"100%"}})(function(e){var t=e.className,n=e.classes,a=e.children;return r.a.createElement("div",{className:U()(n.root,t)},a)});function G(e){var t=e.appBar,n=e.className,a=e.classes,c=e.children,i=e.isLoading;return r.a.createElement(q,{className:n},t,r.a.createElement("div",{className:a.gridContainer},i?r.a.createElement(h.a,{className:a.progress}):c))}G.defaultProps={appBar:r.a.createElement(F,null),isLoading:!1};var z=Object(d.withStyles)({gridContainer:{display:"flex",flexGrow:1,maxHeight:"100%",overflow:"auto"},progress:{alignSelf:"center",margin:"auto"}})(G),V=n(149),H=n.n(V),X=n(151),$=n.n(X),K=n(32),Q=n.n(K),Z=n(150),_=n.n(Z),ee=n(72),te=n.n(ee),ne=n(152),ae=n.n(ne),re=n(55),ce=n.n(re),ie=n(153),oe=n.n(ie),ue=n(4),se=n.n(ue),le=(se.a.shape({charterCapital:se.a.number.isRequired,id:se.a.string.isRequired,name:se.a.string.isRequired,lastUpdated:se.a.instanceOf(Date),foundationDate:se.a.string.isRequired}),n(71)),me=n.n(le);function pe(e){return e.toISOString()}var fe=function(e){return e.id},de=function(e){return e.name},ve=function(e){return e.foundationDate},he=n(341),be=n(95),ge=n.n(be),Ee=n(146),ye=n.n(Ee),we=n(145),xe=n.n(we),Oe=n(144),je=n.n(Oe);function ke(e){return je()(e,"MM/DD/YYYY")}var Ce=function(e){var t=e.companyId,n=e.value;return{id:me()(),value:n,companyId:t,createdDate:pe(new Date),lastUpdatedDate:null}},Le=function(e,t){var n=e.value;return Object(s.a)({},t,{value:n,lastUpdatedDate:pe(new Date)})},Se=function(e){return e.id},De=function(e){return e.value};var Ie={tableCellRisk:{backgroundColor:function(e){var t=e.risk;return t?function(e){return De(e)>50}(t)?"red":"green":null}}};var Ne=Object(he.a)(Ie)(function(e){var t=e.classes,n=e.company,a=e.onRecalculate,c=e.risk,i=fe(n);return r.a.createElement(te.a,null,r.a.createElement(Q.a,{component:"th",scope:"row"},de(n)),r.a.createElement(Q.a,{align:"center",classes:{root:t.tableCellRisk}},c?"".concat(De(c),"%"):"-"),r.a.createElement(Q.a,{align:"center"},ke(ve(n))),r.a.createElement(Q.a,{align:"right"},r.a.createElement(ge.a,{title:"Edit"},r.a.createElement(o.b,{to:"/company/".concat(fe(n))},r.a.createElement(j.a,{"aria-label":"Recalculate"},r.a.createElement(xe.a,{fontSize:"small"})))),r.a.createElement(ge.a,{title:"Recalculate"},r.a.createElement(j.a,{"aria-label":"Recalculate",onClick:function(){return a(i)}},r.a.createElement(ye.a,{fontSize:"small"})))))}),Be=function(e,t){return t.find(function(t){return t.companyId===e})};function Re(e){var t=e.classes,n=e.companies,a=e.onAddButtonClick,c=e.onRecalculate,i=e.risks;return r.a.createElement(ce.a,{className:t.root},r.a.createElement(H.a,{className:t.table},r.a.createElement(_.a,null,r.a.createElement(te.a,null,r.a.createElement(Q.a,null,"Company name"),r.a.createElement(Q.a,{align:"center"},"Risk"),r.a.createElement(Q.a,{align:"center"},"Foundation date"),r.a.createElement(Q.a,null))),r.a.createElement($.a,null,n.map(function(e){var t=fe(e);return r.a.createElement(Ne,{company:e,key:t,onRecalculate:c,risk:Be(t,i)})}))),r.a.createElement(ae.a,{className:t.fab,color:"primary",onClick:a},r.a.createElement(oe.a,null)))}Re.defaultProps={companies:[],risks:[]};var Pe=Object(d.withStyles)(function(e){return{root:{width:"100%",overflowX:"auto"},table:{minWidth:700},fab:{position:"absolute",bottom:4*e.spacing.unit,right:4*e.spacing.unit}}})(Re),Me=Object(a.createContext)({services:{}});var We=function(e){var t=e.history,n=Object(a.useState)({companies:[],isLoading:!1,risks:[]}),c=Object(f.a)(n,2),i=c[0],o=c[1],u=Object(a.useContext)(Me).services,l=u.companies,d=u.risks,v=function(){var e=Object(p.a)(m.a.mark(function e(){var t;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o({isLoading:!0}),e.next=3,l.getCompanies();case 3:t=e.sent,o({companies:t,isLoading:!1});case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(p.a)(m.a.mark(function e(){var t;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.getList();case 2:t=e.sent,o(function(e){return Object(s.a)({},e,{risks:t})});case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)(function(){return v(),d.subscribe(function(){h()}),h(),function(){d.unsubscribe()}},[]),r.a.createElement(T,null,r.a.createElement(z,{isLoading:i.isLoading},r.a.createElement(Pe,{companies:i.companies,onAddButtonClick:function(){t.push({pathname:"/company/"})},onRecalculate:function(e){d.calculate(e)},risks:i.risks})))},Ye=n(154),Te=n(21),Ae=n.n(Te);var Fe=P()(function(e){return{gridContainer:{justifyContent:"center",paddingTop:4*e.spacing.unit},formContainer:{flex:1,maxWidth:"360px"}}})(function(e){var t=e.children,n=e.classes,a=e.isLoading,c=e.title,i=Object(Ye.a)(e,["children","classes","isLoading","title"]);return r.a.createElement(z,Object.assign({},i,{classes:{gridContainer:n.gridContainer},isLoading:a}),r.a.createElement(Ae.a,{className:n.formContainer,container:!0,direction:"column",spacing:40},r.a.createElement(Ae.a,{component:x.a,item:!0,variant:"title"},c),r.a.createElement(Ae.a,{item:!0},a?null:t)))}),Je=n(41),Ue=n.n(Je),qe=n(58),Ge=n.n(qe),ze=n(35),Ve=n(93),He=n.n(Ve),Xe=function(e){return Boolean(e)?void 0:"Value is required"},$e=function(e){return He()(new Date(e))?void 0:"Date should be in format MM/DD/YYYY"};function Ke(e){var t=e.company,n=e.onReset,c=e.onSubmit,i=Object(a.useMemo)(function(){return t?Object(s.a)({},t,{foundationDate:ke(ve(t))}):t},[t]);return r.a.createElement(ze.b,{initialValues:i,onSubmit:function(e){c(Object(s.a)({},e,{foundationDate:new Date(e.foundationDate),charterCapital:Number(e.charterCapital)}))}},function(e){var t=e.handleSubmit,a=e.submitting;return r.a.createElement(Ae.a,{component:"form",container:!0,direction:"column",onReset:n,onSubmit:t,spacing:40},r.a.createElement(Ae.a,{item:!0},r.a.createElement(ze.a,{name:"name",validate:Xe},function(e){var t=e.input,n=e.meta,a=n.error,c=n.touched;return r.a.createElement(Ue.a,Object.assign({},t,{autoFocus:!0,error:c&&Boolean(a),fullWidth:!0,helperText:c&&a,label:"Name"}))})),r.a.createElement(Ae.a,{item:!0},r.a.createElement(ze.a,{name:"foundationDate",validate:function(e){return Xe(e)||$e(e)}},function(e){var t=e.input,n=e.meta,a=n.error,c=n.touched;return r.a.createElement(Ue.a,Object.assign({},t,{error:c&&Boolean(a),fullWidth:!0,helperText:c&&a,label:"Foundation date",placeholder:"2/25/2012"}))})),r.a.createElement(Ae.a,{item:!0},r.a.createElement(ze.a,{name:"charterCapital",validate:Xe},function(e){var t=e.input,n=e.meta,a=n.error,c=n.touched;return r.a.createElement(Ue.a,Object.assign({},t,{error:c&&Boolean(a),fullWidth:!0,helperText:c&&a,label:"Charter capital",type:"number"}))})),r.a.createElement(Ae.a,{item:!0},r.a.createElement(Ae.a,{container:!0,justify:"flex-end",spacing:16},r.a.createElement(Ae.a,{item:!0},r.a.createElement(Ge.a,{type:"reset"},"Cancel")),r.a.createElement(Ae.a,{item:!0},r.a.createElement(Ge.a,{color:"primary",disabled:a,type:"submit",variant:"contained"},"Submit")))))})}var Qe=function(e){var t=e.match,n=e.history,c=Object(a.useState)({company:null,isLoading:!0}),i=Object(f.a)(c,2),o=i[0],u=i[1],l=Object(a.useContext)(Me).services.companies,d=t.params.id,v=o.company,h=o.isLoading,b=h?"":v.name,g=function(){var e=Object(p.a)(m.a.mark(function e(){var t;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u(function(e){return Object(s.a)({},e,{isLoading:!0})}),e.prev=1,e.next=4,l.getCompanyById(d);case 4:t=e.sent,u(function(e){return Object(s.a)({},e,{company:t})});case 6:return e.prev=6,u(function(e){return Object(s.a)({},e,{isLoading:!1})}),e.finish(6);case 9:case"end":return e.stop()}},e,null,[[1,,6,9]])}));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)(function(){g()},[]);var E=r.a.createElement(F,{title:h?"Please wait...":b}),y=function(){var e=Object(p.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.editCompany(v,t);case 2:n.replace({pathname:"/"});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(T,null,r.a.createElement(Fe,{appBar:E,isLoading:o.isLoading,title:"Edit ".concat(b)},r.a.createElement(Ke,{company:v,onReset:function(e){e.preventDefault(),n.replace({pathname:"/"})},onSubmit:y})))};var Ze=function(e){var t=e.history,n=Object(a.useContext)(Me).services.companies,c=r.a.createElement(F,{title:"Create new company"}),i=function(){var e=Object(p.a)(m.a.mark(function e(a){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.createCompany(a);case 2:t.replace("/");case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(T,null,r.a.createElement(Fe,{appBar:c,title:"Create new company"},r.a.createElement(Ke,{onReset:function(e){e.preventDefault(),e.stopPropagation(),t.replace("/")},onSubmit:i})))},_e=n(52),et=function(e){var t=e.localStorage,n=e.parseList,a=void 0===n?JSON.parse:n,r=e.formatList,c=void 0===r?JSON.stringify:r;return{getList:function(){return Promise.resolve(a(t.getItem("companies"))||[])},getById:function(){var e=Object(p.a)(m.a.mark(function e(t){var n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getList();case 2:return n=e.sent,e.abrupt("return",Promise.resolve(n.find(function(e){return fe(e)===t})));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),saveItem:function(){var e=Object(p.a)(m.a.mark(function e(t){var n,a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getList();case 2:return n=e.sent,a=[].concat(Object(_e.a)(n),[t]),e.abrupt("return",this.saveList(a));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),updateItem:function(){var e=Object(p.a)(m.a.mark(function e(t){var n,a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getList();case 2:return n=e.sent,a=n.map(function(e){return fe(e)!==fe(t)?e:t}),e.abrupt("return",this.saveList(a));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),saveList:function(e){return t.setItem("companies",c(e)),Promise.resolve()}}},tt=function(e){var t=e.companiesStore;return{createCompany:function(e){var n=function(e){var t=e.name,n=e.foundationDate,a=e.charterCapital;return{id:me()(),charterCapital:a,foundationDate:n,lastUpdatedDate:null,name:t,createdDate:pe(new Date)}}(e);return t.saveItem(n)},editCompany:function(e,n){var a=function(e,t){var n=e.name,a=e.foundationDate,r=e.charterCapital;return Object(s.a)({},t,{charterCapital:r,foundationDate:a,lastUpdatedDate:pe(new Date),name:n})}(n,e);return t.updateItem(a)},getCompanies:function(){return t.getList()},getCompanyById:function(e){return t.getById(e)}}},nt=n(69),at=n(33),rt=n(73),ct=n(76),it=n(49),ot=n(74),ut=n(75),st=function(e){function t(e){return Object(rt.a)(this,t),Object(ct.a)(this,Object(it.a)(t).call(this,'User "'.concat(e,"\" doesn't exist")))}return Object(ot.a)(t,e),t}(Object(ut.a)(Error)),lt=function(e){function t(){return Object(rt.a)(this,t),Object(ct.a)(this,Object(it.a)(t).call(this,"Invalid password"))}return Object(ot.a)(t,e),t}(Object(ut.a)(Error));var mt=function(e){return new Promise(function(t,n){var a=e.login,r=e.password;"admin"===a?"admin"===r?(localStorage.setItem("isAuthenticated","true"),t()):n(new lt):n(new st(a))})};function pt(e){var t=e.className,n=e.onSubmit;return r.a.createElement(ze.b,{onSubmit:n},function(e){var n=e.handleSubmit,a=e.submitError,c=e.submitting;return r.a.createElement(Ae.a,{alignContent:"center",className:t,component:"form",container:!0,onSubmit:n,spacing:40},a?r.a.createElement(Ae.a,{color:"error",component:x.a,item:!0,xs:12},a):null,r.a.createElement(Ae.a,{item:!0,xs:12},r.a.createElement(ze.a,{name:"login",validate:Xe},function(e){var t=e.input,n=e.meta,a=n.error,c=n.touched,i=n.submitError;return r.a.createElement(Ue.a,Object.assign({},t,{autoFocus:!0,error:c&&Boolean(a||i),fullWidth:!0,helperText:c&&(a||i),placeholder:"Login"}))})),r.a.createElement(Ae.a,{item:!0,xs:12},r.a.createElement(ze.a,{name:"password",validate:Xe},function(e){var t=e.input,n=e.meta,a=n.error,c=n.touched;return r.a.createElement(Ue.a,Object.assign({},t,{error:c&&Boolean(a),fullWidth:!0,helperText:c&&a,placeholder:"Password",type:"password"}))})),r.a.createElement(Ae.a,{item:!0,xs:12},r.a.createElement(Ge.a,{color:"primary",disabled:c,fullWidth:!0,type:"submit",variant:"contained"},"Submit")))})}pt.defaultProps={className:""};var ft=pt;var dt=P()(function(e){return{root:{paddingTop:8*e.spacing.unit},form:{margin:"".concat(8*e.spacing.unit,"px auto"),maxWidth:"360px"}}})(function(e){var t=e.classes,n=e.history,a=function(){var e=Object(p.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,mt(t);case 3:n.replace({pathname:"/"}),e.next=15;break;case 6:if(e.prev=6,e.t0=e.catch(0),!(e.t0 instanceof st)){e.next=12;break}return e.abrupt("return",{login:e.t0.message});case 12:if(!(e.t0 instanceof lt)){e.next=14;break}return e.abrupt("return",Object(nt.a)({},at.a,"Incorrect credentials"));case 14:throw e.t0;case 15:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(q,{classes:{root:t.root}},r.a.createElement(x.a,{align:"center",paragraph:!1,variant:"title"},"Welcome"),r.a.createElement(x.a,{align:"center",color:"textSecondary"},"to"),r.a.createElement(x.a,{align:"center",color:"primary",variant:"headline"},"Logistics Risks Calculator"),r.a.createElement(ft,{className:t.form,onSubmit:a}))});var vt=function(){return"true"===localStorage.getItem("isAuthenticated")};var ht=function(e){var t=e.children;return vt()?t:r.a.createElement(u.a,{to:{pathname:"/login"}})},bt=function(e){var t=e.localStorage,n=e.parseList,a=void 0===n?JSON.parse:n,r=e.formatList,c=void 0===r?JSON.stringify:r;return{getList:function(){return Promise.resolve(a(t.getItem("risks"))||[])},getByCompanyId:function(){var e=Object(p.a)(m.a.mark(function e(t){var n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getList();case 2:return n=e.sent,e.abrupt("return",Promise.resolve(Be(t,n)));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),saveItem:function(){var e=Object(p.a)(m.a.mark(function e(t){var n,a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getList();case 2:return n=e.sent,a=[].concat(Object(_e.a)(n),[t]),e.abrupt("return",this.saveList(a));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),updateItem:function(){var e=Object(p.a)(m.a.mark(function e(t){var n,a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getList();case 2:return n=e.sent,a=n.map(function(e){return Se(e)!==Se(t)?e:t}),e.abrupt("return",this.saveList(a));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),saveList:function(e){return t.setItem("risks",c(e)),Promise.resolve()}}},gt=function(e){var t,n=e.risksStore;return{calculate:function(){var e=Object(p.a)(m.a.mark(function e(a){var r,c;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getByCompanyId(a);case 2:if(r=e.sent,i=10,o=100,i=Math.ceil(i),o=Math.floor(o),c=Math.floor(Math.random()*(o-i+1))+i,!r){e.next=9;break}return e.next=7,n.updateItem(Le({value:c},r));case 7:e.next=11;break;case 9:return e.next=11,n.saveItem(Ce({value:c,companyId:a}));case 11:t&&t();case 12:case"end":return e.stop()}var i,o},e)}));return function(t){return e.apply(this,arguments)}}(),getList:function(){return n.getList()},subscribe:function(e){t=e},unsubscribe:function(){t=null}}},Et=(n(331),tt({companiesStore:et({localStorage:localStorage})})),yt=gt({risksStore:bt({localStorage:localStorage})});var wt=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(Me.Provider,{value:{services:{companies:Et,risks:yt}}},r.a.createElement(o.a,null,r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/login",component:dt}),r.a.createElement(ht,null,r.a.createElement(u.b,{exact:!0,path:"/",component:We}),r.a.createElement(u.b,{exact:!0,path:"/company/",component:Ze}),r.a.createElement(u.b,{path:"/company/:id",component:Qe}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(wt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[156,1,2]]]);
//# sourceMappingURL=main.a06cffec.chunk.js.map