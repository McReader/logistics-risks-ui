{"version":3,"sources":["../packages/risks/src/domain/data/RisksStore.js","../packages/date-utils/src/toISOString.js","../packages/risks/src/domain/models/Risk.js","../packages/risks/src/domain/services/RisksService.js","auth/domain/services/logout.js","menu/ui/AppMenuContext.js","menu/ui/AppMenu.js","SimpleAppBar.js","Page.js","PageWithAppBar.js","../packages/companies/src/domain/models/Company.js","../packages/risks/src/domain/models/RisksCollection.js","priveleges/Permit.js","companies/ui/constants.js","../packages/date-utils/src/formatDate.js","../packages/risks/src/domain/services/isHighRisk.js","companies/ui/table/CompaniesTableItem.js","companies/ui/table/CompaniesTable.js","AppContext.js","companies/ui/CompaniesTablePage.js","FormPage.js","../packages/companies/src/domain/models/Payment.js","form/ui/validators.js","companies/ui/payment-history/PaymentHistory.js","companies/ui/payment-form/PaymentForm.js","companies/ui/form/CompanyForm.js","companies/ui/EditCompanyPage.js","companies/ui/CreateCompanyPage.js","../packages/companies/src/domain/data/CompaniesStore.js","../packages/companies/src/domain/services/CompaniesService.js","auth/domain/errors/UserNotFoundError.js","auth/domain/errors/IncorrectPasswordError.js","auth/domain/services/authenticate.js","auth/ui/form/LoginForm.js","auth/ui/LoginPage.js","auth/domain/services/isAuthenticated.js","auth/ui/SecureRoute.js","App.js","serviceWorker.js","index.js"],"names":["index_browser_es","plugin","lib_index_browser_es","data_RisksStore","_ref","dbUrl","db","concat","getList","allDocs","include_docs","getByCompanyId","_getByCompanyId","Object","asyncToGenerator","regenerator_default","a","mark","_callee","companyId","getFirstResult","wrap","_context","prev","next","pipe","view","lensProp","head","abrupt","find","selector","then","stop","_x","apply","this","arguments","saveItem","_saveItem","_callee2","item","_context2","post","_x2","updateItem","_updateItem","_callee3","_context3","put","_x3","toISOString","date","format_default","Risk_create","value","createdDate","Date","lastUpdatedDate","Risk_update","_ref2","risk","objectSpread","getCompanyId","getValue","modelUrl","services_RisksService","listener","risksStore","calculate","_calculate","model","xs","ys","tf_esm","sent","t0","add","dense","units","inputShape","compile","loss","optimizer","fit","epochs","save","predict","min","max","Math","ceil","floor","random","subscribe","l","unsubscribe","logout","localStorage","removeItem","AppMenuContext","createContext","openMenu","AppMenu","classes","children","history","_useState","useState","_useState2","slicedToArray","isOpened","setIsOpened","react_default","createElement","ui_AppMenuContext","Provider","Drawer_default","open","onClose","List_default","className","list","ListItem_default","button","onClick","replace","pathname","defaultProps","withRouter","withStyles","width","SimpleAppBar","props","title","useContext","Fragment","AppBar_default","position","Toolbar_default","IconButton_default","menuButton","color","aria-label","Menu_default","Typography_default","variant","ui_AppMenu","theme","flexGrow","marginLeft","marginRight","buttonIconLeft","spacing","unit","root","display","flexFlow","height","classnames","PageWithAppBar","appBar","isLoading","src_Page","gridContainer","CircularProgress_default","progress","src_SimpleAppBar","maxHeight","overflow","alignSelf","margin","Company_getId","getName","getFoundationDate","getPaymentHistory","defaultTo","RisksCollection_getByCompanyId","risks","Permit","getItem","PropTypes","shape","charterCapital","number","isRequired","_id","string","name","lastUpdated","instanceOf","foundationDate","formatDate","isHighRisk","CompaniesTableItem","company","onRecalculate","getId","TableRow_default","TableCell_default","align","style","backgroundColor","Tooltip_default","react_router_dom","to","Edit_default","fontSize","Refresh_default","CompaniesTable","companies","onAddButtonClick","Paper_default","Table_default","table","TableHead_default","TableBody_default","map","table_CompaniesTableItem","key","Fab_default","fab","Add_default","overflowX","minWidth","bottom","right","AppContext","services","getRows","mapDocs","selectDocumentsList","CompaniesTablePage","state","setState","_useContext$services","companiesService","risksService","fetchCompanies","response","getCompanies","fetchRisks","_ref3","useEffect","src_PageWithAppBar","table_CompaniesTable","push","categoryId","justifyContent","paddingTop","formContainer","flex","maxWidth","restProps","objectWithoutProperties","assign","Grid_default","container","direction","component","Typography","Payment_create","construct","amount","plannedDate","cuid_default","Payment_getId","getDate","getPlannedDate","getAmount","required","Boolean","undefined","isDataValid","isValid","isNumber","Number","isInteger","parseInt","PaymentHistory","paymentHistory","Table_Table","TableHead_TableHead","TableRow_TableRow","TableCell_TableCell","TableBody_TableBody","row","PaymentForm","onSubmit","react_final_form_es","handleSubmit","submitting","alignItems","validate","either","input","_ref3$meta","meta","error","touched","TextField_default","fullWidth","helperText","label","_ref4","_ref4$meta","placeholder","_ref5","_ref5$meta","disabled","CompanyForm","onReset","formattedCompany","useMemo","initialValues","values","autoFocus","type","_ref6","_ref6$input","onChange","Typography_Typography_default","payment","createPayment","append","justify","Button_default","EditCompanyPage","match","params","id","companyName","fetchCompany","result","getCompanyById","finish","editCompany","src_FormPage","e","preventDefault","CreateCompanyPage","createCompany","stopPropagation","data_CompaniesStore","getById","_getById","get","services_CompaniesService","companiesStore","data","Company_create","updatedCompany","Company_update","UserNotFoundError","login","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","Error","IncorrectPasswordError","authenticate","Promise","resolve","reject","password","setItem","LoginForm","submitError","alignContent","form","message","defineProperty","FORM_ERROR","paragraph","form_LoginForm","isAuthenticated","SecureRoute","react_router","CompaniesService","CompaniesStore","RisksService","RisksStore","App","src_AppContext","path","LoginPage","ui_SecureRoute","exact","window","location","hostname","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.68efcde4.chunk.js","sourcesContent":["import _regeneratorRuntime from \"/Users/dzianis_roi/Projects/logistics-risks-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/dzianis_roi/Projects/logistics-risks-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport PouchDB from \"pouchdb\";\nimport PouchDBFind from \"pouchdb-find\";\nimport view from 'ramda/es/view';\nimport lensProp from \"ramda/es/lensProp\";\nimport pipe from \"ramda/es/pipe\";\nimport head from \"ramda/es/head\";\nPouchDB.plugin(PouchDBFind);\n\nvar RisksStore = function RisksStore(_ref) {\n  var dbUrl = _ref.dbUrl;\n  var db = new PouchDB(\"\".concat(dbUrl, \"/risks\"));\n  return {\n    getList: function getList() {\n      return db.allDocs({\n        include_docs: true\n      });\n    },\n    getByCompanyId: function () {\n      var _getByCompanyId = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(companyId) {\n        var getFirstResult;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                getFirstResult = pipe(view(lensProp('docs')), head);\n                return _context.abrupt(\"return\", db.find({\n                  selector: {\n                    companyId: companyId\n                  }\n                }).then(getFirstResult));\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getByCompanyId(_x) {\n        return _getByCompanyId.apply(this, arguments);\n      }\n\n      return getByCompanyId;\n    }(),\n    saveItem: function () {\n      var _saveItem = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(item) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                return _context2.abrupt(\"return\", db.post(item));\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function saveItem(_x2) {\n        return _saveItem.apply(this, arguments);\n      }\n\n      return saveItem;\n    }(),\n    updateItem: function () {\n      var _updateItem = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(item) {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                return _context3.abrupt(\"return\", db.put(item));\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function updateItem(_x3) {\n        return _updateItem.apply(this, arguments);\n      }\n\n      return updateItem;\n    }()\n  };\n};\n\nexport default RisksStore;","import format from 'date-fns/format';\nexport default function toISOString(date) {\n  return format(date, 'YYYY-MM-DDTHH:mm:ss');\n}","import _objectSpread from \"/Users/dzianis_roi/Projects/logistics-risks-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport view from \"ramda/es/view\";\nimport lensProp from \"ramda/es/lensProp\";\nimport toISOString from \"@logistics-calc/date-utils/src/toISOString\";\nexport var create = function create(_ref) {\n  var companyId = _ref.companyId,\n      value = _ref.value;\n  return {\n    value: value,\n    companyId: companyId,\n    createdDate: toISOString(new Date()),\n    lastUpdatedDate: null\n  };\n};\nexport var update = function update(_ref2, risk) {\n  var value = _ref2.value;\n  return _objectSpread({}, risk, {\n    value: value,\n    lastUpdatedDate: toISOString(new Date())\n  });\n};\nexport var getId = view(lensProp('_id'));\nexport var getCompanyId = view(lensProp('companyId'));\nexport var getValue = view(lensProp('value'));","import _regeneratorRuntime from \"/Users/dzianis_roi/Projects/logistics-risks-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/dzianis_roi/Projects/logistics-risks-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as tf from \"@tensorflow/tfjs\";\nimport { create, update } from \"@logistics-calc/risks/src/domain/models/Risk\";\nvar modelUrl = 'localstorage://logistics-risks-model';\n\nvar getRandomInt = function getRandomInt(min, max) {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n\nvar RisksService = function RisksService(_ref) {\n  var risksStore = _ref.risksStore;\n  var listener;\n  return {\n    calculate: function () {\n      var _calculate = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(companyId) {\n        var model, xs, ys, risk, value;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return tf.loadLayersModel(modelUrl);\n\n              case 3:\n                model = _context.sent;\n                _context.next = 17;\n                break;\n\n              case 6:\n                _context.prev = 6;\n                _context.t0 = _context[\"catch\"](0);\n                model = tf.sequential();\n                model.add(tf.layers.dense({\n                  units: 1,\n                  inputShape: [1]\n                }));\n                model.compile({\n                  loss: 'meanSquaredError',\n                  optimizer: 'SGD'\n                });\n                xs = tf.tensor2d([[1], [2], [3], [4]], [4, 1]);\n                ys = tf.tensor2d([[1], [3], [5], [7]], [4, 1]);\n                _context.next = 15;\n                return model.fit(xs, ys, {\n                  epochs: 500\n                });\n\n              case 15:\n                _context.next = 17;\n                return model.save(modelUrl);\n\n              case 17:\n                model.predict(tf.tensor2d([[5]], [1, 1]));\n                _context.next = 20;\n                return risksStore.getByCompanyId(companyId);\n\n              case 20:\n                risk = _context.sent;\n                value = getRandomInt(10, 100);\n\n                if (!risk) {\n                  _context.next = 27;\n                  break;\n                }\n\n                _context.next = 25;\n                return risksStore.updateItem(update({\n                  value: value\n                }, risk));\n\n              case 25:\n                _context.next = 29;\n                break;\n\n              case 27:\n                _context.next = 29;\n                return risksStore.saveItem(create({\n                  value: value,\n                  companyId: companyId\n                }));\n\n              case 29:\n                if (listener) {\n                  listener();\n                }\n\n              case 30:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 6]]);\n      }));\n\n      function calculate(_x) {\n        return _calculate.apply(this, arguments);\n      }\n\n      return calculate;\n    }(),\n    getList: function getList() {\n      return risksStore.getList();\n    },\n    subscribe: function subscribe(l) {\n      listener = l;\n    },\n    unsubscribe: function unsubscribe() {\n      listener = null;\n    }\n  };\n};\n\nexport default RisksService;","function logout() {\n  localStorage.removeItem('isAuthenticated');\n}\n\nexport default logout;\n","import { createContext } from 'react';\n\nconst AppMenuContext = createContext({ openMenu: null });\n\nexport default AppMenuContext;\n","import React, { useState } from \"react\";\nimport PropTypes from 'prop-types';\nimport { withRouter } from 'react-router-dom';\nimport List from \"@material-ui/core/List/index\";\nimport ListItem from \"@material-ui/core/ListItem/index\";\nimport Drawer from \"@material-ui/core/Drawer/index\";\nimport withStyles from \"@material-ui/core/styles/withStyles\";\n\nimport logout from \"../../auth/domain/services/logout\";\n\nimport AppMenuContext from './AppMenuContext';\n\n\nconst styles = {\n  list: {\n    width: '250px',\n  },\n};\n\nfunction AppMenu({ classes, children, history }) {\n  const [isOpened, setIsOpened] = useState(false);\n\n  const openMenu = () => {\n    setIsOpened(true);\n  };\n\n  const onLogoutClick = () => {\n    logout();\n    history.replace({ pathname: '/login' });\n  };\n\n  return (\n    <AppMenuContext.Provider\n      value={{\n        openMenu,\n      }}\n    >\n      <Drawer\n        open={isOpened}\n        onClose={() => setIsOpened(false)}\n      >\n        <List className={classes.list}>\n          <ListItem button onClick={onLogoutClick}>\n            Logout\n          </ListItem>\n        </List>\n      </Drawer>\n      { children }\n    </AppMenuContext.Provider>\n  )\n}\n\n\nAppMenu.propTypes = {\n  classes: PropTypes.object.isRequired,\n  onLogout: PropTypes.func,\n  open: PropTypes.bool,\n};\n\nAppMenu.defaultProps = {\n  open: false,\n};\n\nexport default withRouter(withStyles(styles)(AppMenu));\n","import React, { useContext } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport SimpleDrawer from \"./menu/ui/AppMenu\";\nimport AppMenuContext from \"./menu/ui/AppMenuContext\";\n\nconst styles = theme => ({\n  title: {\n    flexGrow: 1\n  },\n  menuButton: {\n    marginLeft: -12,\n    marginRight: 20\n  },\n  buttonIconLeft: {\n    marginRight: theme.spacing.unit\n  }\n});\n\nfunction SimpleAppBar(props) {\n  const { classes, title } = props;\n  const { openMenu } = useContext(AppMenuContext);\n\n  return (\n    <>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <IconButton\n            className={classes.menuButton}\n            color=\"inherit\"\n            aria-label=\"Menu\"\n            onClick={openMenu}\n          >\n            <MenuIcon/>\n          </IconButton>\n          <Typography variant=\"h6\" color=\"inherit\" className={classes.title}>\n            {title}\n          </Typography>\n        </Toolbar>\n      </AppBar>\n      <SimpleDrawer />\n    </>\n  );\n}\n\nSimpleAppBar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  title: PropTypes.string\n};\n\nSimpleAppBar.defaultProps = {\n  title: \"Logistics Risks Calculator\"\n};\n\nexport default withStyles(styles)(SimpleAppBar);\n","import React from 'react';\nimport classnames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\n\nconst styles = {\n  root: {\n    display: 'flex',\n    flexFlow: 'column nowrap',\n    flexGrow: 1,\n    height: '100%',\n  },\n};\n\nfunction Page({ className, classes, children }) {\n  return <div className={classnames(classes.root, className)}>{ children }</div>\n}\n\nexport default withStyles(styles)(Page);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nimport SimpleAppBar from './SimpleAppBar';\nimport Page from './Page';\n\n\nconst styles = {\n  gridContainer: {\n    display: 'flex',\n    flexGrow: 1,\n    maxHeight: '100%',\n    overflow: 'auto',\n  },\n  progress: {\n    alignSelf: 'center',\n    margin: 'auto',\n  },\n};\n\n\nfunction PageWithAppBar({ appBar, className, classes, children, isLoading }) {\n  return (\n    <Page className={className}>\n      { appBar }\n      <div className={classes.gridContainer}>\n        {isLoading ? <CircularProgress className={classes.progress}/> : children}\n      </div>\n    </Page>\n  )\n}\n\nPageWithAppBar.propTypes = {\n  appBar: PropTypes.node,\n  children: PropTypes.node,\n  className: PropTypes.string,\n  classes: PropTypes.object.isRequired,\n  isLoading: PropTypes.bool,\n};\n\nPageWithAppBar.defaultProps = {\n  appBar: <SimpleAppBar />,\n  isLoading: false,\n};\n\nexport default withStyles(styles)(PageWithAppBar);\n","import _objectSpread from \"/Users/dzianis_roi/Projects/logistics-risks-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport lensProp from 'ramda/es/lensProp';\nimport view from 'ramda/es/view';\nimport pipe from \"ramda/es/pipe\";\nimport defaultTo from \"ramda/es/defaultTo\";\nimport toISOString from '@logistics-calc/date-utils/src/toISOString';\nexport var create = function create(_ref) {\n  var name = _ref.name,\n      foundationDate = _ref.foundationDate,\n      charterCapital = _ref.charterCapital;\n  return {\n    charterCapital: charterCapital,\n    foundationDate: foundationDate,\n    lastUpdatedDate: null,\n    name: name,\n    createdDate: toISOString(new Date()),\n    paymentHistory: []\n  };\n};\nexport var update = function update(_ref2, company) {\n  var name = _ref2.name,\n      foundationDate = _ref2.foundationDate,\n      charterCapital = _ref2.charterCapital,\n      paymentHistory = _ref2.paymentHistory;\n  return _objectSpread({}, company, {\n    charterCapital: charterCapital,\n    foundationDate: foundationDate,\n    lastUpdatedDate: toISOString(new Date()),\n    name: name,\n    paymentHistory: paymentHistory\n  });\n};\nexport var getId = view(lensProp('_id'));\nexport var getName = view(lensProp('name'));\nexport var getFoundationDate = view(lensProp('foundationDate'));\nexport var getPaymentHistory = pipe(view(lensProp(\"paymentHistory\")), defaultTo([]));","import { getCompanyId } from \"./Risk\";\nexport var getByCompanyId = function getByCompanyId(companyId, risks) {\n  return risks.find(function (risk) {\n    return getCompanyId(risk) === companyId;\n  });\n};","export default function Permit({ children }) {\n  return localStorage.getItem('isAdmin') === 'true' ? children : null;\n}\n","import PropTypes from 'prop-types';\n\nexport const COMPANY_SHAPE = PropTypes.shape({\n  charterCapital: PropTypes.number.isRequired,\n  _id: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  lastUpdated: PropTypes.instanceOf(Date),\n  foundationDate: PropTypes.string.isRequired\n});\n","import format from \"date-fns/format\";\nexport default function formatDate(date) {\n  return format(date, 'MM/DD/YYYY');\n}","import { getValue } from '../models/Risk';\n/**\n * @param {Risk} risk\n * @returns {boolean}\n */\n\nexport default function isHighRisk(risk) {\n  return getValue(risk) > 50;\n}","import React from 'react';\nimport TableCell from '@material-ui/core/TableCell';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { Link } from 'react-router-dom';\nimport IconButton from '@material-ui/core/IconButton';\nimport TableRow from '@material-ui/core/TableRow';\nimport RefreshIcon from '@material-ui/icons/Refresh';\nimport EditIcon from '@material-ui/icons/Edit';\n\nimport formatDate from '@logistics-calc/date-utils/src/formatDate';\n\nimport isHighRisk from '@logistics-calc/risks/src/domain/services/isHighRisk';\nimport { getValue } from '@logistics-calc/risks/src/domain/models/Risk';\n\nimport {\n  getFoundationDate,\n  getId,\n  getName\n} from '@logistics-calc/companies/src/domain/models/Company';\n\nimport Permit from '../../../priveleges/Permit';\n\nfunction CompaniesTableItem(props) {\n  const { company, onRecalculate, risk } = props;\n  const companyId = getId(company);\n  return (\n    <TableRow>\n      <TableCell>{getName(company)}</TableCell>\n      <TableCell\n        align=\"center\"\n        style={{\n          backgroundColor: risk ? (isHighRisk(risk) ? 'red' : 'green') : null\n        }}\n      >\n        {risk ? `${getValue(risk)}%` : '-'}\n      </TableCell>\n      <TableCell align=\"center\">\n        {formatDate(getFoundationDate(company))}\n      </TableCell>\n      <TableCell align=\"right\">\n        <Tooltip title=\"Edit\">\n          <Link to={`/company/${getId(company)}`}>\n            <IconButton aria-label=\"Recalculate\">\n              <EditIcon fontSize=\"small\" />\n            </IconButton>\n          </Link>\n        </Tooltip>\n        <Permit>\n          <Tooltip title=\"Recalculate\">\n            <IconButton\n              aria-label=\"Recalculate\"\n              onClick={() => onRecalculate(companyId)}\n            >\n              <RefreshIcon fontSize=\"small\" />\n            </IconButton>\n          </Tooltip>\n        </Permit>\n      </TableCell>\n    </TableRow>\n  );\n}\n\nexport default CompaniesTableItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles/index';\nimport Table from '@material-ui/core/Table/index';\nimport TableBody from '@material-ui/core/TableBody/index';\nimport TableCell from '@material-ui/core/TableCell/index';\nimport TableHead from '@material-ui/core/TableHead/index';\nimport TableRow from '@material-ui/core/TableRow/index';\nimport Fab from '@material-ui/core/Fab/index';\nimport Paper from '@material-ui/core/Paper/index';\nimport AddIcon from '@material-ui/icons/Add';\n\nimport { getId } from '@logistics-calc/companies/src/domain/models/Company';\n\nimport { getByCompanyId } from '@logistics-calc/risks/src/domain/models/RisksCollection';\n\nimport Permit from '../../../priveleges/Permit';\n\nimport { COMPANY_SHAPE } from '../constants';\nimport CompaniesTableItem from './CompaniesTableItem';\n\nconst styles = theme => ({\n  root: {\n    width: '100%',\n    overflowX: 'auto'\n  },\n  table: {\n    minWidth: 700\n  },\n  fab: {\n    position: 'absolute',\n    bottom: theme.spacing.unit * 4,\n    right: theme.spacing.unit * 4\n  }\n});\n\nfunction CompaniesTable(props) {\n  const { classes, companies, onAddButtonClick, onRecalculate, risks } = props;\n\n  return (\n    <Paper className={classes.root}>\n      <Table className={classes.table}>\n        <TableHead>\n          <TableRow>\n            <TableCell>Company name</TableCell>\n            <TableCell align=\"center\">Risk</TableCell>\n            <TableCell align=\"center\">Foundation date</TableCell>\n            <TableCell />\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {companies.map(company => {\n            const companyId = getId(company);\n            return (\n              <CompaniesTableItem\n                company={company}\n                key={companyId}\n                onRecalculate={onRecalculate}\n                risk={getByCompanyId(companyId, risks)}\n              />\n            );\n          })}\n        </TableBody>\n      </Table>\n      <Permit>\n        <Fab className={classes.fab} color=\"primary\" onClick={onAddButtonClick}>\n          <AddIcon />\n        </Fab>\n      </Permit>\n    </Paper>\n  );\n}\n\nCompaniesTable.propTypes = {\n  classes: PropTypes.object.isRequired,\n  companies: PropTypes.arrayOf(COMPANY_SHAPE),\n  onAddButtonClick: PropTypes.func,\n  onRecalculate: PropTypes.func,\n  risks: PropTypes.array\n};\n\nCompaniesTable.defaultProps = {\n  companies: [],\n  risks: []\n};\n\nexport default withStyles(styles)(CompaniesTable);\n","import { createContext } from 'react';\n\n\nconst AppContext = createContext({\n  services: {},\n});\n\nexport default AppContext;\n","import React, { useContext, useEffect, useState } from 'react';\n\nimport lensProp from 'ramda/es/lensProp';\nimport view from 'ramda/es/view';\nimport map from 'ramda/es/map';\nimport pipe from 'ramda/es/pipe';\n\nimport PageWithAppBar from '../../PageWithAppBar';\n\nimport CompaniesTable from './table/CompaniesTable';\nimport AppMenu from '../../menu/ui/AppMenu';\nimport AppContext from '../../AppContext';\n\nconst getRows = view(lensProp('rows'));\nconst mapDocs = map(view(lensProp('doc')));\nconst selectDocumentsList = pipe(\n  getRows,\n  mapDocs\n);\n\nfunction CompaniesTablePage({ history }) {\n  const [state, setState] = useState({\n    companies: [],\n    isLoading: false,\n    risks: []\n  });\n  const {\n    services: { companies: companiesService, risks: risksService }\n  } = useContext(AppContext);\n\n  const fetchCompanies = async () => {\n    setState({ isLoading: true });\n    const response = await companiesService.getCompanies();\n    setState({\n      companies: selectDocumentsList(response),\n      isLoading: false\n    });\n  };\n\n  const fetchRisks = async () => {\n    const response = await risksService.getList();\n    setState(state => ({ ...state, risks: selectDocumentsList(response) }));\n  };\n\n  useEffect(() => {\n    fetchCompanies().then(fetchRisks);\n    risksService.subscribe(() => {\n      fetchRisks();\n    });\n    return () => {\n      risksService.unsubscribe();\n    };\n  }, []);\n\n  const onAddButtonClick = () => {\n    history.push({ pathname: '/company/' });\n  };\n\n  const onRecalculate = categoryId => {\n    risksService.calculate(categoryId);\n  };\n\n  return (\n    <AppMenu>\n      <PageWithAppBar isLoading={state.isLoading}>\n        <CompaniesTable\n          companies={state.companies}\n          onAddButtonClick={onAddButtonClick}\n          onRecalculate={onRecalculate}\n          risks={state.risks}\n        />\n      </PageWithAppBar>\n    </AppMenu>\n  );\n}\n\nexport default CompaniesTablePage;\n","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\nimport withStyles from '@material-ui/core/styles/withStyles';\n\nimport PageWithAppBar from './PageWithAppBar';\n\nconst styles = ({ spacing }) => ({\n  gridContainer: {\n    justifyContent: 'center',\n    paddingTop: spacing.unit * 4\n  },\n  formContainer: {\n    flex: 1,\n    maxWidth: '700px'\n  }\n});\n\nfunction FormPage({ children, classes, isLoading, title, ...restProps }) {\n  return (\n    <PageWithAppBar\n      {...restProps}\n      classes={{ gridContainer: classes.gridContainer }}\n      isLoading={isLoading}\n    >\n      <Grid\n        className={classes.formContainer}\n        container\n        direction=\"column\"\n        wrap=\"nowrap\"\n        spacing={40}\n      >\n        <Grid component={Typography} item variant=\"title\">\n          {title}\n        </Grid>\n        <Grid item>{isLoading ? null : children}</Grid>\n      </Grid>\n    </PageWithAppBar>\n  );\n}\n\nexport default withStyles(styles)(FormPage);\n","import cuid from \"cuid\";\nimport construct from \"ramda/es/construct\";\nimport view from \"ramda/es/view\";\nimport lensProp from \"ramda/es/lensProp\";\nimport toISOString from \"@logistics-calc/date-utils/src/toISOString\";\n\nfunction Payment(_ref) {\n  var date = _ref.date,\n      amount = _ref.amount,\n      plannedDate = _ref.plannedDate;\n  return {\n    _id: cuid(),\n    date: toISOString(date),\n    amount: amount,\n    plannedDate: toISOString(plannedDate)\n  };\n}\n\nexport var create = construct(Payment);\nexport var getId = view(lensProp(\"_id\"));\nexport var getDate = view(lensProp(\"date\"));\nexport var getPlannedDate = view(lensProp(\"plannedDate\"));\nexport var getAmount = view(lensProp(\"amount\"));","import isValid from 'date-fns/is_valid';\n\nexport const required = value =>\n  Boolean(value) ? undefined : 'Value is required';\nexport const isDataValid = value =>\n  isValid(new Date(value)) ? undefined : 'Date should be in format MM/DD/YYYY';\nexport const isNumber = value =>\n  Number.isInteger(parseInt(value)) ? undefined : 'Should be a number';\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport map from 'ramda/es/map';\n\nimport Table from '@material-ui/core/es/Table/Table';\nimport TableHead from '@material-ui/core/es/TableHead/TableHead';\nimport TableCell from '@material-ui/core/es/TableCell/TableCell';\nimport TableRow from '@material-ui/core/es/TableRow/TableRow';\nimport TableBody from '@material-ui/core/es/TableBody/TableBody';\n\nimport {\n  getAmount,\n  getDate,\n  getPlannedDate,\n  getId\n} from '@logistics-calc/companies/src/domain/models/Payment';\n\nexport default function PaymentHistory({ paymentHistory }) {\n  return (\n    <Table>\n      <TableHead>\n        <TableRow>\n          <TableCell align=\"center\">Planned date</TableCell>\n          <TableCell align=\"center\">Actual date</TableCell>\n          <TableCell align=\"center\">Amount</TableCell>\n        </TableRow>\n      </TableHead>\n      <TableBody>\n        {map(\n          row => (\n            <TableRow key={getId(row)}>\n              <TableCell align=\"center\">{getPlannedDate(row)}</TableCell>\n              <TableCell align=\"center\">{getDate(row)}</TableCell>\n              <TableCell align=\"center\">{getAmount(row)}</TableCell>\n            </TableRow>\n          ),\n          paymentHistory\n        )}\n      </TableBody>\n    </Table>\n  );\n}\n\nPaymentHistory.propTypes = {\n  paymentHistory: PropTypes.array\n};\n\nPaymentHistory.defaultProps = {\n  paymentHistory: []\n};\n","import React from 'react';\nimport { Field, Form } from 'react-final-form';\n\nimport either from 'ramda/es/either';\n\nimport Grid from '@material-ui/core/Grid';\nimport TextField from '@material-ui/core/TextField';\nimport Add from '@material-ui/icons/Add';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport { required, isDataValid, isNumber } from '../../../form/ui/validators';\n\nexport default function PaymentForm({ onSubmit }) {\n  return (\n    <Form onSubmit={onSubmit}>\n      {({ handleSubmit, submitting }) => (\n        <Grid\n          alignItems=\"center\"\n          container\n          direction=\"row\"\n          spacing={32}\n          wrap=\"nowrap\"\n        >\n          <Grid item>\n            <Field name=\"plannedDate\" validate={either(required, isDataValid)}>\n              {({ input, meta: { error, touched } }) => (\n                <TextField\n                  {...input}\n                  error={touched && Boolean(error)}\n                  fullWidth\n                  helperText={touched && error}\n                  label=\"Planned date\"\n                />\n              )}\n            </Field>\n          </Grid>\n          <Grid item>\n            <Field name=\"date\" validate={either(required, isDataValid)}>\n              {({ input, meta: { error, touched } }) => (\n                <TextField\n                  {...input}\n                  error={touched && Boolean(error)}\n                  fullWidth\n                  helperText={touched && error}\n                  label=\"Date\"\n                  placeholder=\"2/25/2012\"\n                />\n              )}\n            </Field>\n          </Grid>\n          <Grid item>\n            <Field name=\"amount\" validate={either(required, isNumber)}>\n              {({ input, meta: { error, touched } }) => (\n                <TextField\n                  {...input}\n                  error={touched && Boolean(error)}\n                  fullWidth\n                  helperText={touched && error}\n                  label=\"Amount\"\n                  placeholder=\"1000\"\n                />\n              )}\n            </Field>\n          </Grid>\n          <Grid item>\n            <IconButton\n              color=\"primary\"\n              disabled={submitting}\n              onClick={handleSubmit}\n              variant=\"outlined\"\n            >\n              <Add fontSize=\"small\" />\n            </IconButton>\n          </Grid>\n        </Grid>\n      )}\n    </Form>\n  );\n}\n","import React, { useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport { Form, Field } from 'react-final-form';\n\nimport append from 'ramda/es/append';\n\nimport Grid from '@material-ui/core/Grid';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography/Typography';\n\nimport formatDate from '@logistics-calc/date-utils/src/formatDate';\nimport {\n  getFoundationDate,\n  getPaymentHistory\n} from '@logistics-calc/companies/src/domain/models/Company';\nimport { create as createPayment } from '@logistics-calc/companies/src/domain/models/Payment';\n\nimport { required, isDataValid } from '../../../form/ui/validators';\nimport Permit from '../../../priveleges/Permit';\n\nimport PaymentHistory from '../payment-history/PaymentHistory';\nimport PaymentForm from '../payment-form/PaymentForm';\n\nimport { COMPANY_SHAPE } from '../constants';\n\nexport default function CompanyForm({ company, onReset, onSubmit }) {\n  const onSubmitAdapter = values => {\n    onSubmit({\n      ...values,\n      foundationDate: new Date(values.foundationDate),\n      charterCapital: Number(values.charterCapital)\n    });\n  };\n\n  const formattedCompany = useMemo(() => {\n    if (!company) {\n      return company;\n    }\n\n    return {\n      ...company,\n      foundationDate: formatDate(getFoundationDate(company)),\n      paymentHistory: getPaymentHistory(company)\n    };\n  }, [company]);\n\n  return (\n    <Form initialValues={formattedCompany} onSubmit={onSubmitAdapter}>\n      {({ handleSubmit, submitting }) => (\n        <Grid\n          component=\"form\"\n          container\n          direction=\"column\"\n          onReset={onReset}\n          onSubmit={handleSubmit}\n          spacing={40}\n        >\n          <Grid item>\n            <Field name=\"name\" validate={required}>\n              {({ input, meta: { error, touched } }) => (\n                <TextField\n                  {...input}\n                  autoFocus\n                  error={touched && Boolean(error)}\n                  fullWidth\n                  helperText={touched && error}\n                  label=\"Name\"\n                />\n              )}\n            </Field>\n          </Grid>\n          <Grid item>\n            <Field\n              name=\"foundationDate\"\n              validate={value => required(value) || isDataValid(value)}\n            >\n              {({ input, meta: { error, touched } }) => (\n                <TextField\n                  {...input}\n                  error={touched && Boolean(error)}\n                  fullWidth\n                  helperText={touched && error}\n                  label=\"Foundation date\"\n                  placeholder=\"2/25/2012\"\n                />\n              )}\n            </Field>\n          </Grid>\n          <Grid item>\n            <Field name=\"charterCapital\" validate={required}>\n              {({ input, meta: { error, touched } }) => (\n                <TextField\n                  {...input}\n                  error={touched && Boolean(error)}\n                  fullWidth\n                  helperText={touched && error}\n                  label=\"Charter capital\"\n                  type=\"number\"\n                />\n              )}\n            </Field>\n          </Grid>\n\n          <Field name=\"paymentHistory\">\n            {({ input: { value, onChange } }) => (\n              <>\n                <Permit>\n                  <Grid item>\n                    <Typography variant=\"caption\">New payment</Typography>\n\n                    <PaymentForm\n                      onSubmit={values => {\n                        const payment = createPayment({\n                          date: new Date(values.date),\n                          amount: Number(values.amount),\n                          plannedDate: new Date(values.plannedDate)\n                        });\n                        onChange(append(payment, value));\n                      }}\n                    />\n                  </Grid>\n                </Permit>\n\n                <Grid item>\n                  <Typography variant=\"caption\">Payment history</Typography>\n                  <PaymentHistory paymentHistory={value} />\n                </Grid>\n              </>\n            )}\n          </Field>\n\n          <Grid item>\n            <Grid container justify=\"flex-end\" spacing={16}>\n              <Grid item>\n                <Button type=\"reset\">Cancel</Button>\n              </Grid>\n              <Permit>\n                <Grid item>\n                  <Button\n                    color=\"primary\"\n                    disabled={submitting}\n                    type=\"submit\"\n                    variant=\"contained\"\n                  >\n                    Submit\n                  </Button>\n                </Grid>\n              </Permit>\n            </Grid>\n          </Grid>\n        </Grid>\n      )}\n    </Form>\n  );\n}\n\nCompanyForm.propTypes = {\n  company: COMPANY_SHAPE,\n  onReset: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired\n};\n","import React, { useContext, useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport SimpleAppBar from \"../../SimpleAppBar\";\n\nimport AppMenu from \"../../menu/ui/AppMenu\";\nimport FormPage from \"../../FormPage\";\nimport CompanyForm from \"./form/CompanyForm\";\nimport AppContext from \"../../AppContext\";\n\n\nfunction EditCompanyPage({ match, history }) {\n  const [state, setState] = useState({\n    company: null,\n    isLoading: true\n  });\n  const { services: { companies: companiesService } } = useContext(AppContext);\n\n  const companyId = match.params.id;\n  const { company, isLoading } = state;\n\n  const companyName = isLoading ? '' : company.name;\n\n  const fetchCompany = async () => {\n    setState(state => ({ ...state, isLoading: true }));\n    try {\n      const result = await companiesService.getCompanyById(companyId);\n      setState(state => ({\n        ...state,\n        company: result\n      }));\n    } finally {\n      setState(state => ({\n        ...state,\n        isLoading: false\n      }));\n    }\n  };\n\n  useEffect(() => {\n    fetchCompany();\n  }, []);\n\n  const appBar = (\n    <SimpleAppBar\n      title={isLoading ? \"Please wait...\" : companyName}\n    />\n  );\n\n  const onReset = (e) => {\n    e.preventDefault();\n    history.replace({ pathname: '/' });\n  };\n\n  const onSubmit = async (values) => {\n    await companiesService.editCompany(company, values);\n    history.replace({ pathname: '/' });\n  };\n\n  return (\n    <AppMenu>\n      <FormPage\n        appBar={appBar}\n        isLoading={state.isLoading}\n        title={`Edit ${companyName}`}\n      >\n        <CompanyForm\n          company={company}\n          onReset={onReset}\n          onSubmit={onSubmit}\n        />\n      </FormPage>\n    </AppMenu>\n  );\n}\n\nEditCompanyPage.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string.isRequired\n    }).isRequired\n  }).isRequired,\n  history: PropTypes.shape({\n    goBack: PropTypes.func,\n  }).isRequired,\n};\n\nexport default EditCompanyPage;\n","import React, { useContext } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport SimpleAppBar from \"../../SimpleAppBar\";\n\nimport AppMenu from \"../../menu/ui/AppMenu\";\nimport FormPage from \"../../FormPage\";\nimport CompanyForm from \"./form/CompanyForm\";\nimport AppContext from \"../../AppContext\";\n\n\nfunction CreateCompanyPage({ history }) {\n  const { services: { companies } } = useContext(AppContext);\n\n  const appBar = (\n    <SimpleAppBar\n      title=\"Create new company\"\n    />\n  );\n\n  const onReset = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    history.replace('/');\n  };\n\n  const onSubmit = async (values) => {\n    await companies.createCompany(values);\n    history.replace('/');\n  };\n\n  return (\n    <AppMenu>\n      <FormPage\n        appBar={appBar}\n        title={`Create new company`}\n      >\n        <CompanyForm\n          onReset={onReset}\n          onSubmit={onSubmit}\n        />\n      </FormPage>\n    </AppMenu>\n  );\n}\n\nCreateCompanyPage.propTypes = {\n  history: PropTypes.shape({\n    goBack: PropTypes.func,\n  }).isRequired,\n};\n\nexport default CreateCompanyPage;\n","import _regeneratorRuntime from \"/Users/dzianis_roi/Projects/logistics-risks-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/dzianis_roi/Projects/logistics-risks-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport PouchDb from 'pouchdb';\n\nvar CompaniesStore = function CompaniesStore(_ref) {\n  var dbUrl = _ref.dbUrl;\n  var db = new PouchDb(\"\".concat(dbUrl, \"/companies\"));\n  return {\n    getList: function getList() {\n      return db.allDocs({\n        include_docs: true\n      });\n    },\n    getById: function () {\n      var _getById = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(id) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", db.get(id));\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getById(_x) {\n        return _getById.apply(this, arguments);\n      }\n\n      return getById;\n    }(),\n    saveItem: function () {\n      var _saveItem = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(item) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                return _context2.abrupt(\"return\", db.post(item));\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function saveItem(_x2) {\n        return _saveItem.apply(this, arguments);\n      }\n\n      return saveItem;\n    }(),\n    updateItem: function () {\n      var _updateItem = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(item) {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                return _context3.abrupt(\"return\", db.put(item));\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function updateItem(_x3) {\n        return _updateItem.apply(this, arguments);\n      }\n\n      return updateItem;\n    }()\n  };\n};\n\nexport default CompaniesStore;","import { create, update } from \"../models/Company\";\n\nvar CompaniesService = function CompaniesService(_ref) {\n  var companiesStore = _ref.companiesStore;\n  return {\n    createCompany: function createCompany(data) {\n      var company = create(data);\n      return companiesStore.saveItem(company);\n    },\n    editCompany: function editCompany(company, data) {\n      var updatedCompany = update(data, company);\n      return companiesStore.updateItem(updatedCompany);\n    },\n    getCompanies: function getCompanies() {\n      return companiesStore.getList();\n    },\n    getCompanyById: function getCompanyById(id) {\n      return companiesStore.getById(id);\n    }\n  };\n};\n\nexport default CompaniesService;","export default class UserNotFoundError extends Error {\n  constructor(login) {\n    super(`User \"${login}\" doesn't exist`);\n  }\n}\n","export default class IncorrectPasswordError extends Error {\n  constructor() {\n    super(`Invalid password`);\n  }\n}\n","import UserNotFoundError from '../errors/UserNotFoundError';\nimport IncorrectPasswordError from '../errors/IncorrectPasswordError';\n\nfunction authenticate(values) {\n  return new Promise((resolve, reject) => {\n    const { login, password } = values;\n\n    if (login !== 'admin' && login !== 'user') {\n      reject(new UserNotFoundError(login));\n      return;\n    }\n\n    if (\n      (login === 'admin' && password !== 'admin') ||\n      (login === 'user' && password !== 'user')\n    ) {\n      reject(new IncorrectPasswordError());\n      return;\n    }\n\n    localStorage.setItem('isAuthenticated', 'true');\n    localStorage.setItem('isAdmin', login === 'admin');\n\n    resolve();\n  });\n}\n\nexport default authenticate;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Form, Field } from \"react-final-form\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { required } from '../../../form/ui/validators';\n\n\nfunction LoginForm({ className, onSubmit }) {\n  return (\n    <Form onSubmit={onSubmit}>\n      {({ handleSubmit, submitError, submitting }) => (\n        <Grid\n          alignContent=\"center\"\n          className={className}\n          component=\"form\"\n          container\n          onSubmit={handleSubmit}\n          spacing={40}\n        >\n          {submitError ? (\n            <Grid\n              color=\"error\"\n              component={Typography}\n              item\n              xs={12}\n            >\n              {submitError}\n            </Grid>\n          ) : null}\n\n          <Grid item xs={12}>\n            <Field\n              name=\"login\"\n              validate={required}\n            >\n              {({ input, meta: { error, touched, submitError } }) => (\n                <TextField\n                  {...input}\n                  autoFocus\n                  error={touched && Boolean(error || submitError)}\n                  fullWidth\n                  helperText={touched && (error || submitError)}\n                  placeholder=\"Login\"\n                />\n              )}\n            </Field>\n          </Grid>\n\n          <Grid item xs={12}>\n            <Field\n              name=\"password\"\n              validate={required}\n            >\n              {({ input, meta: { error, touched } }) => (\n                <TextField\n                  {...input}\n                  error={touched && Boolean(error)}\n                  fullWidth\n                  helperText={touched && error}\n                  placeholder=\"Password\"\n                  type=\"password\"\n                />\n              )}\n            </Field>\n          </Grid>\n\n          <Grid item xs={12}>\n            <Button\n              color=\"primary\"\n              disabled={submitting}\n              fullWidth\n              type=\"submit\"\n              variant=\"contained\"\n            >\n              Submit\n            </Button>\n          </Grid>\n        </Grid>\n      )}\n    </Form>\n  );\n}\n\nLoginForm.propTypes = {\n  className: PropTypes.string,\n  onSubmit: PropTypes.func.isRequired\n};\n\nLoginForm.defaultProps = {\n  className: \"\"\n};\n\nexport default LoginForm;\n","import React from \"react\";\nimport withStyles from \"@material-ui/core/styles/withStyles\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { FORM_ERROR } from \"final-form\";\n\nimport Page from '../../Page';\n\nimport authenticate from '../domain/services/authenticate';\n\nimport LoginForm from './form/LoginForm';\nimport UserNotFoundError from \"../domain/errors/UserNotFoundError\";\nimport IncorrectPasswordError from \"../domain/errors/IncorrectPasswordError\";\n\n\nconst styles = (theme) => ({\n  root: {\n    paddingTop: theme.spacing.unit * 8,\n  },\n  form: {\n    margin: `${theme.spacing.unit * 8}px auto`,\n    maxWidth: '360px',\n  }\n});\n\nfunction LoginPage({ classes, history }) {\n  const onSubmit = async (values) => {\n    try {\n      await authenticate(values);\n      history.replace({ pathname: '/' });\n    } catch(e) {\n      if (e instanceof UserNotFoundError) {\n        return { login: e.message };\n      } else if (e instanceof IncorrectPasswordError) {\n        return { [FORM_ERROR]: 'Incorrect credentials' };\n      }\n\n      throw e;\n    }\n  };\n\n  return (\n    <Page classes={{ root: classes.root }}>\n      <Typography\n        align=\"center\"\n        paragraph={false}\n        variant=\"title\"\n      >\n        Welcome\n      </Typography>\n\n      <Typography\n        align=\"center\"\n        color=\"textSecondary\"\n      >\n        to\n      </Typography>\n\n      <Typography\n        align=\"center\"\n        color=\"primary\"\n        variant=\"headline\"\n      >\n        Logistics Risks Calculator\n      </Typography>\n\n      <LoginForm\n        className={classes.form}\n        onSubmit={onSubmit}\n      />\n    </Page>\n  );\n}\n\nexport default withStyles(styles)(LoginPage);\n","function isAuthenticated() {\n  return localStorage.getItem('isAuthenticated') === 'true';\n}\n\nexport default isAuthenticated;\n","import React from 'react';\nimport { Redirect } from 'react-router-dom';\n\nimport isAuthenticated from \"../domain/services/isAuthenticated\";\n\nfunction SecureRoute({ children }) {\n  if (!isAuthenticated()) {\n    return (\n      <Redirect\n        to={{\n          pathname: '/login',\n        }}\n      />\n    )\n  }\n\n  return children;\n}\n\nexport default SecureRoute;\n","import React from 'react';\nimport { HashRouter as Router, Route, Switch } from 'react-router-dom';\n\nimport RisksStore from '@logistics-calc/risks/src/domain/data/RisksStore';\nimport RisksService from '@logistics-calc/risks/src/domain/services/RisksService';\n\nimport CompaniesTablePage from './companies/ui/CompaniesTablePage';\nimport EditCompanyPage from './companies/ui/EditCompanyPage';\nimport CreateCompanyPage from './companies/ui/CreateCompanyPage';\nimport CompaniesStore from '@logistics-calc/companies/src/domain/data/CompaniesStore';\nimport CompaniesService from '@logistics-calc/companies/src/domain/services/CompaniesService';\nimport LoginPage from './auth/ui/LoginPage';\nimport SecureRoute from './auth/ui/SecureRoute';\nimport AppContext from './AppContext';\n\nimport './App.css';\n\nconst dbUrl =\n  'https://609ce380-698c-48ed-a70f-6eefc8446f54-bluemix:ee5cf67260942c15b000fceeede84f7762628d5fbdf85a83d26bf4225656e333@609ce380-698c-48ed-a70f-6eefc8446f54-bluemix.cloudantnosqldb.appdomain.cloud';\n\nconst companiesStore = CompaniesStore({ dbUrl });\nconst companiesService = CompaniesService({ companiesStore });\nconst risksStore = RisksStore({ dbUrl });\nconst risksService = RisksService({ risksStore });\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <AppContext.Provider\n        value={{\n          services: { companies: companiesService, risks: risksService }\n        }}\n      >\n        <Router>\n          <Switch>\n            <Route path=\"/login\" component={LoginPage} />\n\n            <SecureRoute>\n              <Route exact path=\"/\" component={CompaniesTablePage} />\n              <Route exact path=\"/company/\" component={CreateCompanyPage} />\n              <Route path=\"/company/:id\" component={EditCompanyPage} />\n            </SecureRoute>\n          </Switch>\n        </Router>\n      </AppContext.Provider>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}