{"version":3,"sources":["auth/domain/services/logout.js","menu/ui/AppMenuContext.js","menu/ui/AppMenu.js","SimpleAppBar.js","Page.js","PageWithAppBar.js","companies/ui/constants.js","shared/date/toISOString.js","companies/domain/models/Company.js","shared/date/formatDate.js","risks/domain/models/Risk.js","companies/ui/table/CompaniesTableItem.js","risks/domain/services/isHighRisk.js","risks/domain/models/RisksCollection.js","companies/ui/table/CompaniesTable.js","AppContext.js","companies/ui/CompaniesTablePage.js","FormPage.js","form/ui/validators.js","companies/ui/form/CompanyForm.js","companies/ui/EditCompanyPage.js","companies/ui/CreateCompanyPage.js","companies/domain/data/CompaniesStore.js","companies/domain/services/CompaniesService.js","auth/domain/errors/UserNotFoundError.js","auth/domain/errors/IncorrectPasswordError.js","auth/domain/services/authenticate.js","auth/ui/form/LoginForm.js","auth/ui/LoginPage.js","auth/domain/services/isAuthenticated.js","auth/ui/SecureRoute.js","risks/domain/data/RisksStore.js","risks/domain/services/RisksService.js","App.js","serviceWorker.js","index.js"],"names":["logout","localStorage","removeItem","AppMenuContext","createContext","openMenu","AppMenu","_ref","classes","children","history","_useState","useState","_useState2","Object","slicedToArray","isOpened","setIsOpened","react_default","a","createElement","ui_AppMenuContext","Provider","value","Drawer_default","open","onClose","List_default","className","list","ListItem_default","button","onClick","replace","pathname","defaultProps","withRouter","withStyles","width","SimpleAppBar","props","title","useContext","Fragment","AppBar_default","position","Toolbar_default","IconButton_default","menuButton","color","aria-label","Menu_default","Typography_default","variant","ui_AppMenu","theme","flexGrow","marginLeft","marginRight","buttonIconLeft","spacing","unit","root","display","flexFlow","height","classnames","PageWithAppBar","appBar","isLoading","src_Page","gridContainer","CircularProgress_default","progress","src_SimpleAppBar","maxHeight","overflow","alignSelf","margin","PropTypes","shape","charterCapital","number","isRequired","id","string","name","lastUpdated","instanceOf","Date","foundationDate","toISOString","date","getId","_ref3","getName","_ref4","getFoundationDate","_ref5","formatDate","format","create","companyId","cuid","createdDate","lastUpdatedDate","update","_ref2","risk","objectSpread","getValue","styles","tableCellRisk","backgroundColor","isHighRisk","company","onRecalculate","TableRow_default","TableCell_default","component","scope","align","concat","Tooltip_default","react_router_dom","to","Edit_default","fontSize","Refresh_default","getByCompanyId","risks","find","CompaniesTable","companies","onAddButtonClick","Paper_default","Table_default","table","TableHead_default","TableBody_default","map","table_CompaniesTableItem","key","Fab_default","fab","Add_default","overflowX","minWidth","bottom","right","AppContext","services","CompaniesTablePage","state","setState","_useContext$services","companiesService","risksService","fetchCompanies","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","getCompanies","sent","stop","apply","this","arguments","fetchRisks","_callee2","_context2","getList","useEffect","subscribe","unsubscribe","src_PageWithAppBar","table_CompaniesTable","push","categoryId","calculate","justifyContent","paddingTop","formContainer","flex","maxWidth","restProps","objectWithoutProperties","assign","Grid_default","container","direction","Typography","item","required","Boolean","undefined","isDataValid","isValid","CompanyForm","onReset","onSubmit","formattedCompany","useMemo","react_final_form_es","initialValues","values","Number","handleSubmit","submitting","validate","input","_ref3$meta","meta","error","touched","TextField_default","autoFocus","fullWidth","helperText","label","_ref4$meta","placeholder","_ref5$meta","type","justify","Button_default","disabled","EditCompanyPage","match","params","companyName","fetchCompany","result","getCompanyById","finish","editCompany","_x","src_FormPage","e","preventDefault","CreateCompanyPage","createCompany","stopPropagation","CompaniesStore","_ref$parseList","parseList","JSON","parse","_ref$formatList","formatList","stringify","Promise","resolve","getItem","getById","_getById","abrupt","saveItem","_saveItem","updatedList","toConsumableArray","saveList","_x2","updateItem","_updateItem","_callee3","_context3","i","_x3","setItem","CompaniesService","companiesStore","data","updatedCompany","UserNotFoundError","login","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","Error","IncorrectPasswordError","authenticate","reject","password","LoginForm","submitError","alignContent","xs","form","t0","message","defineProperty","FORM_ERROR","paragraph","form_LoginForm","isAuthenticated","SecureRoute","react_router","RisksStore","_getByCompanyId2","RisksService","listener","risksStore","_calculate","min","max","Math","ceil","floor","random","l","App","src_AppContext","path","LoginPage","ui_SecureRoute","exact","window","location","hostname","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.a06cffec.chunk.js","sourcesContent":["function logout() {\n  localStorage.removeItem('isAuthenticated');\n}\n\nexport default logout;\n","import { createContext } from 'react';\n\nconst AppMenuContext = createContext({ openMenu: null });\n\nexport default AppMenuContext;\n","import React, { useState } from \"react\";\nimport PropTypes from 'prop-types';\nimport { withRouter } from 'react-router-dom';\nimport List from \"@material-ui/core/List/index\";\nimport ListItem from \"@material-ui/core/ListItem/index\";\nimport Drawer from \"@material-ui/core/Drawer/index\";\nimport withStyles from \"@material-ui/core/styles/withStyles\";\n\nimport logout from \"../../auth/domain/services/logout\";\n\nimport AppMenuContext from './AppMenuContext';\n\n\nconst styles = {\n  list: {\n    width: '250px',\n  },\n};\n\nfunction AppMenu({ classes, children, history }) {\n  const [isOpened, setIsOpened] = useState(false);\n\n  const openMenu = () => {\n    setIsOpened(true);\n  };\n\n  const onLogoutClick = () => {\n    logout();\n    history.replace({ pathname: '/login' });\n  };\n\n  return (\n    <AppMenuContext.Provider\n      value={{\n        openMenu,\n      }}\n    >\n      <Drawer\n        open={isOpened}\n        onClose={() => setIsOpened(false)}\n      >\n        <List className={classes.list}>\n          <ListItem button onClick={onLogoutClick}>\n            Logout\n          </ListItem>\n        </List>\n      </Drawer>\n      { children }\n    </AppMenuContext.Provider>\n  )\n}\n\n\nAppMenu.propTypes = {\n  classes: PropTypes.object.isRequired,\n  onLogout: PropTypes.func,\n  open: PropTypes.bool,\n};\n\nAppMenu.defaultProps = {\n  open: false,\n};\n\nexport default withRouter(withStyles(styles)(AppMenu));\n","import React, { useContext } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport SimpleDrawer from \"./menu/ui/AppMenu\";\nimport AppMenuContext from \"./menu/ui/AppMenuContext\";\n\nconst styles = theme => ({\n  title: {\n    flexGrow: 1\n  },\n  menuButton: {\n    marginLeft: -12,\n    marginRight: 20\n  },\n  buttonIconLeft: {\n    marginRight: theme.spacing.unit\n  }\n});\n\nfunction SimpleAppBar(props) {\n  const { classes, title } = props;\n  const { openMenu } = useContext(AppMenuContext);\n\n  return (\n    <>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <IconButton\n            className={classes.menuButton}\n            color=\"inherit\"\n            aria-label=\"Menu\"\n            onClick={openMenu}\n          >\n            <MenuIcon/>\n          </IconButton>\n          <Typography variant=\"h6\" color=\"inherit\" className={classes.title}>\n            {title}\n          </Typography>\n        </Toolbar>\n      </AppBar>\n      <SimpleDrawer />\n    </>\n  );\n}\n\nSimpleAppBar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  title: PropTypes.string\n};\n\nSimpleAppBar.defaultProps = {\n  title: \"Logistics Risks Calculator\"\n};\n\nexport default withStyles(styles)(SimpleAppBar);\n","import React from 'react';\nimport classnames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\n\nconst styles = {\n  root: {\n    display: 'flex',\n    flexFlow: 'column nowrap',\n    flexGrow: 1,\n    height: '100%',\n  },\n};\n\nfunction Page({ className, classes, children }) {\n  return <div className={classnames(classes.root, className)}>{ children }</div>\n}\n\nexport default withStyles(styles)(Page);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nimport SimpleAppBar from './SimpleAppBar';\nimport Page from './Page';\n\n\nconst styles = {\n  gridContainer: {\n    display: 'flex',\n    flexGrow: 1,\n    maxHeight: '100%',\n    overflow: 'auto',\n  },\n  progress: {\n    alignSelf: 'center',\n    margin: 'auto',\n  },\n};\n\n\nfunction PageWithAppBar({ appBar, className, classes, children, isLoading }) {\n  return (\n    <Page className={className}>\n      { appBar }\n      <div className={classes.gridContainer}>\n        {isLoading ? <CircularProgress className={classes.progress}/> : children}\n      </div>\n    </Page>\n  )\n}\n\nPageWithAppBar.propTypes = {\n  appBar: PropTypes.node,\n  children: PropTypes.node,\n  className: PropTypes.string,\n  classes: PropTypes.object.isRequired,\n  isLoading: PropTypes.bool,\n};\n\nPageWithAppBar.defaultProps = {\n  appBar: <SimpleAppBar />,\n  isLoading: false,\n};\n\nexport default withStyles(styles)(PageWithAppBar);\n","import PropTypes from 'prop-types';\n\nexport const COMPANY_SHAPE = PropTypes.shape({\n  charterCapital: PropTypes.number.isRequired,\n  id: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  lastUpdated: PropTypes.instanceOf(Date),\n  foundationDate: PropTypes.string.isRequired,\n});\n","export default function toISOString(date) {\n  return date.toISOString();\n}\n","import cuid from 'cuid';\nimport toISOString from \"../../../shared/date/toISOString\";\n\n\nexport const create = ({ name, foundationDate, charterCapital }) => ({\n  id: cuid(),\n  charterCapital,\n  foundationDate,\n  lastUpdatedDate: null,\n  name,\n  createdDate: toISOString(new Date()),\n});\n\nexport const update = ({ name, foundationDate, charterCapital }, company) => ({\n  ...company,\n  charterCapital,\n  foundationDate,\n  lastUpdatedDate: toISOString(new Date()),\n  name,\n});\n\nexport const getId = ({ id }) => id;\n\nexport const getName = ({ name }) => name;\n\nexport const getFoundationDate = ({ foundationDate }) => foundationDate;\n","import format from \"date-fns/format\";\n\nexport default function formatDate(date) {\n  return format(date, 'MM/DD/YYYY');\n}\n","import cuid from \"cuid\";\n\nimport toISOString from \"../../../shared/date/toISOString\";\n\n\nexport const create = ({ companyId, value }) => ({\n  id: cuid(),\n  value,\n  companyId,\n  createdDate: toISOString(new Date()),\n  lastUpdatedDate: null,\n});\n\nexport const update = ({ value }, risk) => ({\n  ...risk,\n  value,\n  lastUpdatedDate: toISOString(new Date()),\n});\n\nexport const getId = ({ id }) => id;\n\nexport const getCompanyId = ({ companyId }) => companyId;\n\nexport const getValue = ({ value }) => value;\n","import React from 'react';\nimport { withStyles } from '@material-ui/styles';\nimport TableCell from '@material-ui/core/TableCell';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { Link } from 'react-router-dom';\nimport IconButton from '@material-ui/core/IconButton';\nimport TableRow from '@material-ui/core/TableRow';\nimport RefreshIcon from '@material-ui/icons/Refresh';\nimport EditIcon from '@material-ui/icons/Edit';\n\nimport formatDate from '../../../shared/date/formatDate';\nimport isHighRisk from '../../../risks/domain/services/isHighRisk';\nimport { getValue } from '../../../risks/domain/models/Risk';\n\nimport { getFoundationDate, getId, getName } from '../../domain/models/Company';\n\nconst styles = {\n  tableCellRisk: {\n    backgroundColor: ({ risk }) => {\n      if (!risk) {\n        return null;\n      }\n\n      return isHighRisk(risk) ? 'red' : 'green';\n    }\n  }\n};\n\nfunction CompaniesTableItem({ classes, company, onRecalculate, risk }) {\n  const companyId = getId(company);\n  return (\n    <TableRow>\n      <TableCell component=\"th\" scope=\"row\">\n        {getName(company)}\n      </TableCell>\n      <TableCell align=\"center\" classes={{ root: classes.tableCellRisk }}>\n        {risk ? `${getValue(risk)}%` : '-'}\n      </TableCell>\n      <TableCell align=\"center\">\n        {formatDate(getFoundationDate(company))}\n      </TableCell>\n      <TableCell align=\"right\">\n        <Tooltip title=\"Edit\">\n          <Link to={`/company/${getId(company)}`}>\n            <IconButton aria-label=\"Recalculate\">\n              <EditIcon fontSize=\"small\" />\n            </IconButton>\n          </Link>\n        </Tooltip>\n        <Tooltip title=\"Recalculate\">\n          <IconButton\n            aria-label=\"Recalculate\"\n            onClick={() => onRecalculate(companyId)}\n          >\n            <RefreshIcon fontSize=\"small\" />\n          </IconButton>\n        </Tooltip>\n      </TableCell>\n    </TableRow>\n  );\n}\n\nexport default withStyles(styles)(CompaniesTableItem);\n","import { getValue } from '../models/Risk';\n\n/**\n * @param {Risk} risk\n * @returns {boolean}\n */\nexport default function isHighRisk(risk) {\n  return getValue(risk) > 50;\n}\n","import { getCompanyId } from \"./Risk\";\n\nexport const getByCompanyId = (companyId, risks) => risks.find(risk => getCompanyId(risk) === companyId);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { withStyles } from \"@material-ui/core/styles/index\";\nimport Table from \"@material-ui/core/Table/index\";\nimport TableBody from \"@material-ui/core/TableBody/index\";\nimport TableCell from \"@material-ui/core/TableCell/index\";\nimport TableHead from \"@material-ui/core/TableHead/index\";\nimport TableRow from \"@material-ui/core/TableRow/index\";\nimport Fab from \"@material-ui/core/Fab/index\";\nimport Paper from \"@material-ui/core/Paper/index\";\nimport AddIcon from \"@material-ui/icons/Add\";\n\nimport { COMPANY_SHAPE } from \"../constants\";\nimport { getId } from \"../../domain/models/Company\";\nimport CompaniesTableItem from \"./CompaniesTableItem\";\nimport { getByCompanyId } from \"../../../risks/domain/models/RisksCollection\";\n\n\nconst styles = theme => ({\n  root: {\n    width: \"100%\",\n    overflowX: \"auto\"\n  },\n  table: {\n    minWidth: 700\n  },\n  fab: {\n    position: \"absolute\",\n    bottom: theme.spacing.unit * 4,\n    right: theme.spacing.unit * 4\n  }\n});\n\nfunction CompaniesTable(props) {\n  const { classes, companies, onAddButtonClick, onRecalculate, risks } = props;\n\n  return (\n    <Paper className={classes.root}>\n      <Table className={classes.table}>\n        <TableHead>\n          <TableRow>\n            <TableCell>Company name</TableCell>\n            <TableCell align=\"center\">Risk</TableCell>\n            <TableCell align=\"center\">Foundation date</TableCell>\n            <TableCell/>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {companies.map((company) => {\n            const companyId = getId(company);\n            return (\n              <CompaniesTableItem\n                company={company}\n                key={companyId}\n                onRecalculate={onRecalculate}\n                risk={getByCompanyId(companyId, risks)}\n              />\n            );\n          })\n          }\n        </TableBody>\n      </Table>\n      <Fab\n        className={classes.fab}\n        color=\"primary\"\n        onClick={onAddButtonClick}\n      >\n        <AddIcon/>\n      </Fab>\n    </Paper>\n  );\n}\n\nCompaniesTable.propTypes = {\n  classes: PropTypes.object.isRequired,\n  companies: PropTypes.arrayOf(COMPANY_SHAPE),\n  onAddButtonClick: PropTypes.func,\n  onRecalculate: PropTypes.func,\n  risks: PropTypes.array\n};\n\nCompaniesTable.defaultProps = {\n  companies: [],\n  risks: []\n};\n\nexport default withStyles(styles)(CompaniesTable);\n","import { createContext } from 'react';\n\n\nconst AppContext = createContext({\n  services: {},\n});\n\nexport default AppContext;\n","import React, { useContext, useEffect, useState } from \"react\";\n\nimport PageWithAppBar from \"../../PageWithAppBar\";\n\nimport CompaniesTable from \"./table/CompaniesTable\";\nimport AppMenu from \"../../menu/ui/AppMenu\";\nimport AppContext from \"../../AppContext\";\n\n\nfunction CompaniesTablePage({ history }) {\n  const [state, setState] = useState({\n    companies: [],\n    isLoading: false,\n    risks: [],\n  });\n  const { services: { companies: companiesService, risks: risksService } } = useContext(AppContext);\n\n  const fetchCompanies = async () => {\n    setState({ isLoading: true });\n    const companies = await companiesService.getCompanies();\n    setState({\n      companies,\n      isLoading: false\n    });\n  };\n\n  const fetchRisks = async () => {\n    const risks = await risksService.getList();\n    setState(state => ({ ...state, risks }));\n  };\n\n  useEffect(() => {\n    fetchCompanies();\n    risksService.subscribe(() => {\n      fetchRisks();\n    });\n    fetchRisks();\n    return () => {\n      risksService.unsubscribe();\n    };\n  }, []);\n\n  const onAddButtonClick = () => {\n    history.push({ pathname: '/company/' });\n  };\n\n  const onRecalculate = (categoryId) => {\n    risksService.calculate(categoryId);\n  };\n\n  return (\n    <AppMenu>\n      <PageWithAppBar\n        isLoading={state.isLoading}\n      >\n        <CompaniesTable\n          companies={state.companies}\n          onAddButtonClick={onAddButtonClick}\n          onRecalculate={onRecalculate}\n          risks={state.risks}\n        />\n      </PageWithAppBar>\n    </AppMenu>\n  );\n}\n\nexport default CompaniesTablePage;\n","import React from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Grid from \"@material-ui/core/Grid\";\nimport withStyles from \"@material-ui/core/styles/withStyles\";\n\nimport PageWithAppBar from \"./PageWithAppBar\";\n\n\nconst styles = ({ spacing }) => ({\n  gridContainer: {\n    justifyContent: 'center',\n    paddingTop: spacing.unit * 4,\n  },\n  formContainer: {\n    flex: 1,\n    maxWidth: '360px',\n  },\n});\n\nfunction FormPage({ children, classes, isLoading, title, ...restProps }) {\n  return (\n    <PageWithAppBar\n      {...restProps}\n      classes={{ gridContainer: classes.gridContainer }}\n      isLoading={isLoading}\n    >\n      <Grid\n        className={classes.formContainer}\n        container\n        direction=\"column\"\n        spacing={40}\n      >\n        <Grid\n          component={Typography}\n          item\n          variant=\"title\"\n        >\n          {title}\n        </Grid>\n        <Grid item>\n          {isLoading ? null : children}\n        </Grid>\n      </Grid>\n    </PageWithAppBar>\n  );\n}\n\nexport default withStyles(styles)(FormPage);\n","import isValid from 'date-fns/is_valid';\n\nexport const required = (value) => Boolean(value) ? undefined : 'Value is required';\nexport const isDataValid = (value) => isValid(new Date(value)) ? undefined : 'Date should be in format MM/DD/YYYY';\n","import React, { useMemo } from \"react\";\nimport PropTypes from 'prop-types';\nimport Grid from \"@material-ui/core/Grid\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport { Form, Field } from \"react-final-form\";\n\nimport { required, isDataValid } from '../../../form/ui/validators';\n\nimport { getFoundationDate } from \"../../domain/models/Company\";\n\nimport { COMPANY_SHAPE } from \"../constants\";\nimport formatDate from \"../../../shared/date/formatDate\";\n\n\nexport default function CompanyForm({ company, onReset, onSubmit }) {\n  const onSubmitAdapter = (values) => {\n    onSubmit({\n      ...values,\n      foundationDate: new Date(values.foundationDate),\n      charterCapital: Number(values.charterCapital),\n    });\n  };\n\n  const formattedCompany = useMemo(() => {\n    if (!company) {\n      return company;\n    }\n\n    return {\n      ...company,\n      foundationDate: formatDate(getFoundationDate(company)),\n    };\n  }, [company]);\n\n  return (\n    <Form initialValues={formattedCompany} onSubmit={onSubmitAdapter} >\n      {({ handleSubmit, submitting }) => (\n        <Grid\n          component=\"form\"\n          container\n          direction=\"column\"\n          onReset={onReset}\n          onSubmit={handleSubmit}\n          spacing={40}\n        >\n          <Grid item>\n            <Field\n              name=\"name\"\n              validate={required}\n            >\n              {({ input, meta: { error, touched } }) => (\n                <TextField\n                  {...input}\n                  autoFocus\n                  error={touched && Boolean(error)}\n                  fullWidth\n                  helperText={touched && error}\n                  label=\"Name\"\n                />\n              )}\n            </Field>\n          </Grid>\n          <Grid item>\n            <Field\n              name=\"foundationDate\"\n              validate={value => required(value) || isDataValid(value)}\n            >\n              {({ input, meta: { error, touched } }) => (\n                <TextField\n                  {...input}\n                  error={touched && Boolean(error)}\n                  fullWidth\n                  helperText={touched && error}\n                  label=\"Foundation date\"\n                  placeholder=\"2/25/2012\"\n                />\n              )}\n            </Field>\n          </Grid>\n          <Grid item>\n            <Field\n              name=\"charterCapital\"\n              validate={required}\n            >\n              {({ input, meta: { error, touched } }) => (\n                <TextField\n                  {...input}\n                  error={touched && Boolean(error)}\n                  fullWidth\n                  helperText={touched && error}\n                  label=\"Charter capital\"\n                  type=\"number\"\n                />\n              )}\n            </Field>\n          </Grid>\n          <Grid item>\n            <Grid\n              container\n              justify=\"flex-end\"\n              spacing={16}\n            >\n              <Grid item>\n                <Button type=\"reset\">\n                  Cancel\n                </Button>\n              </Grid>\n              <Grid item>\n                <Button\n                  color=\"primary\"\n                  disabled={submitting}\n                  type=\"submit\"\n                  variant=\"contained\"\n                >\n                  Submit\n                </Button>\n              </Grid>\n            </Grid>\n          </Grid>\n        </Grid>\n      )}\n    </Form>\n  );\n}\n\nCompanyForm.propTypes = {\n  company: COMPANY_SHAPE,\n  onReset: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n};\n","import React, { useContext, useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport SimpleAppBar from \"../../SimpleAppBar\";\n\nimport AppMenu from \"../../menu/ui/AppMenu\";\nimport FormPage from \"../../FormPage\";\nimport CompanyForm from \"./form/CompanyForm\";\nimport AppContext from \"../../AppContext\";\n\n\nfunction EditCompanyPage({ match, history }) {\n  const [state, setState] = useState({\n    company: null,\n    isLoading: true\n  });\n  const { services: { companies: companiesService } } = useContext(AppContext);\n\n  const companyId = match.params.id;\n  const { company, isLoading } = state;\n\n  const companyName = isLoading ? '' : company.name;\n\n  const fetchCompany = async () => {\n    setState(state => ({ ...state, isLoading: true }));\n    try {\n      const result = await companiesService.getCompanyById(companyId);\n      setState(state => ({\n        ...state,\n        company: result\n      }));\n    } finally {\n      setState(state => ({\n        ...state,\n        isLoading: false\n      }));\n    }\n  };\n\n  useEffect(() => {\n    fetchCompany();\n  }, []);\n\n  const appBar = (\n    <SimpleAppBar\n      title={isLoading ? \"Please wait...\" : companyName}\n    />\n  );\n\n  const onReset = (e) => {\n    e.preventDefault();\n    history.replace({ pathname: '/' });\n  };\n\n  const onSubmit = async (values) => {\n    await companiesService.editCompany(company, values);\n    history.replace({ pathname: '/' });\n  };\n\n  return (\n    <AppMenu>\n      <FormPage\n        appBar={appBar}\n        isLoading={state.isLoading}\n        title={`Edit ${companyName}`}\n      >\n        <CompanyForm\n          company={company}\n          onReset={onReset}\n          onSubmit={onSubmit}\n        />\n      </FormPage>\n    </AppMenu>\n  );\n}\n\nEditCompanyPage.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string.isRequired\n    }).isRequired\n  }).isRequired,\n  history: PropTypes.shape({\n    goBack: PropTypes.func,\n  }).isRequired,\n};\n\nexport default EditCompanyPage;\n","import React, { useContext } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport SimpleAppBar from \"../../SimpleAppBar\";\n\nimport AppMenu from \"../../menu/ui/AppMenu\";\nimport FormPage from \"../../FormPage\";\nimport CompanyForm from \"./form/CompanyForm\";\nimport AppContext from \"../../AppContext\";\n\n\nfunction CreateCompanyPage({ history }) {\n  const { services: { companies } } = useContext(AppContext);\n\n  const appBar = (\n    <SimpleAppBar\n      title=\"Create new company\"\n    />\n  );\n\n  const onReset = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    history.replace('/');\n  };\n\n  const onSubmit = async (values) => {\n    await companies.createCompany(values);\n    history.replace('/');\n  };\n\n  return (\n    <AppMenu>\n      <FormPage\n        appBar={appBar}\n        title={`Create new company`}\n      >\n        <CompanyForm\n          onReset={onReset}\n          onSubmit={onSubmit}\n        />\n      </FormPage>\n    </AppMenu>\n  );\n}\n\nCreateCompanyPage.propTypes = {\n  history: PropTypes.shape({\n    goBack: PropTypes.func,\n  }).isRequired,\n};\n\nexport default CreateCompanyPage;\n","import { getId } from \"../models/Company\";\n\n\nconst CompaniesStore = ({ localStorage, parseList = JSON.parse, formatList = JSON.stringify }) => ({\n  getList() {\n    return Promise.resolve(parseList(localStorage.getItem('companies')) || []);\n  },\n  async getById(id) {\n    const list = await this.getList();\n    return Promise.resolve(list.find(item => getId(item) === id));\n  },\n  async saveItem(item) {\n    const list = await this.getList();\n    const updatedList = [...list, item];\n    return this.saveList(updatedList);\n  },\n  async updateItem(item) {\n    const list = await this.getList();\n    const updatedList = list.map((i) => {\n      if (getId(i) !== getId(item)) {\n        return i;\n      }\n\n      return item;\n    });\n    return this.saveList(updatedList);\n  },\n  saveList(list) {\n    localStorage.setItem('companies', formatList(list));\n    return Promise.resolve();\n  },\n});\n\nexport default CompaniesStore;\n","import { create, update } from \"../models/Company\";\n\nconst CompaniesService = ({ companiesStore }) => ({\n  createCompany: (data) => {\n    const company = create(data);\n    return companiesStore.saveItem(company);\n  },\n  editCompany: (company, data) => {\n    const updatedCompany = update(data, company);\n    return companiesStore.updateItem(updatedCompany);\n  },\n  getCompanies: () => companiesStore.getList(),\n  getCompanyById: (id) => companiesStore.getById(id),\n});\n\nexport default CompaniesService;\n","export default class UserNotFoundError extends Error {\n  constructor(login) {\n    super(`User \"${login}\" doesn't exist`);\n  }\n}\n","export default class IncorrectPasswordError extends Error {\n  constructor() {\n    super(`Invalid password`);\n  }\n}\n","import UserNotFoundError from '../errors/UserNotFoundError';\nimport IncorrectPasswordError from \"../errors/IncorrectPasswordError\";\n\nfunction authenticate(values) {\n  return new Promise((resolve, reject) => {\n    const { login, password } = values;\n\n    if (login !== \"admin\") {\n      reject(new UserNotFoundError(login));\n      return;\n    } else if (password !== \"admin\") {\n      reject(new IncorrectPasswordError());\n      return;\n    }\n\n    localStorage.setItem('isAuthenticated', 'true');\n\n    resolve();\n  });\n}\n\nexport default authenticate;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Form, Field } from \"react-final-form\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { required } from '../../../form/ui/validators';\n\n\nfunction LoginForm({ className, onSubmit }) {\n  return (\n    <Form onSubmit={onSubmit}>\n      {({ handleSubmit, submitError, submitting }) => (\n        <Grid\n          alignContent=\"center\"\n          className={className}\n          component=\"form\"\n          container\n          onSubmit={handleSubmit}\n          spacing={40}\n        >\n          {submitError ? (\n            <Grid\n              color=\"error\"\n              component={Typography}\n              item\n              xs={12}\n            >\n              {submitError}\n            </Grid>\n          ) : null}\n\n          <Grid item xs={12}>\n            <Field\n              name=\"login\"\n              validate={required}\n            >\n              {({ input, meta: { error, touched, submitError } }) => (\n                <TextField\n                  {...input}\n                  autoFocus\n                  error={touched && Boolean(error || submitError)}\n                  fullWidth\n                  helperText={touched && (error || submitError)}\n                  placeholder=\"Login\"\n                />\n              )}\n            </Field>\n          </Grid>\n\n          <Grid item xs={12}>\n            <Field\n              name=\"password\"\n              validate={required}\n            >\n              {({ input, meta: { error, touched } }) => (\n                <TextField\n                  {...input}\n                  error={touched && Boolean(error)}\n                  fullWidth\n                  helperText={touched && error}\n                  placeholder=\"Password\"\n                  type=\"password\"\n                />\n              )}\n            </Field>\n          </Grid>\n\n          <Grid item xs={12}>\n            <Button\n              color=\"primary\"\n              disabled={submitting}\n              fullWidth\n              type=\"submit\"\n              variant=\"contained\"\n            >\n              Submit\n            </Button>\n          </Grid>\n        </Grid>\n      )}\n    </Form>\n  );\n}\n\nLoginForm.propTypes = {\n  className: PropTypes.string,\n  onSubmit: PropTypes.func.isRequired\n};\n\nLoginForm.defaultProps = {\n  className: \"\"\n};\n\nexport default LoginForm;\n","import React from \"react\";\nimport withStyles from \"@material-ui/core/styles/withStyles\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { FORM_ERROR } from \"final-form\";\n\nimport Page from '../../Page';\n\nimport authenticate from '../domain/services/authenticate';\n\nimport LoginForm from './form/LoginForm';\nimport UserNotFoundError from \"../domain/errors/UserNotFoundError\";\nimport IncorrectPasswordError from \"../domain/errors/IncorrectPasswordError\";\n\n\nconst styles = (theme) => ({\n  root: {\n    paddingTop: theme.spacing.unit * 8,\n  },\n  form: {\n    margin: `${theme.spacing.unit * 8}px auto`,\n    maxWidth: '360px',\n  }\n});\n\nfunction LoginPage({ classes, history }) {\n  const onSubmit = async (values) => {\n    try {\n      await authenticate(values);\n      history.replace({ pathname: '/' });\n    } catch(e) {\n      if (e instanceof UserNotFoundError) {\n        return { login: e.message };\n      } else if (e instanceof IncorrectPasswordError) {\n        return { [FORM_ERROR]: 'Incorrect credentials' };\n      }\n\n      throw e;\n    }\n  };\n\n  return (\n    <Page classes={{ root: classes.root }}>\n      <Typography\n        align=\"center\"\n        paragraph={false}\n        variant=\"title\"\n      >\n        Welcome\n      </Typography>\n\n      <Typography\n        align=\"center\"\n        color=\"textSecondary\"\n      >\n        to\n      </Typography>\n\n      <Typography\n        align=\"center\"\n        color=\"primary\"\n        variant=\"headline\"\n      >\n        Logistics Risks Calculator\n      </Typography>\n\n      <LoginForm\n        className={classes.form}\n        onSubmit={onSubmit}\n      />\n    </Page>\n  );\n}\n\nexport default withStyles(styles)(LoginPage);\n","function isAuthenticated() {\n  return localStorage.getItem('isAuthenticated') === 'true';\n}\n\nexport default isAuthenticated;\n","import React from 'react';\nimport { Redirect } from 'react-router-dom';\n\nimport isAuthenticated from \"../domain/services/isAuthenticated\";\n\nfunction SecureRoute({ children }) {\n  if (!isAuthenticated()) {\n    return (\n      <Redirect\n        to={{\n          pathname: '/login',\n        }}\n      />\n    )\n  }\n\n  return children;\n}\n\nexport default SecureRoute;\n","import { getId } from \"../models/Risk\";\nimport { getByCompanyId } from \"../models/RisksCollection\";\n\n\nconst RisksStore = ({ localStorage, parseList = JSON.parse, formatList = JSON.stringify }) => ({\n  getList() {\n    return Promise.resolve(parseList(localStorage.getItem('risks')) || []);\n  },\n  async getByCompanyId(companyId) {\n    const list = await this.getList();\n    return Promise.resolve(getByCompanyId(companyId, list));\n  },\n  async saveItem(item) {\n    const list = await this.getList();\n    const updatedList = [...list, item];\n    return this.saveList(updatedList);\n  },\n  async updateItem(item) {\n    const list = await this.getList();\n    const updatedList = list.map((i) => {\n      if (getId(i) !== getId(item)) {\n        return i;\n      }\n\n      return item;\n    });\n    return this.saveList(updatedList);\n  },\n  saveList(list) {\n    localStorage.setItem('risks', formatList(list));\n    return Promise.resolve();\n  },\n});\n\nexport default RisksStore;\n\n","import { create, update } from \"../models/Risk\";\n\nconst getRandomInt = (min, max) => {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n\nconst RisksService = ({ risksStore }) => {\n  let listener;\n  return {\n    async calculate(companyId) {\n      const risk = await risksStore.getByCompanyId(companyId);\n\n      const value = getRandomInt(10, 100);\n\n      if (risk) {\n        await risksStore.updateItem(update({ value }, risk));\n      } else {\n        await risksStore.saveItem(create({ value, companyId }));\n      }\n\n      if (listener) {\n        listener();\n      }\n    },\n    getList() {\n      return risksStore.getList();\n    },\n    subscribe(l) {\n      listener = l;\n    },\n    unsubscribe() {\n      listener = null;\n    }\n  };\n};\n\nexport default RisksService;\n","import React from \"react\";\nimport { HashRouter as Router, Route, Switch } from \"react-router-dom\";\n\nimport CompaniesTablePage from \"./companies/ui/CompaniesTablePage\";\nimport EditCompanyPage from \"./companies/ui/EditCompanyPage\";\nimport CreateCompanyPage from \"./companies/ui/CreateCompanyPage\";\nimport CompaniesStore from \"./companies/domain/data/CompaniesStore\";\nimport CompaniesService from \"./companies/domain/services/CompaniesService\";\nimport LoginPage from \"./auth/ui/LoginPage\";\nimport SecureRoute from \"./auth/ui/SecureRoute\";\nimport AppContext from './AppContext';\nimport RisksStore from \"./risks/domain/data/RisksStore\";\nimport RisksService from \"./risks/domain/services/RisksService\";\n\nimport \"./App.css\";\n\n\nconst companiesStore = CompaniesStore({ localStorage });\nconst companiesService = CompaniesService({ companiesStore });\nconst risksStore = RisksStore({ localStorage });\nconst risksService = RisksService({ risksStore });\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <AppContext.Provider\n        value={{ services: { companies: companiesService, risks: risksService } }}\n      >\n        <Router>\n          <Switch>\n            <Route path=\"/login\" component={LoginPage}/>\n\n            <SecureRoute>\n              <Route exact path=\"/\" component={CompaniesTablePage}/>\n              <Route exact path=\"/company/\" component={CreateCompanyPage}/>\n              <Route path=\"/company/:id\" component={EditCompanyPage}/>\n            </SecureRoute>\n          </Switch>\n        </Router>\n      </AppContext.Provider>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}